/**
 * This file was generated by the Objective Systems ASN1C Compiler
 * (http://www.obj-sys.com).  Version: 6.0B, Date: 18-Oct-2006.
 */
#include "Datastore.h"
#include "libxml/parser.h"
#include "rtxmlsrc/osrtxml.h"
#include "rtxsrc/rtxCommon.h"

int DOMTest_DataType (OSCTXT* pctxt, DataType* pvalue, 
   xmlNodePtr pXmlNode, OSBOOL setChild)
{
   /* Populate elements */
   if (setChild)
      pXmlNode = pXmlNode->children;

   for ( ; 0 != pXmlNode; pXmlNode = pXmlNode->next) {
      if (pXmlNode->type == XML_ELEMENT_NODE) {
         if (rtxUTF8StrEqual (pXmlNode->name, OSUTF8("stringT"))) {
            pvalue->m.stringTPresent = 1;
            if (0 != pXmlNode->children) {
               pvalue->stringT = pXmlNode->children->content;
            }
            else {
               pvalue->stringT = (const OSUTF8CHAR*)"";
            }
         }
         else if (rtxUTF8StrEqual (pXmlNode->name, OSUTF8("integerT"))) {
            pvalue->m.integerTPresent = 1;
            if (0 != pXmlNode->children) {
               pvalue->integerT = atoi ((const char*)pXmlNode->children->content);
            }
         }
         else if (rtxUTF8StrEqual (pXmlNode->name, OSUTF8("binaryT"))) {
            pvalue->m.binaryTPresent = 1;
            if (0 != pXmlNode->children) {
               OSUTF8CHAR* pcontent = pXmlNode->children->content;
               rtxInitContextBuffer (pctxt, pcontent, rtxUTF8LenBytes(pcontent));
               rtXmlDecDynBase64Str (pctxt, &pvalue->binaryT);
            }
         }
         else if (rtxUTF8StrEqual (pXmlNode->name, OSUTF8("booleanT"))) {
            pvalue->m.booleanTPresent = 1;
            if (0 != pXmlNode->children) {
               OSUTF8CHAR* pcontent = pXmlNode->children->content;
               rtxInitContextBuffer (pctxt, pcontent, rtxUTF8LenBytes(pcontent));
               rtXmlDecBool (pctxt, &pvalue->booleanT);
            }
         }
      }
   }

   return 0;
}

int DOMTest_DataStoreType (OSCTXT* pctxt, DataStoreType* pvalue, 
   xmlNodePtr pXmlNode, OSBOOL setChild)
{
   DataType* pdata1;
   if (setChild)
      pXmlNode = pXmlNode->children;

   for ( ; 0 != pXmlNode; pXmlNode = pXmlNode->next) {
      if (pXmlNode->type == XML_ELEMENT_NODE) {
         if (rtxUTF8StrEqual (pXmlNode->name, OSUTF8("data"))) {
            pdata1 = rtxMemAllocType (pctxt, DataType);

            if (pdata1 == NULL)
               return LOG_RTERR (pctxt, RTERR_NOMEM);

            asn1Init_DataType (pdata1);
            DOMTest_DataType (pctxt, pdata1, pXmlNode, TRUE);
            if (0 != pdata1)
               rtxDListAppend (pctxt, pvalue, (void*)pdata1);
         }
      }
   }

   return 0;
}

int DOMTest_DataStore (OSCTXT* pctxt, DataStore* pvalue, 
   xmlNodePtr pXmlNode, OSBOOL setChild)
{
   DOMTest_DataStoreType (pctxt, pvalue, pXmlNode, TRUE);

   return 0;
}

