/**
 * This file was generated by the Objective Systems ASN1C Compiler
 * (http://www.obj-sys.com).  Version: 6.0B, Date: 18-Oct-2006.
 */
#include "Weblog.h"
#include "rtxsrc/rtxCommon.h"

/**************************************************************/
/*                                                            */
/*  Weblog_entry                                              */
/*                                                            */
/**************************************************************/

EXTERN int asn1E_Weblog_entry (OSCTXT* pctxt,
   Weblog_entry *pvalue, ASN1TagType tagging)
{
   int ll;
   int ll0 = 0;
   int ll1 = 0;

   /* encode byteCount */

   ll = xe_tag_len (pctxt, TM_CTXT|TM_PRIM|9,
      xe_utf8str (pctxt, pvalue->byteCount, ASN1IMPL));
   if (ll < 0) return LOG_RTERR (pctxt, ll);
   ll1 += ll;

   /* encode statusCode */

   ll = xe_tag_len (pctxt, TM_CTXT|TM_PRIM|8,
      xe_uint16 (pctxt, &pvalue->statusCode, ASN1IMPL));
   if (ll < 0) return LOG_RTERR (pctxt, ll);
   ll1 += ll;

   /* encode protocol */

   ll = xe_tag_len (pctxt, TM_CTXT|TM_PRIM|7,
      xe_utf8str (pctxt, pvalue->protocol, ASN1IMPL));
   if (ll < 0) return LOG_RTERR (pctxt, ll);
   ll1 += ll;

   /* encode resource */

   ll = xe_tag_len (pctxt, TM_CTXT|TM_PRIM|6,
      xe_utf8str (pctxt, pvalue->resource, ASN1IMPL));
   if (ll < 0) return LOG_RTERR (pctxt, ll);
   ll1 += ll;

   /* encode reqType */

   ll = xe_tag_len (pctxt, TM_CTXT|TM_PRIM|5,
      xe_utf8str (pctxt, pvalue->reqType, ASN1IMPL));
   if (ll < 0) return LOG_RTERR (pctxt, ll);
   ll1 += ll;

   /* encode reqID */

   ll = xe_tag_len (pctxt, TM_CTXT|TM_PRIM|4,
      xe_int16 (pctxt, &pvalue->reqID, ASN1IMPL));
   if (ll < 0) return LOG_RTERR (pctxt, ll);
   ll1 += ll;

   /* encode dateTime */

   ll = xe_tag_len (pctxt, TM_CTXT|TM_PRIM|3,
      xe_utf8str (pctxt, pvalue->dateTime, ASN1IMPL));
   if (ll < 0) return LOG_RTERR (pctxt, ll);
   ll1 += ll;

   /* encode userAgent */

   ll = xe_tag_len (pctxt, TM_CTXT|TM_PRIM|2,
      xe_utf8str (pctxt, pvalue->userAgent, ASN1IMPL));
   if (ll < 0) return LOG_RTERR (pctxt, ll);
   ll1 += ll;

   /* encode referer */

   ll = xe_tag_len (pctxt, TM_CTXT|TM_PRIM|1,
      xe_utf8str (pctxt, pvalue->referer, ASN1IMPL));
   if (ll < 0) return LOG_RTERR (pctxt, ll);
   ll1 += ll;

   /* encode host */

   ll = xe_tag_len (pctxt, TM_CTXT|TM_PRIM|0,
      xe_utf8str (pctxt, pvalue->host, ASN1IMPL));
   if (ll < 0) return LOG_RTERR (pctxt, ll);
   ll1 += ll;

   ll0 += ll1;

   if (tagging == ASN1EXPL)
      ll0 = xe_tag_len (pctxt, TM_UNIV|TM_CONS|16, ll0);

   return (ll0);
}

int XmlEnc_Weblog_entry (OSCTXT* pctxt, Weblog_entry* pvalue, 
   const OSUTF8CHAR* elemName, const OSUTF8CHAR* nsPrefix)
{
   int stat = 0;

   if (0 != elemName) {
      stat = rtXmlEncStartElement (pctxt, elemName, nsPrefix, TRUE);
      if (stat != 0) return LOG_RTERR (pctxt, stat);
   }

   /* encode host */

   stat = rtXmlEncUTF8Str (pctxt, pvalue->host, OSUTF8("host"), nsPrefix);
   if (stat != 0) return LOG_RTERR (pctxt, stat);

   /* encode referer */

   stat = rtXmlEncUTF8Str (pctxt, pvalue->referer
      , OSUTF8("referer"), nsPrefix);
   if (stat != 0) return LOG_RTERR (pctxt, stat);

   /* encode userAgent */

   stat = rtXmlEncUTF8Str (pctxt, pvalue->userAgent
      , OSUTF8("userAgent"), nsPrefix);
   if (stat != 0) return LOG_RTERR (pctxt, stat);

   /* encode dateTime */

   stat = rtXmlEncUTF8Str (pctxt, pvalue->dateTime
      , OSUTF8("dateTime"), nsPrefix);
   if (stat != 0) return LOG_RTERR (pctxt, stat);

   /* encode reqID */

   stat = rtXmlEncInt (pctxt, pvalue->reqID, OSUTF8("reqID"), nsPrefix);
   if (stat != 0) return LOG_RTERR (pctxt, stat);

   /* encode reqType */

   stat = rtXmlEncUTF8Str (pctxt, pvalue->reqType
      , OSUTF8("reqType"), nsPrefix);
   if (stat != 0) return LOG_RTERR (pctxt, stat);

   /* encode resource */

   stat = rtXmlEncUTF8Str (pctxt, pvalue->resource
      , OSUTF8("resource"), nsPrefix);
   if (stat != 0) return LOG_RTERR (pctxt, stat);

   /* encode protocol */

   stat = rtXmlEncUTF8Str (pctxt, pvalue->protocol
      , OSUTF8("protocol"), nsPrefix);
   if (stat != 0) return LOG_RTERR (pctxt, stat);

   /* encode statusCode */

   stat = rtXmlEncUInt (pctxt, pvalue->statusCode
      , OSUTF8("statusCode"), nsPrefix);
   if (stat != 0) return LOG_RTERR (pctxt, stat);

   /* encode byteCount */

   stat = rtXmlEncUTF8Str (pctxt, pvalue->byteCount
      , OSUTF8("byteCount"), nsPrefix);
   if (stat != 0) return LOG_RTERR (pctxt, stat);

   stat = rtXmlEncEndElement (pctxt, elemName, nsPrefix);
   if (stat != 0) return LOG_RTERR (pctxt, stat);

   return (stat);
}

/**************************************************************/
/*                                                            */
/*  Weblog                                                    */
/*                                                            */
/**************************************************************/

EXTERN int asn1E_Weblog (OSCTXT* pctxt,
   Weblog *pvalue, ASN1TagType tagging)
{
   OSRTDListNode* pnode1;
   int ll;
   int ll0 = 0;
   int ll1 = 0;

   if (!(pvalue->count >= 1U)) {
      rtxErrAddStrParm (pctxt, "Weblog.count");
      rtxErrAddIntParm (pctxt, (int)pvalue->count);
      return LOG_RTERR (pctxt, RTERR_CONSVIO);
   }

   pnode1 = pvalue->tail;
   while (0 != pnode1) {
      ll = asn1E_Weblog_entry (pctxt, ((Weblog_entry*)pnode1->data), ASN1EXPL);
      if (ll < 0) return LOG_RTERR (pctxt, ll);
      ll1 += ll;

      pnode1 = pnode1->prev;
   }
   ll1 = xe_tag_len (pctxt, TM_CTXT|TM_CONS|0, ll1);
   if (ll1 < 0) return LOG_RTERR (pctxt, ll1);

   ll0 += ll1;

   if (tagging == ASN1EXPL)
      ll0 = xe_tag_len (pctxt, TM_UNIV|TM_CONS|16, ll0);

   return (ll0);
}

int XmlEnc_Weblog (OSCTXT* pctxt, Weblog* pvalue, const OSUTF8CHAR* elemName, 
   const OSUTF8CHAR* nsPrefix)
{
   int stat = 0;

   if (!(pvalue->count >= 1U)) {
      rtxErrAddStrParm (pctxt, "Weblog.count");
      rtxErrAddIntParm (pctxt, (int)pvalue->count);
      return LOG_RTERR (pctxt, RTERR_CONSVIO);
   }

   if (elemName != 0) {
      stat = rtXmlEncStartElement (pctxt, elemName, nsPrefix, TRUE);
      if (stat != 0) return LOG_RTERR (pctxt, stat);
   }

   { OSRTDListNode* pnode = pvalue->head;
   while (0 != pnode) {
      stat = XmlEnc_Weblog_entry (pctxt, ((Weblog_entry*)pnode->data)
         , OSUTF8("entry"), nsPrefix);
      if (stat != 0) return LOG_RTERR (pctxt, stat);
      pnode = pnode->next;
   }}
   stat = rtXmlEncEndElement (pctxt, elemName, nsPrefix);
   if (stat != 0) return LOG_RTERR (pctxt, stat);

   return (stat);
}

int XmlEnc_Weblog_PDU (OSCTXT* pctxt, Weblog* pvalue)
{
   int stat;
   const OSUTF8CHAR* nsPrefix = 0;

   stat = rtXmlEncStartDocument (pctxt);
   if (stat != 0) return LOG_RTERR (pctxt, stat);

   stat = rtXmlEncStartElement (pctxt, OSUTF8("Weblog"), nsPrefix, FALSE);
   if (stat != 0) return LOG_RTERR (pctxt, stat);

   stat = rtXmlEncNSAttrs (pctxt);
   if (stat != 0) return LOG_RTERR (pctxt, stat);

   stat = rtXmlEncXSIAttrs (pctxt, FALSE);
   if (stat != 0) return LOG_RTERR (pctxt, stat);

   stat = XmlEnc_Weblog (pctxt, pvalue, 0, nsPrefix);
   if (stat != 0) return LOG_RTERR (pctxt, stat);

   stat = rtXmlEncEndElement (pctxt, OSUTF8("Weblog"), nsPrefix);
   if (stat != 0) return LOG_RTERR (pctxt, stat);

   return stat;
}
