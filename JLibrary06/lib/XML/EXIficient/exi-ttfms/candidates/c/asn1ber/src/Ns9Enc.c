/**
 * This file was generated by the Objective Systems ASN1C Compiler
 * (http://www.obj-sys.com).  Version: 6.0B, Date: 18-Oct-2006.
 */
#include "Ns9.h"
#include "Ns12.h"
#include "Ns10.h"
#include "rtxsrc/rtxCommon.h"

/**************************************************************/
/*                                                            */
/*  Animate                                                   */
/*                                                            */
/**************************************************************/

EXTERN int asn1E_Animate (OSCTXT* pctxt,
   Animate *pvalue, ASN1TagType tagging)
{
   int ll;
   int ll0 = 0;
   int ll1 = 0;

   /* encode values */

   if (pvalue->m.valuesPresent) {
      ll = xe_tag_len (pctxt, TM_CTXT|TM_PRIM|15,
         asn1E_Ns11_Values (pctxt, pvalue->values, ASN1IMPL));
      if (ll < 0) return LOG_RTERR (pctxt, ll);
      ll1 += ll;
   }
   /* encode to */

   if (pvalue->m.toPresent) {
      ll = xe_tag_len (pctxt, TM_CTXT|TM_PRIM|14,
         asn1E_Ns11_To (pctxt, pvalue->to, ASN1IMPL));
      if (ll < 0) return LOG_RTERR (pctxt, ll);
      ll1 += ll;
   }
   /* encode targetElement */

   if (pvalue->m.targetElementPresent) {
      ll = xe_tag_len (pctxt, TM_CTXT|TM_PRIM|13,
         asn1E_Ns11_TargetElement (pctxt, pvalue->targetElement, ASN1IMPL));
      if (ll < 0) return LOG_RTERR (pctxt, ll);
      ll1 += ll;
   }
   /* encode repeatDur */

   if (pvalue->m.repeatDurPresent) {
      ll = xe_tag_len (pctxt, TM_CTXT|TM_PRIM|12,
         asn1E_Ns11_RepeatDur (pctxt, pvalue->repeatDur, ASN1IMPL));
      if (ll < 0) return LOG_RTERR (pctxt, ll);
      ll1 += ll;
   }
   /* encode repeatCount */

   if (pvalue->m.repeatCountPresent) {
      ll = xe_tag_len (pctxt, TM_CTXT|TM_PRIM|11,
         asn1E_Ns11_RepeatCount (pctxt, &pvalue->repeatCount, ASN1IMPL));
      if (ll < 0) return LOG_RTERR (pctxt, ll);
      ll1 += ll;
   }
   /* encode keyTimes */

   if (pvalue->m.keyTimesPresent) {
      ll = xe_tag_len (pctxt, TM_CTXT|TM_PRIM|10,
         asn1E_Ns11_KeyTimes (pctxt, pvalue->keyTimes, ASN1IMPL));
      if (ll < 0) return LOG_RTERR (pctxt, ll);
      ll1 += ll;
   }
   /* encode keySplines */

   if (pvalue->m.keySplinesPresent) {
      ll = xe_tag_len (pctxt, TM_CTXT|TM_PRIM|9,
         asn1E_Ns11_KeySplines (pctxt, pvalue->keySplines, ASN1IMPL));
      if (ll < 0) return LOG_RTERR (pctxt, ll);
      ll1 += ll;
   }
   /* encode from */

   if (pvalue->m.fromPresent) {
      ll = xe_tag_len (pctxt, TM_CTXT|TM_PRIM|8,
         asn1E_Ns11_From (pctxt, pvalue->from, ASN1IMPL));
      if (ll < 0) return LOG_RTERR (pctxt, ll);
      ll1 += ll;
   }
   /* encode fill */

   if (pvalue->m.fillPresent) {
      if(pvalue->fill < 0 || pvalue->fill > 5)
         return LOG_RTERR (pctxt, RTERR_INVENUM);

      ll = xe_tag_len (pctxt, TM_CTXT|TM_PRIM|7,
         asn1E_Ns11_Fill (pctxt, &pvalue->fill, ASN1IMPL));
      if (ll < 0) return LOG_RTERR (pctxt, ll);
      ll1 += ll;
   }
   /* encode calcMode */

   if (pvalue->m.calcModePresent) {
      if(pvalue->calcMode < 0 || pvalue->calcMode > 3)
         return LOG_RTERR (pctxt, RTERR_INVENUM);

      ll = xe_tag_len (pctxt, TM_CTXT|TM_PRIM|6,
         asn1E_Ns11_CalcMode (pctxt, &pvalue->calcMode, ASN1IMPL));
      if (ll < 0) return LOG_RTERR (pctxt, ll);
      ll1 += ll;
   }
   /* encode by */

   if (pvalue->m.byPresent) {
      ll = xe_tag_len (pctxt, TM_CTXT|TM_PRIM|5,
         asn1E_Ns11_By (pctxt, pvalue->by, ASN1IMPL));
      if (ll < 0) return LOG_RTERR (pctxt, ll);
      ll1 += ll;
   }
   /* encode attributeName */

   ll = xe_tag_len (pctxt, TM_CTXT|TM_PRIM|4,
      asn1E_Ns11_AttributeName (pctxt, pvalue->attributeName, ASN1IMPL));
   if (ll < 0) return LOG_RTERR (pctxt, ll);
   ll1 += ll;

   /* encode additive */

   if (pvalue->m.additivePresent) {
      if(pvalue->additive < 0 || pvalue->additive > 1)
         return LOG_RTERR (pctxt, RTERR_INVENUM);

      ll = xe_tag_len (pctxt, TM_CTXT|TM_PRIM|3,
         asn1E_Ns11_Additive (pctxt, &pvalue->additive, ASN1IMPL));
      if (ll < 0) return LOG_RTERR (pctxt, ll);
      ll1 += ll;
   }
   /* encode accumulate */

   if (pvalue->m.accumulatePresent) {
      if(pvalue->accumulate < 0 || pvalue->accumulate > 1)
         return LOG_RTERR (pctxt, RTERR_INVENUM);

      ll = xe_tag_len (pctxt, TM_CTXT|TM_PRIM|2,
         asn1E_Ns11_Accumulate (pctxt, &pvalue->accumulate, ASN1IMPL));
      if (ll < 0) return LOG_RTERR (pctxt, ll);
      ll1 += ll;
   }
   /* encode sub_item */

   if (pvalue->m.sub_itemPresent) {
      ll = xe_tag_len (pctxt, TM_CTXT|TM_PRIM|1,
         xe_utf8str (pctxt, pvalue->sub_item, ASN1IMPL));
      if (ll < 0) return LOG_RTERR (pctxt, ll);
      ll1 += ll;
   }
   /* encode formula */

   if (pvalue->m.formulaPresent) {
      ll = xe_tag_len (pctxt, TM_CTXT|TM_PRIM|0,
         xe_utf8str (pctxt, pvalue->formula, ASN1IMPL));
      if (ll < 0) return LOG_RTERR (pctxt, ll);
      ll1 += ll;
   }
   ll0 += ll1;

   if (tagging == ASN1EXPL)
      ll0 = xe_tag_len (pctxt, TM_UNIV|TM_CONS|16, ll0);

   return (ll0);
}

int XmlEnc_Animate (OSCTXT* pctxt, Animate* pvalue, 
   const OSUTF8CHAR* elemName, const OSUTF8CHAR* nsPrefix)
{
   int stat = 0;

   if (0 != elemName) {
      stat = rtXmlEncStartElement (pctxt, elemName, nsPrefix, FALSE);
      if (stat != 0) return LOG_RTERR (pctxt, stat);
   }

   /* add attributes */

   if (pvalue->m.formulaPresent) {
      OSRTSAFEMEMCPY (pctxt, OSUTF8(" ns9:formula=\""), 14);

      stat = rtXmlEncUTF8Str (pctxt, pvalue->formula, 0, 0);
      if (stat != 0) return LOG_RTERR (pctxt, stat);

      OSRTSAFEPUTCHAR (pctxt, '\"');
   }

   if (pvalue->m.sub_itemPresent) {
      OSRTSAFEMEMCPY (pctxt, OSUTF8(" ns9:sub-item=\""), 15);

      stat = rtXmlEncUTF8Str (pctxt, pvalue->sub_item, 0, 0);
      if (stat != 0) return LOG_RTERR (pctxt, stat);

      OSRTSAFEPUTCHAR (pctxt, '\"');
   }

   if (pvalue->m.accumulatePresent) {
      OSRTSAFEMEMCPY (pctxt, OSUTF8(" ns11:accumulate=\""), 18);

      if(pvalue->accumulate < 0 || pvalue->accumulate > 1)
         return LOG_RTERR (pctxt, RTERR_INVENUM);

      stat = XmlEnc_Ns11_Accumulate (pctxt, pvalue->accumulate, 0, 0);
      if (stat != 0) return LOG_RTERR (pctxt, stat);

      OSRTSAFEPUTCHAR (pctxt, '"');
   }

   if (pvalue->m.additivePresent) {
      OSRTSAFEMEMCPY (pctxt, OSUTF8(" ns11:additive=\""), 16);

      if(pvalue->additive < 0 || pvalue->additive > 1)
         return LOG_RTERR (pctxt, RTERR_INVENUM);

      stat = XmlEnc_Ns11_Additive (pctxt, pvalue->additive, 0, 0);
      if (stat != 0) return LOG_RTERR (pctxt, stat);

      OSRTSAFEPUTCHAR (pctxt, '"');
   }

   OSRTSAFEMEMCPY (pctxt, OSUTF8(" ns11:attributeName=\""), 21);

   stat = XmlEnc_Ns11_AttributeName (pctxt, pvalue->attributeName, 0, 0);
   if (stat != 0) return LOG_RTERR (pctxt, stat);

   OSRTSAFEPUTCHAR (pctxt, '"');

   if (pvalue->m.byPresent) {
      OSRTSAFEMEMCPY (pctxt, OSUTF8(" ns11:by=\""), 10);

      stat = XmlEnc_Ns11_By (pctxt, pvalue->by, 0, 0);
      if (stat != 0) return LOG_RTERR (pctxt, stat);

      OSRTSAFEPUTCHAR (pctxt, '"');
   }

   if (pvalue->m.calcModePresent) {
      OSRTSAFEMEMCPY (pctxt, OSUTF8(" ns11:calcMode=\""), 16);

      if(pvalue->calcMode < 0 || pvalue->calcMode > 3)
         return LOG_RTERR (pctxt, RTERR_INVENUM);

      stat = XmlEnc_Ns11_CalcMode (pctxt, pvalue->calcMode, 0, 0);
      if (stat != 0) return LOG_RTERR (pctxt, stat);

      OSRTSAFEPUTCHAR (pctxt, '"');
   }

   if (pvalue->m.fillPresent) {
      OSRTSAFEMEMCPY (pctxt, OSUTF8(" ns11:fill=\""), 12);

      if(pvalue->fill < 0 || pvalue->fill > 5)
         return LOG_RTERR (pctxt, RTERR_INVENUM);

      stat = XmlEnc_Ns11_Fill (pctxt, pvalue->fill, 0, 0);
      if (stat != 0) return LOG_RTERR (pctxt, stat);

      OSRTSAFEPUTCHAR (pctxt, '"');
   }

   if (pvalue->m.fromPresent) {
      OSRTSAFEMEMCPY (pctxt, OSUTF8(" ns11:from=\""), 12);

      stat = XmlEnc_Ns11_From (pctxt, pvalue->from, 0, 0);
      if (stat != 0) return LOG_RTERR (pctxt, stat);

      OSRTSAFEPUTCHAR (pctxt, '"');
   }

   if (pvalue->m.keySplinesPresent) {
      OSRTSAFEMEMCPY (pctxt, OSUTF8(" ns11:keySplines=\""), 18);

      stat = XmlEnc_Ns11_KeySplines (pctxt, pvalue->keySplines, 0, 0);
      if (stat != 0) return LOG_RTERR (pctxt, stat);

      OSRTSAFEPUTCHAR (pctxt, '"');
   }

   if (pvalue->m.keyTimesPresent) {
      OSRTSAFEMEMCPY (pctxt, OSUTF8(" ns11:keyTimes=\""), 16);

      stat = XmlEnc_Ns11_KeyTimes (pctxt, pvalue->keyTimes, 0, 0);
      if (stat != 0) return LOG_RTERR (pctxt, stat);

      OSRTSAFEPUTCHAR (pctxt, '"');
   }

   if (pvalue->m.repeatCountPresent) {
      OSRTSAFEMEMCPY (pctxt, OSUTF8(" ns11:repeatCount=\""), 19);

      stat = XmlEnc_Ns11_RepeatCount (pctxt, pvalue->repeatCount, 0, 0);
      if (stat != 0) return LOG_RTERR (pctxt, stat);

      OSRTSAFEPUTCHAR (pctxt, '"');
   }

   if (pvalue->m.repeatDurPresent) {
      OSRTSAFEMEMCPY (pctxt, OSUTF8(" ns11:repeatDur=\""), 17);

      stat = XmlEnc_Ns11_RepeatDur (pctxt, pvalue->repeatDur, 0, 0);
      if (stat != 0) return LOG_RTERR (pctxt, stat);

      OSRTSAFEPUTCHAR (pctxt, '"');
   }

   if (pvalue->m.targetElementPresent) {
      OSRTSAFEMEMCPY (pctxt, OSUTF8(" ns11:targetElement=\""), 21);

      stat = XmlEnc_Ns11_TargetElement (pctxt, pvalue->targetElement, 0, 0);
      if (stat != 0) return LOG_RTERR (pctxt, stat);

      OSRTSAFEPUTCHAR (pctxt, '"');
   }

   if (pvalue->m.toPresent) {
      OSRTSAFEMEMCPY (pctxt, OSUTF8(" ns11:to=\""), 10);

      stat = XmlEnc_Ns11_To (pctxt, pvalue->to, 0, 0);
      if (stat != 0) return LOG_RTERR (pctxt, stat);

      OSRTSAFEPUTCHAR (pctxt, '"');
   }

   if (pvalue->m.valuesPresent) {
      OSRTSAFEMEMCPY (pctxt, OSUTF8(" ns11:values=\""), 14);

      stat = XmlEnc_Ns11_Values (pctxt, pvalue->values, 0, 0);
      if (stat != 0) return LOG_RTERR (pctxt, stat);

      OSRTSAFEPUTCHAR (pctxt, '"');
   }

   OSRTSAFEPUTCHAR (pctxt, '>');
   pctxt->flags &= ~OSTERMSTART;
   pctxt->state = OSXMLSTART;

   stat = rtXmlEncEndElement (pctxt, elemName, nsPrefix);
   if (stat != 0) return LOG_RTERR (pctxt, stat);

   return (stat);
}

/**************************************************************/
/*                                                            */
/*  Set                                                       */
/*                                                            */
/**************************************************************/

EXTERN int asn1E_Set (OSCTXT* pctxt,
   Set *pvalue, ASN1TagType tagging)
{
   int ll;
   int ll0 = 0;
   int ll1 = 0;

   /* encode to */

   if (pvalue->m.toPresent) {
      ll = xe_tag_len (pctxt, TM_CTXT|TM_PRIM|6,
         asn1E_Ns11_To (pctxt, pvalue->to, ASN1IMPL));
      if (ll < 0) return LOG_RTERR (pctxt, ll);
      ll1 += ll;
   }
   /* encode targetElement */

   if (pvalue->m.targetElementPresent) {
      ll = xe_tag_len (pctxt, TM_CTXT|TM_PRIM|5,
         asn1E_Ns11_TargetElement (pctxt, pvalue->targetElement, ASN1IMPL));
      if (ll < 0) return LOG_RTERR (pctxt, ll);
      ll1 += ll;
   }
   /* encode fill */

   if (pvalue->m.fillPresent) {
      if(pvalue->fill < 0 || pvalue->fill > 5)
         return LOG_RTERR (pctxt, RTERR_INVENUM);

      ll = xe_tag_len (pctxt, TM_CTXT|TM_PRIM|4,
         asn1E_Ns11_Fill (pctxt, &pvalue->fill, ASN1IMPL));
      if (ll < 0) return LOG_RTERR (pctxt, ll);
      ll1 += ll;
   }
   /* encode attributeName */

   ll = xe_tag_len (pctxt, TM_CTXT|TM_PRIM|3,
      asn1E_Ns11_AttributeName (pctxt, pvalue->attributeName, ASN1IMPL));
   if (ll < 0) return LOG_RTERR (pctxt, ll);
   ll1 += ll;

   /* encode additive */

   if (pvalue->m.additivePresent) {
      if(pvalue->additive < 0 || pvalue->additive > 1)
         return LOG_RTERR (pctxt, RTERR_INVENUM);

      ll = xe_tag_len (pctxt, TM_CTXT|TM_PRIM|2,
         asn1E_Ns11_Additive (pctxt, &pvalue->additive, ASN1IMPL));
      if (ll < 0) return LOG_RTERR (pctxt, ll);
      ll1 += ll;
   }
   /* encode accumulate */

   if (pvalue->m.accumulatePresent) {
      if(pvalue->accumulate < 0 || pvalue->accumulate > 1)
         return LOG_RTERR (pctxt, RTERR_INVENUM);

      ll = xe_tag_len (pctxt, TM_CTXT|TM_PRIM|1,
         asn1E_Ns11_Accumulate (pctxt, &pvalue->accumulate, ASN1IMPL));
      if (ll < 0) return LOG_RTERR (pctxt, ll);
      ll1 += ll;
   }
   /* encode sub_item */

   if (pvalue->m.sub_itemPresent) {
      ll = xe_tag_len (pctxt, TM_CTXT|TM_PRIM|0,
         xe_utf8str (pctxt, pvalue->sub_item, ASN1IMPL));
      if (ll < 0) return LOG_RTERR (pctxt, ll);
      ll1 += ll;
   }
   ll0 += ll1;

   if (tagging == ASN1EXPL)
      ll0 = xe_tag_len (pctxt, TM_UNIV|TM_CONS|16, ll0);

   return (ll0);
}

int XmlEnc_Set (OSCTXT* pctxt, Set* pvalue, const OSUTF8CHAR* elemName, 
   const OSUTF8CHAR* nsPrefix)
{
   int stat = 0;

   if (0 != elemName) {
      stat = rtXmlEncStartElement (pctxt, elemName, nsPrefix, FALSE);
      if (stat != 0) return LOG_RTERR (pctxt, stat);
   }

   /* add attributes */

   if (pvalue->m.sub_itemPresent) {
      OSRTSAFEMEMCPY (pctxt, OSUTF8(" ns9:sub-item=\""), 15);

      stat = rtXmlEncUTF8Str (pctxt, pvalue->sub_item, 0, 0);
      if (stat != 0) return LOG_RTERR (pctxt, stat);

      OSRTSAFEPUTCHAR (pctxt, '\"');
   }

   if (pvalue->m.accumulatePresent) {
      OSRTSAFEMEMCPY (pctxt, OSUTF8(" ns11:accumulate=\""), 18);

      if(pvalue->accumulate < 0 || pvalue->accumulate > 1)
         return LOG_RTERR (pctxt, RTERR_INVENUM);

      stat = XmlEnc_Ns11_Accumulate (pctxt, pvalue->accumulate, 0, 0);
      if (stat != 0) return LOG_RTERR (pctxt, stat);

      OSRTSAFEPUTCHAR (pctxt, '"');
   }

   if (pvalue->m.additivePresent) {
      OSRTSAFEMEMCPY (pctxt, OSUTF8(" ns11:additive=\""), 16);

      if(pvalue->additive < 0 || pvalue->additive > 1)
         return LOG_RTERR (pctxt, RTERR_INVENUM);

      stat = XmlEnc_Ns11_Additive (pctxt, pvalue->additive, 0, 0);
      if (stat != 0) return LOG_RTERR (pctxt, stat);

      OSRTSAFEPUTCHAR (pctxt, '"');
   }

   OSRTSAFEMEMCPY (pctxt, OSUTF8(" ns11:attributeName=\""), 21);

   stat = XmlEnc_Ns11_AttributeName (pctxt, pvalue->attributeName, 0, 0);
   if (stat != 0) return LOG_RTERR (pctxt, stat);

   OSRTSAFEPUTCHAR (pctxt, '"');

   if (pvalue->m.fillPresent) {
      OSRTSAFEMEMCPY (pctxt, OSUTF8(" ns11:fill=\""), 12);

      if(pvalue->fill < 0 || pvalue->fill > 5)
         return LOG_RTERR (pctxt, RTERR_INVENUM);

      stat = XmlEnc_Ns11_Fill (pctxt, pvalue->fill, 0, 0);
      if (stat != 0) return LOG_RTERR (pctxt, stat);

      OSRTSAFEPUTCHAR (pctxt, '"');
   }

   if (pvalue->m.targetElementPresent) {
      OSRTSAFEMEMCPY (pctxt, OSUTF8(" ns11:targetElement=\""), 21);

      stat = XmlEnc_Ns11_TargetElement (pctxt, pvalue->targetElement, 0, 0);
      if (stat != 0) return LOG_RTERR (pctxt, stat);

      OSRTSAFEPUTCHAR (pctxt, '"');
   }

   if (pvalue->m.toPresent) {
      OSRTSAFEMEMCPY (pctxt, OSUTF8(" ns11:to=\""), 10);

      stat = XmlEnc_Ns11_To (pctxt, pvalue->to, 0, 0);
      if (stat != 0) return LOG_RTERR (pctxt, stat);

      OSRTSAFEPUTCHAR (pctxt, '"');
   }

   OSRTSAFEPUTCHAR (pctxt, '>');
   pctxt->flags &= ~OSTERMSTART;
   pctxt->state = OSXMLSTART;

   stat = rtXmlEncEndElement (pctxt, elemName, nsPrefix);
   if (stat != 0) return LOG_RTERR (pctxt, stat);

   return (stat);
}

/**************************************************************/
/*                                                            */
/*  AnimateMotion                                             */
/*                                                            */
/**************************************************************/

EXTERN int asn1E_AnimateMotion (OSCTXT* pctxt,
   AnimateMotion *pvalue, ASN1TagType tagging)
{
   int ll;
   int ll0 = 0;
   int ll1 = 0;

   /* encode path */

   if (pvalue->m.pathPresent) {
      ll = xe_tag_len (pctxt, TM_CTXT|TM_PRIM|15,
         asn1E_Ns12_Path (pctxt, (Ns12_Path)pvalue->path, ASN1IMPL));
      if (ll < 0) return LOG_RTERR (pctxt, ll);
      ll1 += ll;
   }
   /* encode origin */

   if (pvalue->m.originPresent) {
      ll = xe_tag_len (pctxt, TM_CTXT|TM_PRIM|14,
         asn1E_Origin (pctxt, (Origin)pvalue->origin, ASN1IMPL));
      if (ll < 0) return LOG_RTERR (pctxt, ll);
      ll1 += ll;
   }
   /* encode values */

   if (pvalue->m.valuesPresent) {
      ll = xe_tag_len (pctxt, TM_CTXT|TM_PRIM|13,
         asn1E_Ns11_Values (pctxt, pvalue->values, ASN1IMPL));
      if (ll < 0) return LOG_RTERR (pctxt, ll);
      ll1 += ll;
   }
   /* encode to */

   if (pvalue->m.toPresent) {
      ll = xe_tag_len (pctxt, TM_CTXT|TM_PRIM|12,
         asn1E_Ns11_To (pctxt, pvalue->to, ASN1IMPL));
      if (ll < 0) return LOG_RTERR (pctxt, ll);
      ll1 += ll;
   }
   /* encode targetElement */

   if (pvalue->m.targetElementPresent) {
      ll = xe_tag_len (pctxt, TM_CTXT|TM_PRIM|11,
         asn1E_Ns11_TargetElement (pctxt, pvalue->targetElement, ASN1IMPL));
      if (ll < 0) return LOG_RTERR (pctxt, ll);
      ll1 += ll;
   }
   /* encode keyTimes */

   if (pvalue->m.keyTimesPresent) {
      ll = xe_tag_len (pctxt, TM_CTXT|TM_PRIM|10,
         asn1E_Ns11_KeyTimes (pctxt, pvalue->keyTimes, ASN1IMPL));
      if (ll < 0) return LOG_RTERR (pctxt, ll);
      ll1 += ll;
   }
   /* encode keySplines */

   if (pvalue->m.keySplinesPresent) {
      ll = xe_tag_len (pctxt, TM_CTXT|TM_PRIM|9,
         asn1E_Ns11_KeySplines (pctxt, pvalue->keySplines, ASN1IMPL));
      if (ll < 0) return LOG_RTERR (pctxt, ll);
      ll1 += ll;
   }
   /* encode from */

   if (pvalue->m.fromPresent) {
      ll = xe_tag_len (pctxt, TM_CTXT|TM_PRIM|8,
         asn1E_Ns11_From (pctxt, pvalue->from, ASN1IMPL));
      if (ll < 0) return LOG_RTERR (pctxt, ll);
      ll1 += ll;
   }
   /* encode fill */

   if (pvalue->m.fillPresent) {
      if(pvalue->fill < 0 || pvalue->fill > 5)
         return LOG_RTERR (pctxt, RTERR_INVENUM);

      ll = xe_tag_len (pctxt, TM_CTXT|TM_PRIM|7,
         asn1E_Ns11_Fill (pctxt, &pvalue->fill, ASN1IMPL));
      if (ll < 0) return LOG_RTERR (pctxt, ll);
      ll1 += ll;
   }
   /* encode calcMode */

   if (pvalue->m.calcModePresent) {
      if(pvalue->calcMode < 0 || pvalue->calcMode > 3)
         return LOG_RTERR (pctxt, RTERR_INVENUM);

      ll = xe_tag_len (pctxt, TM_CTXT|TM_PRIM|6,
         asn1E_Ns11_CalcMode (pctxt, &pvalue->calcMode, ASN1IMPL));
      if (ll < 0) return LOG_RTERR (pctxt, ll);
      ll1 += ll;
   }
   /* encode by */

   if (pvalue->m.byPresent) {
      ll = xe_tag_len (pctxt, TM_CTXT|TM_PRIM|5,
         asn1E_Ns11_By (pctxt, pvalue->by, ASN1IMPL));
      if (ll < 0) return LOG_RTERR (pctxt, ll);
      ll1 += ll;
   }
   /* encode attributeName */

   ll = xe_tag_len (pctxt, TM_CTXT|TM_PRIM|4,
      asn1E_Ns11_AttributeName (pctxt, pvalue->attributeName, ASN1IMPL));
   if (ll < 0) return LOG_RTERR (pctxt, ll);
   ll1 += ll;

   /* encode additive */

   if (pvalue->m.additivePresent) {
      if(pvalue->additive < 0 || pvalue->additive > 1)
         return LOG_RTERR (pctxt, RTERR_INVENUM);

      ll = xe_tag_len (pctxt, TM_CTXT|TM_PRIM|3,
         asn1E_Ns11_Additive (pctxt, &pvalue->additive, ASN1IMPL));
      if (ll < 0) return LOG_RTERR (pctxt, ll);
      ll1 += ll;
   }
   /* encode accumulate */

   if (pvalue->m.accumulatePresent) {
      if(pvalue->accumulate < 0 || pvalue->accumulate > 1)
         return LOG_RTERR (pctxt, RTERR_INVENUM);

      ll = xe_tag_len (pctxt, TM_CTXT|TM_PRIM|2,
         asn1E_Ns11_Accumulate (pctxt, &pvalue->accumulate, ASN1IMPL));
      if (ll < 0) return LOG_RTERR (pctxt, ll);
      ll1 += ll;
   }
   /* encode sub_item */

   if (pvalue->m.sub_itemPresent) {
      ll = xe_tag_len (pctxt, TM_CTXT|TM_PRIM|1,
         xe_utf8str (pctxt, pvalue->sub_item, ASN1IMPL));
      if (ll < 0) return LOG_RTERR (pctxt, ll);
      ll1 += ll;
   }
   /* encode formula */

   if (pvalue->m.formulaPresent) {
      ll = xe_tag_len (pctxt, TM_CTXT|TM_PRIM|0,
         xe_utf8str (pctxt, pvalue->formula, ASN1IMPL));
      if (ll < 0) return LOG_RTERR (pctxt, ll);
      ll1 += ll;
   }
   ll0 += ll1;

   if (tagging == ASN1EXPL)
      ll0 = xe_tag_len (pctxt, TM_UNIV|TM_CONS|16, ll0);

   return (ll0);
}

int XmlEnc_AnimateMotion (OSCTXT* pctxt, AnimateMotion* pvalue, 
   const OSUTF8CHAR* elemName, const OSUTF8CHAR* nsPrefix)
{
   int stat = 0;

   if (0 != elemName) {
      stat = rtXmlEncStartElement (pctxt, elemName, nsPrefix, FALSE);
      if (stat != 0) return LOG_RTERR (pctxt, stat);
   }

   /* add attributes */

   if (pvalue->m.formulaPresent) {
      OSRTSAFEMEMCPY (pctxt, OSUTF8(" ns9:formula=\""), 14);

      stat = rtXmlEncUTF8Str (pctxt, pvalue->formula, 0, 0);
      if (stat != 0) return LOG_RTERR (pctxt, stat);

      OSRTSAFEPUTCHAR (pctxt, '\"');
   }

   if (pvalue->m.sub_itemPresent) {
      OSRTSAFEMEMCPY (pctxt, OSUTF8(" ns9:sub-item=\""), 15);

      stat = rtXmlEncUTF8Str (pctxt, pvalue->sub_item, 0, 0);
      if (stat != 0) return LOG_RTERR (pctxt, stat);

      OSRTSAFEPUTCHAR (pctxt, '\"');
   }

   if (pvalue->m.accumulatePresent) {
      OSRTSAFEMEMCPY (pctxt, OSUTF8(" ns11:accumulate=\""), 18);

      if(pvalue->accumulate < 0 || pvalue->accumulate > 1)
         return LOG_RTERR (pctxt, RTERR_INVENUM);

      stat = XmlEnc_Ns11_Accumulate (pctxt, pvalue->accumulate, 0, 0);
      if (stat != 0) return LOG_RTERR (pctxt, stat);

      OSRTSAFEPUTCHAR (pctxt, '"');
   }

   if (pvalue->m.additivePresent) {
      OSRTSAFEMEMCPY (pctxt, OSUTF8(" ns11:additive=\""), 16);

      if(pvalue->additive < 0 || pvalue->additive > 1)
         return LOG_RTERR (pctxt, RTERR_INVENUM);

      stat = XmlEnc_Ns11_Additive (pctxt, pvalue->additive, 0, 0);
      if (stat != 0) return LOG_RTERR (pctxt, stat);

      OSRTSAFEPUTCHAR (pctxt, '"');
   }

   OSRTSAFEMEMCPY (pctxt, OSUTF8(" ns11:attributeName=\""), 21);

   stat = XmlEnc_Ns11_AttributeName (pctxt, pvalue->attributeName, 0, 0);
   if (stat != 0) return LOG_RTERR (pctxt, stat);

   OSRTSAFEPUTCHAR (pctxt, '"');

   if (pvalue->m.byPresent) {
      OSRTSAFEMEMCPY (pctxt, OSUTF8(" ns11:by=\""), 10);

      stat = XmlEnc_Ns11_By (pctxt, pvalue->by, 0, 0);
      if (stat != 0) return LOG_RTERR (pctxt, stat);

      OSRTSAFEPUTCHAR (pctxt, '"');
   }

   if (pvalue->m.calcModePresent) {
      OSRTSAFEMEMCPY (pctxt, OSUTF8(" ns11:calcMode=\""), 16);

      if(pvalue->calcMode < 0 || pvalue->calcMode > 3)
         return LOG_RTERR (pctxt, RTERR_INVENUM);

      stat = XmlEnc_Ns11_CalcMode (pctxt, pvalue->calcMode, 0, 0);
      if (stat != 0) return LOG_RTERR (pctxt, stat);

      OSRTSAFEPUTCHAR (pctxt, '"');
   }

   if (pvalue->m.fillPresent) {
      OSRTSAFEMEMCPY (pctxt, OSUTF8(" ns11:fill=\""), 12);

      if(pvalue->fill < 0 || pvalue->fill > 5)
         return LOG_RTERR (pctxt, RTERR_INVENUM);

      stat = XmlEnc_Ns11_Fill (pctxt, pvalue->fill, 0, 0);
      if (stat != 0) return LOG_RTERR (pctxt, stat);

      OSRTSAFEPUTCHAR (pctxt, '"');
   }

   if (pvalue->m.fromPresent) {
      OSRTSAFEMEMCPY (pctxt, OSUTF8(" ns11:from=\""), 12);

      stat = XmlEnc_Ns11_From (pctxt, pvalue->from, 0, 0);
      if (stat != 0) return LOG_RTERR (pctxt, stat);

      OSRTSAFEPUTCHAR (pctxt, '"');
   }

   if (pvalue->m.keySplinesPresent) {
      OSRTSAFEMEMCPY (pctxt, OSUTF8(" ns11:keySplines=\""), 18);

      stat = XmlEnc_Ns11_KeySplines (pctxt, pvalue->keySplines, 0, 0);
      if (stat != 0) return LOG_RTERR (pctxt, stat);

      OSRTSAFEPUTCHAR (pctxt, '"');
   }

   if (pvalue->m.keyTimesPresent) {
      OSRTSAFEMEMCPY (pctxt, OSUTF8(" ns11:keyTimes=\""), 16);

      stat = XmlEnc_Ns11_KeyTimes (pctxt, pvalue->keyTimes, 0, 0);
      if (stat != 0) return LOG_RTERR (pctxt, stat);

      OSRTSAFEPUTCHAR (pctxt, '"');
   }

   if (pvalue->m.targetElementPresent) {
      OSRTSAFEMEMCPY (pctxt, OSUTF8(" ns11:targetElement=\""), 21);

      stat = XmlEnc_Ns11_TargetElement (pctxt, pvalue->targetElement, 0, 0);
      if (stat != 0) return LOG_RTERR (pctxt, stat);

      OSRTSAFEPUTCHAR (pctxt, '"');
   }

   if (pvalue->m.toPresent) {
      OSRTSAFEMEMCPY (pctxt, OSUTF8(" ns11:to=\""), 10);

      stat = XmlEnc_Ns11_To (pctxt, pvalue->to, 0, 0);
      if (stat != 0) return LOG_RTERR (pctxt, stat);

      OSRTSAFEPUTCHAR (pctxt, '"');
   }

   if (pvalue->m.valuesPresent) {
      OSRTSAFEMEMCPY (pctxt, OSUTF8(" ns11:values=\""), 14);

      stat = XmlEnc_Ns11_Values (pctxt, pvalue->values, 0, 0);
      if (stat != 0) return LOG_RTERR (pctxt, stat);

      OSRTSAFEPUTCHAR (pctxt, '"');
   }

   if (pvalue->m.originPresent) {
      OSRTSAFEMEMCPY (pctxt, OSUTF8(" ns12:origin=\""), 14);

      stat = XmlEnc_Origin (pctxt, pvalue->origin, 0, 0);
      if (stat != 0) return LOG_RTERR (pctxt, stat);

      OSRTSAFEPUTCHAR (pctxt, '"');
   }

   if (pvalue->m.pathPresent) {
      OSRTSAFEMEMCPY (pctxt, OSUTF8(" ns12:path=\""), 12);

      stat = XmlEnc_Ns12_Path (pctxt, pvalue->path, 0, 0);
      if (stat != 0) return LOG_RTERR (pctxt, stat);

      OSRTSAFEPUTCHAR (pctxt, '"');
   }

   OSRTSAFEPUTCHAR (pctxt, '>');
   pctxt->flags &= ~OSTERMSTART;
   pctxt->state = OSXMLSTART;

   stat = rtXmlEncEndElement (pctxt, elemName, nsPrefix);
   if (stat != 0) return LOG_RTERR (pctxt, stat);

   return (stat);
}

/**************************************************************/
/*                                                            */
/*  AnimateColor_color_interpolation                          */
/*                                                            */
/**************************************************************/

EXTERN int asn1E_AnimateColor_color_interpolation (OSCTXT* pctxt,
   AnimateColor_color_interpolation *pvalue, ASN1TagType tagging)
{
   int ll;
   int ll0 = 0;

   if(*pvalue < 0 || *pvalue > 1)
      return LOG_RTERR (pctxt, RTERR_INVENUM);

   ll = xe_enum (pctxt, (OSINT32*)pvalue, tagging);
   if (ll < 0) return LOG_RTERR (pctxt, ll);
   ll0 += ll;

   return (ll0);
}

int XmlEnc_AnimateColor_color_interpolation (OSCTXT* pctxt, 
   AnimateColor_color_interpolation value, const OSUTF8CHAR* elemName, 
   const OSUTF8CHAR* nsPrefix)
{
   int stat = 0;

   stat = rtXmlEncUTF8Str (pctxt,
      AnimateColor_color_interpolation_ToString (value), elemName, nsPrefix);
   if (stat != 0) return LOG_RTERR (pctxt, stat);

   return (stat);
}

/**************************************************************/
/*                                                            */
/*  AnimateColor_color_interpolation_direction                */
/*                                                            */
/**************************************************************/

EXTERN int asn1E_AnimateColor_color_interpolation_direction (OSCTXT* pctxt,
   AnimateColor_color_interpolation_direction *pvalue, ASN1TagType tagging)
{
   int ll;
   int ll0 = 0;

   if(*pvalue < 0 || *pvalue > 1)
      return LOG_RTERR (pctxt, RTERR_INVENUM);

   ll = xe_enum (pctxt, (OSINT32*)pvalue, tagging);
   if (ll < 0) return LOG_RTERR (pctxt, ll);
   ll0 += ll;

   return (ll0);
}

int XmlEnc_AnimateColor_color_interpolation_direction (OSCTXT* pctxt, 
   AnimateColor_color_interpolation_direction value, 
   const OSUTF8CHAR* elemName, const OSUTF8CHAR* nsPrefix)
{
   int stat = 0;

   stat = rtXmlEncUTF8Str (pctxt,
      AnimateColor_color_interpolation_direction_ToString (value)
         , elemName, nsPrefix);
   if (stat != 0) return LOG_RTERR (pctxt, stat);

   return (stat);
}

/**************************************************************/
/*                                                            */
/*  AnimateColor                                              */
/*                                                            */
/**************************************************************/

EXTERN int asn1E_AnimateColor (OSCTXT* pctxt,
   AnimateColor *pvalue, ASN1TagType tagging)
{
   int ll;
   int ll0 = 0;
   int ll1 = 0;

   /* encode values */

   if (pvalue->m.valuesPresent) {
      ll = xe_tag_len (pctxt, TM_CTXT|TM_PRIM|15,
         asn1E_Ns11_Values (pctxt, pvalue->values, ASN1IMPL));
      if (ll < 0) return LOG_RTERR (pctxt, ll);
      ll1 += ll;
   }
   /* encode to */

   if (pvalue->m.toPresent) {
      ll = xe_tag_len (pctxt, TM_CTXT|TM_PRIM|14,
         asn1E_Ns11_To (pctxt, pvalue->to, ASN1IMPL));
      if (ll < 0) return LOG_RTERR (pctxt, ll);
      ll1 += ll;
   }
   /* encode targetElement */

   if (pvalue->m.targetElementPresent) {
      ll = xe_tag_len (pctxt, TM_CTXT|TM_PRIM|13,
         asn1E_Ns11_TargetElement (pctxt, pvalue->targetElement, ASN1IMPL));
      if (ll < 0) return LOG_RTERR (pctxt, ll);
      ll1 += ll;
   }
   /* encode keyTimes */

   if (pvalue->m.keyTimesPresent) {
      ll = xe_tag_len (pctxt, TM_CTXT|TM_PRIM|12,
         asn1E_Ns11_KeyTimes (pctxt, pvalue->keyTimes, ASN1IMPL));
      if (ll < 0) return LOG_RTERR (pctxt, ll);
      ll1 += ll;
   }
   /* encode keySplines */

   if (pvalue->m.keySplinesPresent) {
      ll = xe_tag_len (pctxt, TM_CTXT|TM_PRIM|11,
         asn1E_Ns11_KeySplines (pctxt, pvalue->keySplines, ASN1IMPL));
      if (ll < 0) return LOG_RTERR (pctxt, ll);
      ll1 += ll;
   }
   /* encode from */

   if (pvalue->m.fromPresent) {
      ll = xe_tag_len (pctxt, TM_CTXT|TM_PRIM|10,
         asn1E_Ns11_From (pctxt, pvalue->from, ASN1IMPL));
      if (ll < 0) return LOG_RTERR (pctxt, ll);
      ll1 += ll;
   }
   /* encode fill */

   if (pvalue->m.fillPresent) {
      if(pvalue->fill < 0 || pvalue->fill > 5)
         return LOG_RTERR (pctxt, RTERR_INVENUM);

      ll = xe_tag_len (pctxt, TM_CTXT|TM_PRIM|9,
         asn1E_Ns11_Fill (pctxt, &pvalue->fill, ASN1IMPL));
      if (ll < 0) return LOG_RTERR (pctxt, ll);
      ll1 += ll;
   }
   /* encode calcMode */

   if (pvalue->m.calcModePresent) {
      if(pvalue->calcMode < 0 || pvalue->calcMode > 3)
         return LOG_RTERR (pctxt, RTERR_INVENUM);

      ll = xe_tag_len (pctxt, TM_CTXT|TM_PRIM|8,
         asn1E_Ns11_CalcMode (pctxt, &pvalue->calcMode, ASN1IMPL));
      if (ll < 0) return LOG_RTERR (pctxt, ll);
      ll1 += ll;
   }
   /* encode by */

   if (pvalue->m.byPresent) {
      ll = xe_tag_len (pctxt, TM_CTXT|TM_PRIM|7,
         asn1E_Ns11_By (pctxt, pvalue->by, ASN1IMPL));
      if (ll < 0) return LOG_RTERR (pctxt, ll);
      ll1 += ll;
   }
   /* encode attributeName */

   ll = xe_tag_len (pctxt, TM_CTXT|TM_PRIM|6,
      asn1E_Ns11_AttributeName (pctxt, pvalue->attributeName, ASN1IMPL));
   if (ll < 0) return LOG_RTERR (pctxt, ll);
   ll1 += ll;

   /* encode additive */

   if (pvalue->m.additivePresent) {
      if(pvalue->additive < 0 || pvalue->additive > 1)
         return LOG_RTERR (pctxt, RTERR_INVENUM);

      ll = xe_tag_len (pctxt, TM_CTXT|TM_PRIM|5,
         asn1E_Ns11_Additive (pctxt, &pvalue->additive, ASN1IMPL));
      if (ll < 0) return LOG_RTERR (pctxt, ll);
      ll1 += ll;
   }
   /* encode accumulate */

   if (pvalue->m.accumulatePresent) {
      if(pvalue->accumulate < 0 || pvalue->accumulate > 1)
         return LOG_RTERR (pctxt, RTERR_INVENUM);

      ll = xe_tag_len (pctxt, TM_CTXT|TM_PRIM|4,
         asn1E_Ns11_Accumulate (pctxt, &pvalue->accumulate, ASN1IMPL));
      if (ll < 0) return LOG_RTERR (pctxt, ll);
      ll1 += ll;
   }
   /* encode sub_item */

   if (pvalue->m.sub_itemPresent) {
      ll = xe_tag_len (pctxt, TM_CTXT|TM_PRIM|3,
         xe_utf8str (pctxt, pvalue->sub_item, ASN1IMPL));
      if (ll < 0) return LOG_RTERR (pctxt, ll);
      ll1 += ll;
   }
   /* encode formula */

   if (pvalue->m.formulaPresent) {
      ll = xe_tag_len (pctxt, TM_CTXT|TM_PRIM|2,
         xe_utf8str (pctxt, pvalue->formula, ASN1IMPL));
      if (ll < 0) return LOG_RTERR (pctxt, ll);
      ll1 += ll;
   }
   /* encode color_interpolation_direction */

   if (pvalue->m.color_interpolation_directionPresent) {
      if(pvalue->color_interpolation_direction < 0 || pvalue->color_interpolation_direction > 1)
         return LOG_RTERR (pctxt, RTERR_INVENUM);

      ll = xe_tag_len (pctxt, TM_CTXT|TM_PRIM|1,
         asn1E_AnimateColor_color_interpolation_direction (pctxt, &pvalue->color_interpolation_direction, ASN1IMPL));
      if (ll < 0) return LOG_RTERR (pctxt, ll);
      ll1 += ll;
   }
   /* encode color_interpolation */

   if (pvalue->m.color_interpolationPresent) {
      if(pvalue->color_interpolation < 0 || pvalue->color_interpolation > 1)
         return LOG_RTERR (pctxt, RTERR_INVENUM);

      ll = xe_tag_len (pctxt, TM_CTXT|TM_PRIM|0,
         asn1E_AnimateColor_color_interpolation (pctxt, &pvalue->color_interpolation, ASN1IMPL));
      if (ll < 0) return LOG_RTERR (pctxt, ll);
      ll1 += ll;
   }
   ll0 += ll1;

   if (tagging == ASN1EXPL)
      ll0 = xe_tag_len (pctxt, TM_UNIV|TM_CONS|16, ll0);

   return (ll0);
}

int XmlEnc_AnimateColor (OSCTXT* pctxt, AnimateColor* pvalue, 
   const OSUTF8CHAR* elemName, const OSUTF8CHAR* nsPrefix)
{
   int stat = 0;

   if (0 != elemName) {
      stat = rtXmlEncStartElement (pctxt, elemName, nsPrefix, FALSE);
      if (stat != 0) return LOG_RTERR (pctxt, stat);
   }

   /* add attributes */

   if (pvalue->m.color_interpolationPresent) {
      OSRTSAFEMEMCPY (pctxt, OSUTF8(" ns9:color-interpolation=\""), 26);

      if(pvalue->color_interpolation < 0 || pvalue->color_interpolation > 1)
         return LOG_RTERR (pctxt, RTERR_INVENUM);

      stat = XmlEnc_AnimateColor_color_interpolation (pctxt, pvalue->
         color_interpolation, 0, 0);
      if (stat != 0) return LOG_RTERR (pctxt, stat);

      OSRTSAFEPUTCHAR (pctxt, '"');
   }

   if (pvalue->m.color_interpolation_directionPresent) {
      OSRTSAFEMEMCPY (pctxt, OSUTF8(" ns9:color-interpolation-direction=\""), 36);

      if(pvalue->color_interpolation_direction < 0 || pvalue->
         color_interpolation_direction > 1)
         return LOG_RTERR (pctxt, RTERR_INVENUM);

      stat = XmlEnc_AnimateColor_color_interpolation_direction (pctxt, pvalue->
         color_interpolation_direction, 0, 0);
      if (stat != 0) return LOG_RTERR (pctxt, stat);

      OSRTSAFEPUTCHAR (pctxt, '"');
   }

   if (pvalue->m.formulaPresent) {
      OSRTSAFEMEMCPY (pctxt, OSUTF8(" ns9:formula=\""), 14);

      stat = rtXmlEncUTF8Str (pctxt, pvalue->formula, 0, 0);
      if (stat != 0) return LOG_RTERR (pctxt, stat);

      OSRTSAFEPUTCHAR (pctxt, '\"');
   }

   if (pvalue->m.sub_itemPresent) {
      OSRTSAFEMEMCPY (pctxt, OSUTF8(" ns9:sub-item=\""), 15);

      stat = rtXmlEncUTF8Str (pctxt, pvalue->sub_item, 0, 0);
      if (stat != 0) return LOG_RTERR (pctxt, stat);

      OSRTSAFEPUTCHAR (pctxt, '\"');
   }

   if (pvalue->m.accumulatePresent) {
      OSRTSAFEMEMCPY (pctxt, OSUTF8(" ns11:accumulate=\""), 18);

      if(pvalue->accumulate < 0 || pvalue->accumulate > 1)
         return LOG_RTERR (pctxt, RTERR_INVENUM);

      stat = XmlEnc_Ns11_Accumulate (pctxt, pvalue->accumulate, 0, 0);
      if (stat != 0) return LOG_RTERR (pctxt, stat);

      OSRTSAFEPUTCHAR (pctxt, '"');
   }

   if (pvalue->m.additivePresent) {
      OSRTSAFEMEMCPY (pctxt, OSUTF8(" ns11:additive=\""), 16);

      if(pvalue->additive < 0 || pvalue->additive > 1)
         return LOG_RTERR (pctxt, RTERR_INVENUM);

      stat = XmlEnc_Ns11_Additive (pctxt, pvalue->additive, 0, 0);
      if (stat != 0) return LOG_RTERR (pctxt, stat);

      OSRTSAFEPUTCHAR (pctxt, '"');
   }

   OSRTSAFEMEMCPY (pctxt, OSUTF8(" ns11:attributeName=\""), 21);

   stat = XmlEnc_Ns11_AttributeName (pctxt, pvalue->attributeName, 0, 0);
   if (stat != 0) return LOG_RTERR (pctxt, stat);

   OSRTSAFEPUTCHAR (pctxt, '"');

   if (pvalue->m.byPresent) {
      OSRTSAFEMEMCPY (pctxt, OSUTF8(" ns11:by=\""), 10);

      stat = XmlEnc_Ns11_By (pctxt, pvalue->by, 0, 0);
      if (stat != 0) return LOG_RTERR (pctxt, stat);

      OSRTSAFEPUTCHAR (pctxt, '"');
   }

   if (pvalue->m.calcModePresent) {
      OSRTSAFEMEMCPY (pctxt, OSUTF8(" ns11:calcMode=\""), 16);

      if(pvalue->calcMode < 0 || pvalue->calcMode > 3)
         return LOG_RTERR (pctxt, RTERR_INVENUM);

      stat = XmlEnc_Ns11_CalcMode (pctxt, pvalue->calcMode, 0, 0);
      if (stat != 0) return LOG_RTERR (pctxt, stat);

      OSRTSAFEPUTCHAR (pctxt, '"');
   }

   if (pvalue->m.fillPresent) {
      OSRTSAFEMEMCPY (pctxt, OSUTF8(" ns11:fill=\""), 12);

      if(pvalue->fill < 0 || pvalue->fill > 5)
         return LOG_RTERR (pctxt, RTERR_INVENUM);

      stat = XmlEnc_Ns11_Fill (pctxt, pvalue->fill, 0, 0);
      if (stat != 0) return LOG_RTERR (pctxt, stat);

      OSRTSAFEPUTCHAR (pctxt, '"');
   }

   if (pvalue->m.fromPresent) {
      OSRTSAFEMEMCPY (pctxt, OSUTF8(" ns11:from=\""), 12);

      stat = XmlEnc_Ns11_From (pctxt, pvalue->from, 0, 0);
      if (stat != 0) return LOG_RTERR (pctxt, stat);

      OSRTSAFEPUTCHAR (pctxt, '"');
   }

   if (pvalue->m.keySplinesPresent) {
      OSRTSAFEMEMCPY (pctxt, OSUTF8(" ns11:keySplines=\""), 18);

      stat = XmlEnc_Ns11_KeySplines (pctxt, pvalue->keySplines, 0, 0);
      if (stat != 0) return LOG_RTERR (pctxt, stat);

      OSRTSAFEPUTCHAR (pctxt, '"');
   }

   if (pvalue->m.keyTimesPresent) {
      OSRTSAFEMEMCPY (pctxt, OSUTF8(" ns11:keyTimes=\""), 16);

      stat = XmlEnc_Ns11_KeyTimes (pctxt, pvalue->keyTimes, 0, 0);
      if (stat != 0) return LOG_RTERR (pctxt, stat);

      OSRTSAFEPUTCHAR (pctxt, '"');
   }

   if (pvalue->m.targetElementPresent) {
      OSRTSAFEMEMCPY (pctxt, OSUTF8(" ns11:targetElement=\""), 21);

      stat = XmlEnc_Ns11_TargetElement (pctxt, pvalue->targetElement, 0, 0);
      if (stat != 0) return LOG_RTERR (pctxt, stat);

      OSRTSAFEPUTCHAR (pctxt, '"');
   }

   if (pvalue->m.toPresent) {
      OSRTSAFEMEMCPY (pctxt, OSUTF8(" ns11:to=\""), 10);

      stat = XmlEnc_Ns11_To (pctxt, pvalue->to, 0, 0);
      if (stat != 0) return LOG_RTERR (pctxt, stat);

      OSRTSAFEPUTCHAR (pctxt, '"');
   }

   if (pvalue->m.valuesPresent) {
      OSRTSAFEMEMCPY (pctxt, OSUTF8(" ns11:values=\""), 14);

      stat = XmlEnc_Ns11_Values (pctxt, pvalue->values, 0, 0);
      if (stat != 0) return LOG_RTERR (pctxt, stat);

      OSRTSAFEPUTCHAR (pctxt, '"');
   }

   OSRTSAFEPUTCHAR (pctxt, '>');
   pctxt->flags &= ~OSTERMSTART;
   pctxt->state = OSXMLSTART;

   stat = rtXmlEncEndElement (pctxt, elemName, nsPrefix);
   if (stat != 0) return LOG_RTERR (pctxt, stat);

   return (stat);
}

/**************************************************************/
/*                                                            */
/*  AnimateTransform                                          */
/*                                                            */
/**************************************************************/

EXTERN int asn1E_AnimateTransform (OSCTXT* pctxt,
   AnimateTransform *pvalue, ASN1TagType tagging)
{
   int ll;
   int ll0 = 0;
   int ll1 = 0;

   /* encode type */

   if(pvalue->type < 0 || pvalue->type > 4)
      return LOG_RTERR (pctxt, RTERR_INVENUM);

   ll = xe_tag_len (pctxt, TM_CTXT|TM_PRIM|11,
      asn1E_Ns12_Type (pctxt, (Ns12_Type*)&pvalue->type, ASN1IMPL));
   if (ll < 0) return LOG_RTERR (pctxt, ll);
   ll1 += ll;

   /* encode values */

   if (pvalue->m.valuesPresent) {
      ll = xe_tag_len (pctxt, TM_CTXT|TM_PRIM|10,
         asn1E_Ns11_Values (pctxt, pvalue->values, ASN1IMPL));
      if (ll < 0) return LOG_RTERR (pctxt, ll);
      ll1 += ll;
   }
   /* encode to */

   if (pvalue->m.toPresent) {
      ll = xe_tag_len (pctxt, TM_CTXT|TM_PRIM|9,
         asn1E_Ns11_To (pctxt, pvalue->to, ASN1IMPL));
      if (ll < 0) return LOG_RTERR (pctxt, ll);
      ll1 += ll;
   }
   /* encode targetElement */

   if (pvalue->m.targetElementPresent) {
      ll = xe_tag_len (pctxt, TM_CTXT|TM_PRIM|8,
         asn1E_Ns11_TargetElement (pctxt, pvalue->targetElement, ASN1IMPL));
      if (ll < 0) return LOG_RTERR (pctxt, ll);
      ll1 += ll;
   }
   /* encode from */

   if (pvalue->m.fromPresent) {
      ll = xe_tag_len (pctxt, TM_CTXT|TM_PRIM|7,
         asn1E_Ns11_From (pctxt, pvalue->from, ASN1IMPL));
      if (ll < 0) return LOG_RTERR (pctxt, ll);
      ll1 += ll;
   }
   /* encode fill */

   if (pvalue->m.fillPresent) {
      if(pvalue->fill < 0 || pvalue->fill > 5)
         return LOG_RTERR (pctxt, RTERR_INVENUM);

      ll = xe_tag_len (pctxt, TM_CTXT|TM_PRIM|6,
         asn1E_Ns11_Fill (pctxt, &pvalue->fill, ASN1IMPL));
      if (ll < 0) return LOG_RTERR (pctxt, ll);
      ll1 += ll;
   }
   /* encode by */

   if (pvalue->m.byPresent) {
      ll = xe_tag_len (pctxt, TM_CTXT|TM_PRIM|5,
         asn1E_Ns11_By (pctxt, pvalue->by, ASN1IMPL));
      if (ll < 0) return LOG_RTERR (pctxt, ll);
      ll1 += ll;
   }
   /* encode attributeName */

   ll = xe_tag_len (pctxt, TM_CTXT|TM_PRIM|4,
      asn1E_Ns11_AttributeName (pctxt, pvalue->attributeName, ASN1IMPL));
   if (ll < 0) return LOG_RTERR (pctxt, ll);
   ll1 += ll;

   /* encode additive */

   if (pvalue->m.additivePresent) {
      if(pvalue->additive < 0 || pvalue->additive > 1)
         return LOG_RTERR (pctxt, RTERR_INVENUM);

      ll = xe_tag_len (pctxt, TM_CTXT|TM_PRIM|3,
         asn1E_Ns11_Additive (pctxt, &pvalue->additive, ASN1IMPL));
      if (ll < 0) return LOG_RTERR (pctxt, ll);
      ll1 += ll;
   }
   /* encode accumulate */

   if (pvalue->m.accumulatePresent) {
      if(pvalue->accumulate < 0 || pvalue->accumulate > 1)
         return LOG_RTERR (pctxt, RTERR_INVENUM);

      ll = xe_tag_len (pctxt, TM_CTXT|TM_PRIM|2,
         asn1E_Ns11_Accumulate (pctxt, &pvalue->accumulate, ASN1IMPL));
      if (ll < 0) return LOG_RTERR (pctxt, ll);
      ll1 += ll;
   }
   /* encode sub_item */

   if (pvalue->m.sub_itemPresent) {
      ll = xe_tag_len (pctxt, TM_CTXT|TM_PRIM|1,
         xe_utf8str (pctxt, pvalue->sub_item, ASN1IMPL));
      if (ll < 0) return LOG_RTERR (pctxt, ll);
      ll1 += ll;
   }
   /* encode formula */

   if (pvalue->m.formulaPresent) {
      ll = xe_tag_len (pctxt, TM_CTXT|TM_PRIM|0,
         xe_utf8str (pctxt, pvalue->formula, ASN1IMPL));
      if (ll < 0) return LOG_RTERR (pctxt, ll);
      ll1 += ll;
   }
   ll0 += ll1;

   if (tagging == ASN1EXPL)
      ll0 = xe_tag_len (pctxt, TM_UNIV|TM_CONS|16, ll0);

   return (ll0);
}

int XmlEnc_AnimateTransform (OSCTXT* pctxt, AnimateTransform* pvalue, 
   const OSUTF8CHAR* elemName, const OSUTF8CHAR* nsPrefix)
{
   int stat = 0;

   if (0 != elemName) {
      stat = rtXmlEncStartElement (pctxt, elemName, nsPrefix, FALSE);
      if (stat != 0) return LOG_RTERR (pctxt, stat);
   }

   /* add attributes */

   if (pvalue->m.formulaPresent) {
      OSRTSAFEMEMCPY (pctxt, OSUTF8(" ns9:formula=\""), 14);

      stat = rtXmlEncUTF8Str (pctxt, pvalue->formula, 0, 0);
      if (stat != 0) return LOG_RTERR (pctxt, stat);

      OSRTSAFEPUTCHAR (pctxt, '\"');
   }

   if (pvalue->m.sub_itemPresent) {
      OSRTSAFEMEMCPY (pctxt, OSUTF8(" ns9:sub-item=\""), 15);

      stat = rtXmlEncUTF8Str (pctxt, pvalue->sub_item, 0, 0);
      if (stat != 0) return LOG_RTERR (pctxt, stat);

      OSRTSAFEPUTCHAR (pctxt, '\"');
   }

   if (pvalue->m.accumulatePresent) {
      OSRTSAFEMEMCPY (pctxt, OSUTF8(" ns11:accumulate=\""), 18);

      if(pvalue->accumulate < 0 || pvalue->accumulate > 1)
         return LOG_RTERR (pctxt, RTERR_INVENUM);

      stat = XmlEnc_Ns11_Accumulate (pctxt, pvalue->accumulate, 0, 0);
      if (stat != 0) return LOG_RTERR (pctxt, stat);

      OSRTSAFEPUTCHAR (pctxt, '"');
   }

   if (pvalue->m.additivePresent) {
      OSRTSAFEMEMCPY (pctxt, OSUTF8(" ns11:additive=\""), 16);

      if(pvalue->additive < 0 || pvalue->additive > 1)
         return LOG_RTERR (pctxt, RTERR_INVENUM);

      stat = XmlEnc_Ns11_Additive (pctxt, pvalue->additive, 0, 0);
      if (stat != 0) return LOG_RTERR (pctxt, stat);

      OSRTSAFEPUTCHAR (pctxt, '"');
   }

   OSRTSAFEMEMCPY (pctxt, OSUTF8(" ns11:attributeName=\""), 21);

   stat = XmlEnc_Ns11_AttributeName (pctxt, pvalue->attributeName, 0, 0);
   if (stat != 0) return LOG_RTERR (pctxt, stat);

   OSRTSAFEPUTCHAR (pctxt, '"');

   if (pvalue->m.byPresent) {
      OSRTSAFEMEMCPY (pctxt, OSUTF8(" ns11:by=\""), 10);

      stat = XmlEnc_Ns11_By (pctxt, pvalue->by, 0, 0);
      if (stat != 0) return LOG_RTERR (pctxt, stat);

      OSRTSAFEPUTCHAR (pctxt, '"');
   }

   if (pvalue->m.fillPresent) {
      OSRTSAFEMEMCPY (pctxt, OSUTF8(" ns11:fill=\""), 12);

      if(pvalue->fill < 0 || pvalue->fill > 5)
         return LOG_RTERR (pctxt, RTERR_INVENUM);

      stat = XmlEnc_Ns11_Fill (pctxt, pvalue->fill, 0, 0);
      if (stat != 0) return LOG_RTERR (pctxt, stat);

      OSRTSAFEPUTCHAR (pctxt, '"');
   }

   if (pvalue->m.fromPresent) {
      OSRTSAFEMEMCPY (pctxt, OSUTF8(" ns11:from=\""), 12);

      stat = XmlEnc_Ns11_From (pctxt, pvalue->from, 0, 0);
      if (stat != 0) return LOG_RTERR (pctxt, stat);

      OSRTSAFEPUTCHAR (pctxt, '"');
   }

   if (pvalue->m.targetElementPresent) {
      OSRTSAFEMEMCPY (pctxt, OSUTF8(" ns11:targetElement=\""), 21);

      stat = XmlEnc_Ns11_TargetElement (pctxt, pvalue->targetElement, 0, 0);
      if (stat != 0) return LOG_RTERR (pctxt, stat);

      OSRTSAFEPUTCHAR (pctxt, '"');
   }

   if (pvalue->m.toPresent) {
      OSRTSAFEMEMCPY (pctxt, OSUTF8(" ns11:to=\""), 10);

      stat = XmlEnc_Ns11_To (pctxt, pvalue->to, 0, 0);
      if (stat != 0) return LOG_RTERR (pctxt, stat);

      OSRTSAFEPUTCHAR (pctxt, '"');
   }

   if (pvalue->m.valuesPresent) {
      OSRTSAFEMEMCPY (pctxt, OSUTF8(" ns11:values=\""), 14);

      stat = XmlEnc_Ns11_Values (pctxt, pvalue->values, 0, 0);
      if (stat != 0) return LOG_RTERR (pctxt, stat);

      OSRTSAFEPUTCHAR (pctxt, '"');
   }

   OSRTSAFEMEMCPY (pctxt, OSUTF8(" ns12:type=\""), 12);

   if(pvalue->type < 0 || pvalue->type > 4)
      return LOG_RTERR (pctxt, RTERR_INVENUM);

   stat = XmlEnc_Ns12_Type (pctxt, pvalue->type, 0, 0);
   if (stat != 0) return LOG_RTERR (pctxt, stat);

   OSRTSAFEPUTCHAR (pctxt, '"');

   OSRTSAFEPUTCHAR (pctxt, '>');
   pctxt->flags &= ~OSTERMSTART;
   pctxt->state = OSXMLSTART;

   stat = rtXmlEncEndElement (pctxt, elemName, nsPrefix);
   if (stat != 0) return LOG_RTERR (pctxt, stat);

   return (stat);
}

/**************************************************************/
/*                                                            */
/*  TransitionFilter                                          */
/*                                                            */
/**************************************************************/

EXTERN int asn1E_TransitionFilter (OSCTXT* pctxt,
   TransitionFilter *pvalue, ASN1TagType tagging)
{
   int ll;
   int ll0 = 0;
   int ll1 = 0;

   /* encode values */

   if (pvalue->m.valuesPresent) {
      ll = xe_tag_len (pctxt, TM_CTXT|TM_PRIM|15,
         asn1E_Ns11_Values (pctxt, pvalue->values, ASN1IMPL));
      if (ll < 0) return LOG_RTERR (pctxt, ll);
      ll1 += ll;
   }
   /* encode type */

   ll = xe_tag_len (pctxt, TM_CTXT|TM_PRIM|14,
      asn1E_Ns11_Type (pctxt, pvalue->type, ASN1IMPL));
   if (ll < 0) return LOG_RTERR (pctxt, ll);
   ll1 += ll;

   /* encode to */

   if (pvalue->m.toPresent) {
      ll = xe_tag_len (pctxt, TM_CTXT|TM_PRIM|13,
         asn1E_Ns11_To (pctxt, pvalue->to, ASN1IMPL));
      if (ll < 0) return LOG_RTERR (pctxt, ll);
      ll1 += ll;
   }
   /* encode targetElement */

   if (pvalue->m.targetElementPresent) {
      ll = xe_tag_len (pctxt, TM_CTXT|TM_PRIM|12,
         asn1E_Ns11_TargetElement (pctxt, pvalue->targetElement, ASN1IMPL));
      if (ll < 0) return LOG_RTERR (pctxt, ll);
      ll1 += ll;
   }
   /* encode subtype */

   if (pvalue->m.subtypePresent) {
      ll = xe_tag_len (pctxt, TM_CTXT|TM_PRIM|11,
         asn1E_Ns11_Subtype (pctxt, pvalue->subtype, ASN1IMPL));
      if (ll < 0) return LOG_RTERR (pctxt, ll);
      ll1 += ll;
   }
   /* encode mode */

   if (pvalue->m.modePresent) {
      if(pvalue->mode < 0 || pvalue->mode > 1)
         return LOG_RTERR (pctxt, RTERR_INVENUM);

      ll = xe_tag_len (pctxt, TM_CTXT|TM_PRIM|10,
         asn1E_Ns11_Mode (pctxt, &pvalue->mode, ASN1IMPL));
      if (ll < 0) return LOG_RTERR (pctxt, ll);
      ll1 += ll;
   }
   /* encode from */

   if (pvalue->m.fromPresent) {
      ll = xe_tag_len (pctxt, TM_CTXT|TM_PRIM|9,
         asn1E_Ns11_From (pctxt, pvalue->from, ASN1IMPL));
      if (ll < 0) return LOG_RTERR (pctxt, ll);
      ll1 += ll;
   }
   /* encode fill */

   if (pvalue->m.fillPresent) {
      if(pvalue->fill < 0 || pvalue->fill > 5)
         return LOG_RTERR (pctxt, RTERR_INVENUM);

      ll = xe_tag_len (pctxt, TM_CTXT|TM_PRIM|8,
         asn1E_Ns11_Fill (pctxt, &pvalue->fill, ASN1IMPL));
      if (ll < 0) return LOG_RTERR (pctxt, ll);
      ll1 += ll;
   }
   /* encode fadeColor */

   if (pvalue->m.fadeColorPresent) {
      if(pvalue->fadeColor < 0 || pvalue->fadeColor > 1)
         return LOG_RTERR (pctxt, RTERR_INVENUM);

      ll = xe_tag_len (pctxt, TM_CTXT|TM_PRIM|7,
         asn1E_Ns11_FadeColor (pctxt, &pvalue->fadeColor, ASN1IMPL));
      if (ll < 0) return LOG_RTERR (pctxt, ll);
      ll1 += ll;
   }
   /* encode direction */

   if (pvalue->m.directionPresent) {
      if(pvalue->direction < 0 || pvalue->direction > 1)
         return LOG_RTERR (pctxt, RTERR_INVENUM);

      ll = xe_tag_len (pctxt, TM_CTXT|TM_PRIM|6,
         asn1E_Ns11_Direction (pctxt, &pvalue->direction, ASN1IMPL));
      if (ll < 0) return LOG_RTERR (pctxt, ll);
      ll1 += ll;
   }
   /* encode calcMode */

   if (pvalue->m.calcModePresent) {
      if(pvalue->calcMode < 0 || pvalue->calcMode > 3)
         return LOG_RTERR (pctxt, RTERR_INVENUM);

      ll = xe_tag_len (pctxt, TM_CTXT|TM_PRIM|5,
         asn1E_Ns11_CalcMode (pctxt, &pvalue->calcMode, ASN1IMPL));
      if (ll < 0) return LOG_RTERR (pctxt, ll);
      ll1 += ll;
   }
   /* encode by */

   if (pvalue->m.byPresent) {
      ll = xe_tag_len (pctxt, TM_CTXT|TM_PRIM|4,
         asn1E_Ns11_By (pctxt, pvalue->by, ASN1IMPL));
      if (ll < 0) return LOG_RTERR (pctxt, ll);
      ll1 += ll;
   }
   /* encode additive */

   if (pvalue->m.additivePresent) {
      if(pvalue->additive < 0 || pvalue->additive > 1)
         return LOG_RTERR (pctxt, RTERR_INVENUM);

      ll = xe_tag_len (pctxt, TM_CTXT|TM_PRIM|3,
         asn1E_Ns11_Additive (pctxt, &pvalue->additive, ASN1IMPL));
      if (ll < 0) return LOG_RTERR (pctxt, ll);
      ll1 += ll;
   }
   /* encode accumulate */

   if (pvalue->m.accumulatePresent) {
      if(pvalue->accumulate < 0 || pvalue->accumulate > 1)
         return LOG_RTERR (pctxt, RTERR_INVENUM);

      ll = xe_tag_len (pctxt, TM_CTXT|TM_PRIM|2,
         asn1E_Ns11_Accumulate (pctxt, &pvalue->accumulate, ASN1IMPL));
      if (ll < 0) return LOG_RTERR (pctxt, ll);
      ll1 += ll;
   }
   /* encode sub_item */

   if (pvalue->m.sub_itemPresent) {
      ll = xe_tag_len (pctxt, TM_CTXT|TM_PRIM|1,
         xe_utf8str (pctxt, pvalue->sub_item, ASN1IMPL));
      if (ll < 0) return LOG_RTERR (pctxt, ll);
      ll1 += ll;
   }
   /* encode formula */

   if (pvalue->m.formulaPresent) {
      ll = xe_tag_len (pctxt, TM_CTXT|TM_PRIM|0,
         xe_utf8str (pctxt, pvalue->formula, ASN1IMPL));
      if (ll < 0) return LOG_RTERR (pctxt, ll);
      ll1 += ll;
   }
   ll0 += ll1;

   if (tagging == ASN1EXPL)
      ll0 = xe_tag_len (pctxt, TM_UNIV|TM_CONS|16, ll0);

   return (ll0);
}

int XmlEnc_TransitionFilter (OSCTXT* pctxt, TransitionFilter* pvalue, 
   const OSUTF8CHAR* elemName, const OSUTF8CHAR* nsPrefix)
{
   int stat = 0;

   if (0 != elemName) {
      stat = rtXmlEncStartElement (pctxt, elemName, nsPrefix, FALSE);
      if (stat != 0) return LOG_RTERR (pctxt, stat);
   }

   /* add attributes */

   if (pvalue->m.formulaPresent) {
      OSRTSAFEMEMCPY (pctxt, OSUTF8(" ns9:formula=\""), 14);

      stat = rtXmlEncUTF8Str (pctxt, pvalue->formula, 0, 0);
      if (stat != 0) return LOG_RTERR (pctxt, stat);

      OSRTSAFEPUTCHAR (pctxt, '\"');
   }

   if (pvalue->m.sub_itemPresent) {
      OSRTSAFEMEMCPY (pctxt, OSUTF8(" ns9:sub-item=\""), 15);

      stat = rtXmlEncUTF8Str (pctxt, pvalue->sub_item, 0, 0);
      if (stat != 0) return LOG_RTERR (pctxt, stat);

      OSRTSAFEPUTCHAR (pctxt, '\"');
   }

   if (pvalue->m.accumulatePresent) {
      OSRTSAFEMEMCPY (pctxt, OSUTF8(" ns11:accumulate=\""), 18);

      if(pvalue->accumulate < 0 || pvalue->accumulate > 1)
         return LOG_RTERR (pctxt, RTERR_INVENUM);

      stat = XmlEnc_Ns11_Accumulate (pctxt, pvalue->accumulate, 0, 0);
      if (stat != 0) return LOG_RTERR (pctxt, stat);

      OSRTSAFEPUTCHAR (pctxt, '"');
   }

   if (pvalue->m.additivePresent) {
      OSRTSAFEMEMCPY (pctxt, OSUTF8(" ns11:additive=\""), 16);

      if(pvalue->additive < 0 || pvalue->additive > 1)
         return LOG_RTERR (pctxt, RTERR_INVENUM);

      stat = XmlEnc_Ns11_Additive (pctxt, pvalue->additive, 0, 0);
      if (stat != 0) return LOG_RTERR (pctxt, stat);

      OSRTSAFEPUTCHAR (pctxt, '"');
   }

   if (pvalue->m.byPresent) {
      OSRTSAFEMEMCPY (pctxt, OSUTF8(" ns11:by=\""), 10);

      stat = XmlEnc_Ns11_By (pctxt, pvalue->by, 0, 0);
      if (stat != 0) return LOG_RTERR (pctxt, stat);

      OSRTSAFEPUTCHAR (pctxt, '"');
   }

   if (pvalue->m.calcModePresent) {
      OSRTSAFEMEMCPY (pctxt, OSUTF8(" ns11:calcMode=\""), 16);

      if(pvalue->calcMode < 0 || pvalue->calcMode > 3)
         return LOG_RTERR (pctxt, RTERR_INVENUM);

      stat = XmlEnc_Ns11_CalcMode (pctxt, pvalue->calcMode, 0, 0);
      if (stat != 0) return LOG_RTERR (pctxt, stat);

      OSRTSAFEPUTCHAR (pctxt, '"');
   }

   if (pvalue->m.directionPresent) {
      OSRTSAFEMEMCPY (pctxt, OSUTF8(" ns11:direction=\""), 17);

      if(pvalue->direction < 0 || pvalue->direction > 1)
         return LOG_RTERR (pctxt, RTERR_INVENUM);

      stat = XmlEnc_Ns11_Direction (pctxt, pvalue->direction, 0, 0);
      if (stat != 0) return LOG_RTERR (pctxt, stat);

      OSRTSAFEPUTCHAR (pctxt, '"');
   }

   if (pvalue->m.fadeColorPresent) {
      OSRTSAFEMEMCPY (pctxt, OSUTF8(" ns11:fadeColor=\""), 17);

      if(pvalue->fadeColor < 0 || pvalue->fadeColor > 1)
         return LOG_RTERR (pctxt, RTERR_INVENUM);

      stat = XmlEnc_Ns11_FadeColor (pctxt, pvalue->fadeColor, 0, 0);
      if (stat != 0) return LOG_RTERR (pctxt, stat);

      OSRTSAFEPUTCHAR (pctxt, '"');
   }

   if (pvalue->m.fillPresent) {
      OSRTSAFEMEMCPY (pctxt, OSUTF8(" ns11:fill=\""), 12);

      if(pvalue->fill < 0 || pvalue->fill > 5)
         return LOG_RTERR (pctxt, RTERR_INVENUM);

      stat = XmlEnc_Ns11_Fill (pctxt, pvalue->fill, 0, 0);
      if (stat != 0) return LOG_RTERR (pctxt, stat);

      OSRTSAFEPUTCHAR (pctxt, '"');
   }

   if (pvalue->m.fromPresent) {
      OSRTSAFEMEMCPY (pctxt, OSUTF8(" ns11:from=\""), 12);

      stat = XmlEnc_Ns11_From (pctxt, pvalue->from, 0, 0);
      if (stat != 0) return LOG_RTERR (pctxt, stat);

      OSRTSAFEPUTCHAR (pctxt, '"');
   }

   if (pvalue->m.modePresent) {
      OSRTSAFEMEMCPY (pctxt, OSUTF8(" ns11:mode=\""), 12);

      if(pvalue->mode < 0 || pvalue->mode > 1)
         return LOG_RTERR (pctxt, RTERR_INVENUM);

      stat = XmlEnc_Ns11_Mode (pctxt, pvalue->mode, 0, 0);
      if (stat != 0) return LOG_RTERR (pctxt, stat);

      OSRTSAFEPUTCHAR (pctxt, '"');
   }

   if (pvalue->m.subtypePresent) {
      OSRTSAFEMEMCPY (pctxt, OSUTF8(" ns11:subtype=\""), 15);

      stat = XmlEnc_Ns11_Subtype (pctxt, pvalue->subtype, 0, 0);
      if (stat != 0) return LOG_RTERR (pctxt, stat);

      OSRTSAFEPUTCHAR (pctxt, '"');
   }

   if (pvalue->m.targetElementPresent) {
      OSRTSAFEMEMCPY (pctxt, OSUTF8(" ns11:targetElement=\""), 21);

      stat = XmlEnc_Ns11_TargetElement (pctxt, pvalue->targetElement, 0, 0);
      if (stat != 0) return LOG_RTERR (pctxt, stat);

      OSRTSAFEPUTCHAR (pctxt, '"');
   }

   if (pvalue->m.toPresent) {
      OSRTSAFEMEMCPY (pctxt, OSUTF8(" ns11:to=\""), 10);

      stat = XmlEnc_Ns11_To (pctxt, pvalue->to, 0, 0);
      if (stat != 0) return LOG_RTERR (pctxt, stat);

      OSRTSAFEPUTCHAR (pctxt, '"');
   }

   OSRTSAFEMEMCPY (pctxt, OSUTF8(" ns11:type=\""), 12);

   stat = XmlEnc_Ns11_Type (pctxt, pvalue->type, 0, 0);
   if (stat != 0) return LOG_RTERR (pctxt, stat);

   OSRTSAFEPUTCHAR (pctxt, '"');

   if (pvalue->m.valuesPresent) {
      OSRTSAFEMEMCPY (pctxt, OSUTF8(" ns11:values=\""), 14);

      stat = XmlEnc_Ns11_Values (pctxt, pvalue->values, 0, 0);
      if (stat != 0) return LOG_RTERR (pctxt, stat);

      OSRTSAFEPUTCHAR (pctxt, '"');
   }

   OSRTSAFEPUTCHAR (pctxt, '>');
   pctxt->flags &= ~OSTERMSTART;
   pctxt->state = OSXMLSTART;

   stat = rtXmlEncEndElement (pctxt, elemName, nsPrefix);
   if (stat != 0) return LOG_RTERR (pctxt, stat);

   return (stat);
}

/**************************************************************/
/*                                                            */
/*  Seq                                                       */
/*                                                            */
/**************************************************************/

EXTERN int asn1E_Seq (OSCTXT* pctxt,
   Seq *pvalue, ASN1TagType tagging)
{
   int ll;
   int ll0 = 0;
   int ll1 = 0;

   /* encode restartDefault */

   if (pvalue->m.restartDefaultPresent) {
      if(pvalue->restartDefault < 0 || pvalue->restartDefault > 3)
         return LOG_RTERR (pctxt, RTERR_INVENUM);

      ll = xe_tag_len (pctxt, TM_CTXT|TM_PRIM|19,
         asn1E_Ns11_RestartDefault (pctxt, &pvalue->restartDefault, ASN1IMPL));
      if (ll < 0) return LOG_RTERR (pctxt, ll);
      ll1 += ll;
   }
   /* encode restart */

   if (pvalue->m.restartPresent) {
      if(pvalue->restart < 0 || pvalue->restart > 3)
         return LOG_RTERR (pctxt, RTERR_INVENUM);

      ll = xe_tag_len (pctxt, TM_CTXT|TM_PRIM|18,
         asn1E_Ns11_Restart (pctxt, &pvalue->restart, ASN1IMPL));
      if (ll < 0) return LOG_RTERR (pctxt, ll);
      ll1 += ll;
   }
   /* encode repeatDur */

   if (pvalue->m.repeatDurPresent) {
      ll = xe_tag_len (pctxt, TM_CTXT|TM_PRIM|17,
         asn1E_Ns11_RepeatDur (pctxt, pvalue->repeatDur, ASN1IMPL));
      if (ll < 0) return LOG_RTERR (pctxt, ll);
      ll1 += ll;
   }
   /* encode repeatCount */

   if (pvalue->m.repeatCountPresent) {
      ll = xe_tag_len (pctxt, TM_CTXT|TM_PRIM|16,
         asn1E_Ns11_RepeatCount (pctxt, &pvalue->repeatCount, ASN1IMPL));
      if (ll < 0) return LOG_RTERR (pctxt, ll);
      ll1 += ll;
   }
   /* encode fillDefault */

   if (pvalue->m.fillDefaultPresent) {
      if(pvalue->fillDefault < 0 || pvalue->fillDefault > 5)
         return LOG_RTERR (pctxt, RTERR_INVENUM);

      ll = xe_tag_len (pctxt, TM_CTXT|TM_PRIM|15,
         asn1E_Ns11_FillDefault (pctxt, &pvalue->fillDefault, ASN1IMPL));
      if (ll < 0) return LOG_RTERR (pctxt, ll);
      ll1 += ll;
   }
   /* encode fill */

   if (pvalue->m.fillPresent) {
      if(pvalue->fill < 0 || pvalue->fill > 5)
         return LOG_RTERR (pctxt, RTERR_INVENUM);

      ll = xe_tag_len (pctxt, TM_CTXT|TM_PRIM|14,
         asn1E_Ns11_Fill (pctxt, &pvalue->fill, ASN1IMPL));
      if (ll < 0) return LOG_RTERR (pctxt, ll);
      ll1 += ll;
   }
   /* encode endsync */

   if (pvalue->m.endsyncPresent) {
      if(pvalue->endsync < 0 || pvalue->endsync > 3)
         return LOG_RTERR (pctxt, RTERR_INVENUM);

      ll = xe_tag_len (pctxt, TM_CTXT|TM_PRIM|13,
         asn1E_Ns11_Endsync (pctxt, &pvalue->endsync, ASN1IMPL));
      if (ll < 0) return LOG_RTERR (pctxt, ll);
      ll1 += ll;
   }
   /* encode end */

   if (pvalue->m.endPresent) {
      ll = xe_tag_len (pctxt, TM_CTXT|TM_PRIM|12,
         asn1E_Ns11_End (pctxt, pvalue->end, ASN1IMPL));
      if (ll < 0) return LOG_RTERR (pctxt, ll);
      ll1 += ll;
   }
   /* encode dur */

   if (pvalue->m.durPresent) {
      ll = xe_tag_len (pctxt, TM_CTXT|TM_PRIM|11,
         asn1E_Ns11_Dur (pctxt, pvalue->dur, ASN1IMPL));
      if (ll < 0) return LOG_RTERR (pctxt, ll);
      ll1 += ll;
   }
   /* encode decelerate */

   if (pvalue->m.deceleratePresent) {
      ll = xe_tag_len (pctxt, TM_CTXT|TM_PRIM|10,
         asn1E_Ns11_Decelerate (pctxt, &pvalue->decelerate, ASN1IMPL));
      if (ll < 0) return LOG_RTERR (pctxt, ll);
      ll1 += ll;
   }
   /* encode begin */

   if (pvalue->m.beginPresent) {
      ll = xe_tag_len (pctxt, TM_CTXT|TM_PRIM|9,
         asn1E_Ns11_Begin (pctxt, pvalue->begin, ASN1IMPL));
      if (ll < 0) return LOG_RTERR (pctxt, ll);
      ll1 += ll;
   }
   /* encode autoReverse */

   if (pvalue->m.autoReversePresent) {
      if(pvalue->autoReverse < 0 || pvalue->autoReverse > 1)
         return LOG_RTERR (pctxt, RTERR_INVENUM);

      ll = xe_tag_len (pctxt, TM_CTXT|TM_PRIM|8,
         asn1E_Ns11_AutoReverse (pctxt, &pvalue->autoReverse, ASN1IMPL));
      if (ll < 0) return LOG_RTERR (pctxt, ll);
      ll1 += ll;
   }
   /* encode accelerate */

   if (pvalue->m.acceleratePresent) {
      ll = xe_tag_len (pctxt, TM_CTXT|TM_PRIM|7,
         asn1E_Ns11_Accelerate (pctxt, &pvalue->accelerate, ASN1IMPL));
      if (ll < 0) return LOG_RTERR (pctxt, ll);
      ll1 += ll;
   }
   /* encode preset_sub_type */

   if (pvalue->m.preset_sub_typePresent) {
      ll = xe_tag_len (pctxt, TM_CTXT|TM_PRIM|6,
         asn1E_Ns10_Preset_sub_type (pctxt, (Ns10_Preset_sub_type)pvalue->preset_sub_type, ASN1IMPL));
      if (ll < 0) return LOG_RTERR (pctxt, ll);
      ll1 += ll;
   }
   /* encode preset_id */

   if (pvalue->m.preset_idPresent) {
      ll = xe_tag_len (pctxt, TM_CTXT|TM_PRIM|5,
         asn1E_Ns10_Preset_id (pctxt, (Ns10_Preset_id)pvalue->preset_id, ASN1IMPL));
      if (ll < 0) return LOG_RTERR (pctxt, ll);
      ll1 += ll;
   }
   /* encode preset_class */

   if (pvalue->m.preset_classPresent) {
      if(pvalue->preset_class < 0 || pvalue->preset_class > 6)
         return LOG_RTERR (pctxt, RTERR_INVENUM);

      ll = xe_tag_len (pctxt, TM_CTXT|TM_PRIM|4,
         asn1E_Ns10_Preset_class (pctxt, (Ns10_Preset_class*)&pvalue->preset_class, ASN1IMPL));
      if (ll < 0) return LOG_RTERR (pctxt, ll);
      ll1 += ll;
   }
   /* encode node_type */

   if (pvalue->m.node_typePresent) {
      if(pvalue->node_type < 0 || pvalue->node_type > 6)
         return LOG_RTERR (pctxt, RTERR_INVENUM);

      ll = xe_tag_len (pctxt, TM_CTXT|TM_PRIM|3,
         asn1E_Ns10_Node_type (pctxt, (Ns10_Node_type*)&pvalue->node_type, ASN1IMPL));
      if (ll < 0) return LOG_RTERR (pctxt, ll);
      ll1 += ll;
   }
   /* encode master_element */

   if (pvalue->m.master_elementPresent) {
      ll = xe_tag_len (pctxt, TM_CTXT|TM_PRIM|2,
         asn1E_Ns10_Master_element (pctxt, (Ns10_Master_element)pvalue->master_element, ASN1IMPL));
      if (ll < 0) return LOG_RTERR (pctxt, ll);
      ll1 += ll;
   }
   /* encode group_id */

   if (pvalue->m.group_idPresent) {
      ll = xe_tag_len (pctxt, TM_CTXT|TM_PRIM|1,
         asn1E_Ns10_Group_id (pctxt, (Ns10_Group_id)pvalue->group_id, ASN1IMPL));
      if (ll < 0) return LOG_RTERR (pctxt, ll);
      ll1 += ll;
   }
   /* encode id */

   if (pvalue->m.idPresent) {
      ll = xe_tag_len (pctxt, TM_CTXT|TM_PRIM|0,
         xe_utf8str (pctxt, pvalue->id, ASN1IMPL));
      if (ll < 0) return LOG_RTERR (pctxt, ll);
      ll1 += ll;
   }
   ll0 += ll1;

   if (tagging == ASN1EXPL)
      ll0 = xe_tag_len (pctxt, TM_UNIV|TM_CONS|16, ll0);

   return (ll0);
}

int XmlEnc_Seq (OSCTXT* pctxt, Seq* pvalue, const OSUTF8CHAR* elemName, 
   const OSUTF8CHAR* nsPrefix)
{
   int stat = 0;

   if (0 != elemName) {
      stat = rtXmlEncStartElement (pctxt, elemName, nsPrefix, FALSE);
      if (stat != 0) return LOG_RTERR (pctxt, stat);
   }

   /* add attributes */

   if (pvalue->m.idPresent) {
      OSRTSAFEMEMCPY (pctxt, OSUTF8(" ns9:id=\""), 9);

      stat = rtXmlEncUTF8Str (pctxt, pvalue->id, 0, 0);
      if (stat != 0) return LOG_RTERR (pctxt, stat);

      OSRTSAFEPUTCHAR (pctxt, '\"');
   }

   if (pvalue->m.group_idPresent) {
      OSRTSAFEMEMCPY (pctxt, OSUTF8(" ns10:group-id=\""), 16);

      stat = XmlEnc_Ns10_Group_id (pctxt, pvalue->group_id, 0, 0);
      if (stat != 0) return LOG_RTERR (pctxt, stat);

      OSRTSAFEPUTCHAR (pctxt, '"');
   }

   if (pvalue->m.master_elementPresent) {
      OSRTSAFEMEMCPY (pctxt, OSUTF8(" ns10:master-element=\""), 22);

      stat = XmlEnc_Ns10_Master_element (pctxt, pvalue->master_element, 0, 0);
      if (stat != 0) return LOG_RTERR (pctxt, stat);

      OSRTSAFEPUTCHAR (pctxt, '"');
   }

   if (pvalue->m.node_typePresent) {
      OSRTSAFEMEMCPY (pctxt, OSUTF8(" ns10:node-type=\""), 17);

      if(pvalue->node_type < 0 || pvalue->node_type > 6)
         return LOG_RTERR (pctxt, RTERR_INVENUM);

      stat = XmlEnc_Ns10_Node_type (pctxt, pvalue->node_type, 0, 0);
      if (stat != 0) return LOG_RTERR (pctxt, stat);

      OSRTSAFEPUTCHAR (pctxt, '"');
   }

   if (pvalue->m.preset_classPresent) {
      OSRTSAFEMEMCPY (pctxt, OSUTF8(" ns10:preset-class=\""), 20);

      if(pvalue->preset_class < 0 || pvalue->preset_class > 6)
         return LOG_RTERR (pctxt, RTERR_INVENUM);

      stat = XmlEnc_Ns10_Preset_class (pctxt, pvalue->preset_class, 0, 0);
      if (stat != 0) return LOG_RTERR (pctxt, stat);

      OSRTSAFEPUTCHAR (pctxt, '"');
   }

   if (pvalue->m.preset_idPresent) {
      OSRTSAFEMEMCPY (pctxt, OSUTF8(" ns10:preset-id=\""), 17);

      stat = XmlEnc_Ns10_Preset_id (pctxt, pvalue->preset_id, 0, 0);
      if (stat != 0) return LOG_RTERR (pctxt, stat);

      OSRTSAFEPUTCHAR (pctxt, '"');
   }

   if (pvalue->m.preset_sub_typePresent) {
      OSRTSAFEMEMCPY (pctxt, OSUTF8(" ns10:preset-sub-type=\""), 23);

      stat = XmlEnc_Ns10_Preset_sub_type (pctxt, pvalue->preset_sub_type
         , 0, 0);
      if (stat != 0) return LOG_RTERR (pctxt, stat);

      OSRTSAFEPUTCHAR (pctxt, '"');
   }

   if (pvalue->m.acceleratePresent) {
      OSRTSAFEMEMCPY (pctxt, OSUTF8(" ns11:accelerate=\""), 18);

      stat = XmlEnc_Ns11_Accelerate (pctxt, pvalue->accelerate, 0, 0);
      if (stat != 0) return LOG_RTERR (pctxt, stat);

      OSRTSAFEPUTCHAR (pctxt, '"');
   }

   if (pvalue->m.autoReversePresent) {
      OSRTSAFEMEMCPY (pctxt, OSUTF8(" ns11:autoReverse=\""), 19);

      if(pvalue->autoReverse < 0 || pvalue->autoReverse > 1)
         return LOG_RTERR (pctxt, RTERR_INVENUM);

      stat = XmlEnc_Ns11_AutoReverse (pctxt, pvalue->autoReverse, 0, 0);
      if (stat != 0) return LOG_RTERR (pctxt, stat);

      OSRTSAFEPUTCHAR (pctxt, '"');
   }

   if (pvalue->m.beginPresent) {
      OSRTSAFEMEMCPY (pctxt, OSUTF8(" ns11:begin=\""), 13);

      stat = XmlEnc_Ns11_Begin (pctxt, pvalue->begin, 0, 0);
      if (stat != 0) return LOG_RTERR (pctxt, stat);

      OSRTSAFEPUTCHAR (pctxt, '"');
   }

   if (pvalue->m.deceleratePresent) {
      OSRTSAFEMEMCPY (pctxt, OSUTF8(" ns11:decelerate=\""), 18);

      stat = XmlEnc_Ns11_Decelerate (pctxt, pvalue->decelerate, 0, 0);
      if (stat != 0) return LOG_RTERR (pctxt, stat);

      OSRTSAFEPUTCHAR (pctxt, '"');
   }

   if (pvalue->m.durPresent) {
      OSRTSAFEMEMCPY (pctxt, OSUTF8(" ns11:dur=\""), 11);

      stat = XmlEnc_Ns11_Dur (pctxt, pvalue->dur, 0, 0);
      if (stat != 0) return LOG_RTERR (pctxt, stat);

      OSRTSAFEPUTCHAR (pctxt, '"');
   }

   if (pvalue->m.endPresent) {
      OSRTSAFEMEMCPY (pctxt, OSUTF8(" ns11:end=\""), 11);

      stat = XmlEnc_Ns11_End (pctxt, pvalue->end, 0, 0);
      if (stat != 0) return LOG_RTERR (pctxt, stat);

      OSRTSAFEPUTCHAR (pctxt, '"');
   }

   if (pvalue->m.endsyncPresent) {
      OSRTSAFEMEMCPY (pctxt, OSUTF8(" ns11:endsync=\""), 15);

      if(pvalue->endsync < 0 || pvalue->endsync > 3)
         return LOG_RTERR (pctxt, RTERR_INVENUM);

      stat = XmlEnc_Ns11_Endsync (pctxt, pvalue->endsync, 0, 0);
      if (stat != 0) return LOG_RTERR (pctxt, stat);

      OSRTSAFEPUTCHAR (pctxt, '"');
   }

   if (pvalue->m.fillPresent) {
      OSRTSAFEMEMCPY (pctxt, OSUTF8(" ns11:fill=\""), 12);

      if(pvalue->fill < 0 || pvalue->fill > 5)
         return LOG_RTERR (pctxt, RTERR_INVENUM);

      stat = XmlEnc_Ns11_Fill (pctxt, pvalue->fill, 0, 0);
      if (stat != 0) return LOG_RTERR (pctxt, stat);

      OSRTSAFEPUTCHAR (pctxt, '"');
   }

   if (pvalue->m.fillDefaultPresent) {
      OSRTSAFEMEMCPY (pctxt, OSUTF8(" ns11:fillDefault=\""), 19);

      if(pvalue->fillDefault < 0 || pvalue->fillDefault > 5)
         return LOG_RTERR (pctxt, RTERR_INVENUM);

      stat = XmlEnc_Ns11_FillDefault (pctxt, pvalue->fillDefault, 0, 0);
      if (stat != 0) return LOG_RTERR (pctxt, stat);

      OSRTSAFEPUTCHAR (pctxt, '"');
   }

   if (pvalue->m.repeatCountPresent) {
      OSRTSAFEMEMCPY (pctxt, OSUTF8(" ns11:repeatCount=\""), 19);

      stat = XmlEnc_Ns11_RepeatCount (pctxt, pvalue->repeatCount, 0, 0);
      if (stat != 0) return LOG_RTERR (pctxt, stat);

      OSRTSAFEPUTCHAR (pctxt, '"');
   }

   if (pvalue->m.repeatDurPresent) {
      OSRTSAFEMEMCPY (pctxt, OSUTF8(" ns11:repeatDur=\""), 17);

      stat = XmlEnc_Ns11_RepeatDur (pctxt, pvalue->repeatDur, 0, 0);
      if (stat != 0) return LOG_RTERR (pctxt, stat);

      OSRTSAFEPUTCHAR (pctxt, '"');
   }

   if (pvalue->m.restartPresent) {
      OSRTSAFEMEMCPY (pctxt, OSUTF8(" ns11:restart=\""), 15);

      if(pvalue->restart < 0 || pvalue->restart > 3)
         return LOG_RTERR (pctxt, RTERR_INVENUM);

      stat = XmlEnc_Ns11_Restart (pctxt, pvalue->restart, 0, 0);
      if (stat != 0) return LOG_RTERR (pctxt, stat);

      OSRTSAFEPUTCHAR (pctxt, '"');
   }

   if (pvalue->m.restartDefaultPresent) {
      OSRTSAFEMEMCPY (pctxt, OSUTF8(" ns11:restartDefault=\""), 22);

      if(pvalue->restartDefault < 0 || pvalue->restartDefault > 3)
         return LOG_RTERR (pctxt, RTERR_INVENUM);

      stat = XmlEnc_Ns11_RestartDefault (pctxt, pvalue->restartDefault, 0, 0);
      if (stat != 0) return LOG_RTERR (pctxt, stat);

      OSRTSAFEPUTCHAR (pctxt, '"');
   }

   OSRTSAFEPUTCHAR (pctxt, '>');
   pctxt->flags &= ~OSTERMSTART;
   pctxt->state = OSXMLSTART;

   stat = rtXmlEncEndElement (pctxt, elemName, nsPrefix);
   if (stat != 0) return LOG_RTERR (pctxt, stat);

   return (stat);
}

/**************************************************************/
/*                                                            */
/*  Audio                                                     */
/*                                                            */
/**************************************************************/

EXTERN int asn1E_Audio (OSCTXT* pctxt,
   Audio *pvalue, ASN1TagType tagging)
{
   int ll;
   int ll0 = 0;
   int ll1 = 0;

   /* encode repeatDur */

   if (pvalue->m.repeatDurPresent) {
      ll = xe_tag_len (pctxt, TM_CTXT|TM_PRIM|13,
         asn1E_Ns11_RepeatDur (pctxt, pvalue->repeatDur, ASN1IMPL));
      if (ll < 0) return LOG_RTERR (pctxt, ll);
      ll1 += ll;
   }
   /* encode repeatCount */

   if (pvalue->m.repeatCountPresent) {
      ll = xe_tag_len (pctxt, TM_CTXT|TM_PRIM|12,
         asn1E_Ns11_RepeatCount (pctxt, &pvalue->repeatCount, ASN1IMPL));
      if (ll < 0) return LOG_RTERR (pctxt, ll);
      ll1 += ll;
   }
   /* encode end */

   if (pvalue->m.endPresent) {
      ll = xe_tag_len (pctxt, TM_CTXT|TM_PRIM|11,
         asn1E_Ns11_End (pctxt, pvalue->end, ASN1IMPL));
      if (ll < 0) return LOG_RTERR (pctxt, ll);
      ll1 += ll;
   }
   /* encode dur */

   if (pvalue->m.durPresent) {
      ll = xe_tag_len (pctxt, TM_CTXT|TM_PRIM|10,
         asn1E_Ns11_Dur (pctxt, pvalue->dur, ASN1IMPL));
      if (ll < 0) return LOG_RTERR (pctxt, ll);
      ll1 += ll;
   }
   /* encode begin */

   if (pvalue->m.beginPresent) {
      ll = xe_tag_len (pctxt, TM_CTXT|TM_PRIM|9,
         asn1E_Ns11_Begin (pctxt, pvalue->begin, ASN1IMPL));
      if (ll < 0) return LOG_RTERR (pctxt, ll);
      ll1 += ll;
   }
   /* encode preset_sub_type */

   if (pvalue->m.preset_sub_typePresent) {
      ll = xe_tag_len (pctxt, TM_CTXT|TM_PRIM|8,
         asn1E_Ns10_Preset_sub_type (pctxt, (Ns10_Preset_sub_type)pvalue->preset_sub_type, ASN1IMPL));
      if (ll < 0) return LOG_RTERR (pctxt, ll);
      ll1 += ll;
   }
   /* encode preset_id */

   if (pvalue->m.preset_idPresent) {
      ll = xe_tag_len (pctxt, TM_CTXT|TM_PRIM|7,
         asn1E_Ns10_Preset_id (pctxt, (Ns10_Preset_id)pvalue->preset_id, ASN1IMPL));
      if (ll < 0) return LOG_RTERR (pctxt, ll);
      ll1 += ll;
   }
   /* encode preset_class */

   if (pvalue->m.preset_classPresent) {
      if(pvalue->preset_class < 0 || pvalue->preset_class > 6)
         return LOG_RTERR (pctxt, RTERR_INVENUM);

      ll = xe_tag_len (pctxt, TM_CTXT|TM_PRIM|6,
         asn1E_Ns10_Preset_class (pctxt, (Ns10_Preset_class*)&pvalue->preset_class, ASN1IMPL));
      if (ll < 0) return LOG_RTERR (pctxt, ll);
      ll1 += ll;
   }
   /* encode node_type */

   if (pvalue->m.node_typePresent) {
      if(pvalue->node_type < 0 || pvalue->node_type > 6)
         return LOG_RTERR (pctxt, RTERR_INVENUM);

      ll = xe_tag_len (pctxt, TM_CTXT|TM_PRIM|5,
         asn1E_Ns10_Node_type (pctxt, (Ns10_Node_type*)&pvalue->node_type, ASN1IMPL));
      if (ll < 0) return LOG_RTERR (pctxt, ll);
      ll1 += ll;
   }
   /* encode master_element */

   if (pvalue->m.master_elementPresent) {
      ll = xe_tag_len (pctxt, TM_CTXT|TM_PRIM|4,
         asn1E_Ns10_Master_element (pctxt, (Ns10_Master_element)pvalue->master_element, ASN1IMPL));
      if (ll < 0) return LOG_RTERR (pctxt, ll);
      ll1 += ll;
   }
   /* encode group_id */

   if (pvalue->m.group_idPresent) {
      ll = xe_tag_len (pctxt, TM_CTXT|TM_PRIM|3,
         asn1E_Ns10_Group_id (pctxt, (Ns10_Group_id)pvalue->group_id, ASN1IMPL));
      if (ll < 0) return LOG_RTERR (pctxt, ll);
      ll1 += ll;
   }
   /* encode id */

   if (pvalue->m.idPresent) {
      ll = xe_tag_len (pctxt, TM_CTXT|TM_PRIM|2,
         xe_utf8str (pctxt, pvalue->id, ASN1IMPL));
      if (ll < 0) return LOG_RTERR (pctxt, ll);
      ll1 += ll;
   }
   /* encode audio_level */

   if (pvalue->m.audio_levelPresent) {
      ll = xe_tag_len (pctxt, TM_CTXT|TM_PRIM|1,
         xe_real (pctxt, &pvalue->audio_level, ASN1IMPL));
      if (ll < 0) return LOG_RTERR (pctxt, ll);
      ll1 += ll;
   }
   /* encode href */

   if (pvalue->m.hrefPresent) {
      ll = xe_tag_len (pctxt, TM_CTXT|TM_PRIM|0,
         asn1E_Xlink_Href (pctxt, pvalue->href, ASN1IMPL));
      if (ll < 0) return LOG_RTERR (pctxt, ll);
      ll1 += ll;
   }
   ll0 += ll1;

   if (tagging == ASN1EXPL)
      ll0 = xe_tag_len (pctxt, TM_UNIV|TM_CONS|16, ll0);

   return (ll0);
}

int XmlEnc_Audio (OSCTXT* pctxt, Audio* pvalue, const OSUTF8CHAR* elemName, 
   const OSUTF8CHAR* nsPrefix)
{
   int stat = 0;

   if (0 != elemName) {
      stat = rtXmlEncStartElement (pctxt, elemName, nsPrefix, FALSE);
      if (stat != 0) return LOG_RTERR (pctxt, stat);
   }

   /* add attributes */

   if (pvalue->m.hrefPresent) {
      OSRTSAFEMEMCPY (pctxt, OSUTF8(" xlink:href=\""), 13);

      stat = XmlEnc_Xlink_Href (pctxt, pvalue->href, 0, 0);
      if (stat != 0) return LOG_RTERR (pctxt, stat);

      OSRTSAFEPUTCHAR (pctxt, '"');
   }

   if (pvalue->m.audio_levelPresent) {
      OSRTSAFEMEMCPY (pctxt, OSUTF8(" ns9:audio-level=\""), 18);

      stat = rtXmlEncDouble (pctxt, pvalue->audio_level, 0, 0, 0);
      if (stat != 0) return LOG_RTERR (pctxt, stat);

      OSRTSAFEPUTCHAR (pctxt, '\"');
   }

   if (pvalue->m.idPresent) {
      OSRTSAFEMEMCPY (pctxt, OSUTF8(" ns9:id=\""), 9);

      stat = rtXmlEncUTF8Str (pctxt, pvalue->id, 0, 0);
      if (stat != 0) return LOG_RTERR (pctxt, stat);

      OSRTSAFEPUTCHAR (pctxt, '\"');
   }

   if (pvalue->m.group_idPresent) {
      OSRTSAFEMEMCPY (pctxt, OSUTF8(" ns10:group-id=\""), 16);

      stat = XmlEnc_Ns10_Group_id (pctxt, pvalue->group_id, 0, 0);
      if (stat != 0) return LOG_RTERR (pctxt, stat);

      OSRTSAFEPUTCHAR (pctxt, '"');
   }

   if (pvalue->m.master_elementPresent) {
      OSRTSAFEMEMCPY (pctxt, OSUTF8(" ns10:master-element=\""), 22);

      stat = XmlEnc_Ns10_Master_element (pctxt, pvalue->master_element, 0, 0);
      if (stat != 0) return LOG_RTERR (pctxt, stat);

      OSRTSAFEPUTCHAR (pctxt, '"');
   }

   if (pvalue->m.node_typePresent) {
      OSRTSAFEMEMCPY (pctxt, OSUTF8(" ns10:node-type=\""), 17);

      if(pvalue->node_type < 0 || pvalue->node_type > 6)
         return LOG_RTERR (pctxt, RTERR_INVENUM);

      stat = XmlEnc_Ns10_Node_type (pctxt, pvalue->node_type, 0, 0);
      if (stat != 0) return LOG_RTERR (pctxt, stat);

      OSRTSAFEPUTCHAR (pctxt, '"');
   }

   if (pvalue->m.preset_classPresent) {
      OSRTSAFEMEMCPY (pctxt, OSUTF8(" ns10:preset-class=\""), 20);

      if(pvalue->preset_class < 0 || pvalue->preset_class > 6)
         return LOG_RTERR (pctxt, RTERR_INVENUM);

      stat = XmlEnc_Ns10_Preset_class (pctxt, pvalue->preset_class, 0, 0);
      if (stat != 0) return LOG_RTERR (pctxt, stat);

      OSRTSAFEPUTCHAR (pctxt, '"');
   }

   if (pvalue->m.preset_idPresent) {
      OSRTSAFEMEMCPY (pctxt, OSUTF8(" ns10:preset-id=\""), 17);

      stat = XmlEnc_Ns10_Preset_id (pctxt, pvalue->preset_id, 0, 0);
      if (stat != 0) return LOG_RTERR (pctxt, stat);

      OSRTSAFEPUTCHAR (pctxt, '"');
   }

   if (pvalue->m.preset_sub_typePresent) {
      OSRTSAFEMEMCPY (pctxt, OSUTF8(" ns10:preset-sub-type=\""), 23);

      stat = XmlEnc_Ns10_Preset_sub_type (pctxt, pvalue->preset_sub_type
         , 0, 0);
      if (stat != 0) return LOG_RTERR (pctxt, stat);

      OSRTSAFEPUTCHAR (pctxt, '"');
   }

   if (pvalue->m.beginPresent) {
      OSRTSAFEMEMCPY (pctxt, OSUTF8(" ns11:begin=\""), 13);

      stat = XmlEnc_Ns11_Begin (pctxt, pvalue->begin, 0, 0);
      if (stat != 0) return LOG_RTERR (pctxt, stat);

      OSRTSAFEPUTCHAR (pctxt, '"');
   }

   if (pvalue->m.durPresent) {
      OSRTSAFEMEMCPY (pctxt, OSUTF8(" ns11:dur=\""), 11);

      stat = XmlEnc_Ns11_Dur (pctxt, pvalue->dur, 0, 0);
      if (stat != 0) return LOG_RTERR (pctxt, stat);

      OSRTSAFEPUTCHAR (pctxt, '"');
   }

   if (pvalue->m.endPresent) {
      OSRTSAFEMEMCPY (pctxt, OSUTF8(" ns11:end=\""), 11);

      stat = XmlEnc_Ns11_End (pctxt, pvalue->end, 0, 0);
      if (stat != 0) return LOG_RTERR (pctxt, stat);

      OSRTSAFEPUTCHAR (pctxt, '"');
   }

   if (pvalue->m.repeatCountPresent) {
      OSRTSAFEMEMCPY (pctxt, OSUTF8(" ns11:repeatCount=\""), 19);

      stat = XmlEnc_Ns11_RepeatCount (pctxt, pvalue->repeatCount, 0, 0);
      if (stat != 0) return LOG_RTERR (pctxt, stat);

      OSRTSAFEPUTCHAR (pctxt, '"');
   }

   if (pvalue->m.repeatDurPresent) {
      OSRTSAFEMEMCPY (pctxt, OSUTF8(" ns11:repeatDur=\""), 17);

      stat = XmlEnc_Ns11_RepeatDur (pctxt, pvalue->repeatDur, 0, 0);
      if (stat != 0) return LOG_RTERR (pctxt, stat);

      OSRTSAFEPUTCHAR (pctxt, '"');
   }

   OSRTSAFEPUTCHAR (pctxt, '>');
   pctxt->flags &= ~OSTERMSTART;
   pctxt->state = OSXMLSTART;

   stat = rtXmlEncEndElement (pctxt, elemName, nsPrefix);
   if (stat != 0) return LOG_RTERR (pctxt, stat);

   return (stat);
}

/**************************************************************/
/*                                                            */
/*  Param                                                     */
/*                                                            */
/**************************************************************/

EXTERN int asn1E_Param (OSCTXT* pctxt,
   Param *pvalue, ASN1TagType tagging)
{
   int ll;
   int ll0 = 0;
   int ll1 = 0;

   /* encode value */

   ll = xe_tag_len (pctxt, TM_CTXT|TM_PRIM|1,
      xe_utf8str (pctxt, pvalue->value, ASN1IMPL));
   if (ll < 0) return LOG_RTERR (pctxt, ll);
   ll1 += ll;

   /* encode name */

   ll = xe_tag_len (pctxt, TM_CTXT|TM_PRIM|0,
      xe_utf8str (pctxt, pvalue->name, ASN1IMPL));
   if (ll < 0) return LOG_RTERR (pctxt, ll);
   ll1 += ll;

   ll0 += ll1;

   if (tagging == ASN1EXPL)
      ll0 = xe_tag_len (pctxt, TM_UNIV|TM_CONS|16, ll0);

   return (ll0);
}

int XmlEnc_Param (OSCTXT* pctxt, Param* pvalue, const OSUTF8CHAR* elemName, 
   const OSUTF8CHAR* nsPrefix)
{
   int stat = 0;

   if (0 != elemName) {
      stat = rtXmlEncStartElement (pctxt, elemName, nsPrefix, FALSE);
      if (stat != 0) return LOG_RTERR (pctxt, stat);
   }

   /* add attributes */

   OSRTSAFEMEMCPY (pctxt, OSUTF8(" ns9:name=\""), 11);

   stat = rtXmlEncUTF8Str (pctxt, pvalue->name, 0, 0);
   if (stat != 0) return LOG_RTERR (pctxt, stat);

   OSRTSAFEPUTCHAR (pctxt, '\"');

   OSRTSAFEMEMCPY (pctxt, OSUTF8(" ns9:value=\""), 12);

   stat = rtXmlEncUTF8Str (pctxt, pvalue->value, 0, 0);
   if (stat != 0) return LOG_RTERR (pctxt, stat);

   OSRTSAFEPUTCHAR (pctxt, '\"');

   OSRTSAFEPUTCHAR (pctxt, '>');
   pctxt->flags &= ~OSTERMSTART;
   pctxt->state = OSXMLSTART;

   stat = rtXmlEncEndElement (pctxt, elemName, nsPrefix);
   if (stat != 0) return LOG_RTERR (pctxt, stat);

   return (stat);
}

/**************************************************************/
/*                                                            */
/*  Command                                                   */
/*                                                            */
/**************************************************************/

EXTERN int asn1E_Command (OSCTXT* pctxt,
   Command *pvalue, ASN1TagType tagging)
{
   int ll;
   int ll0 = 0;
   int ll1 = 0;
   OSRTDListNode* pnode2;
   int ll2 = 0;

   /* encode param_list */

   pnode2 = pvalue->param_list.tail;
   while (0 != pnode2) {
      ll = asn1E_Param (pctxt, ((Param*)pnode2->data), ASN1EXPL);
      if (ll < 0) return LOG_RTERR (pctxt, ll);
      ll2 += ll;

      pnode2 = pnode2->prev;
   }
   ll = xe_tag_len (pctxt, TM_CTXT|TM_CONS|12, ll2);
   if (ll < 0) return LOG_RTERR (pctxt, ll);
   else { ll1 += ll; ll2 = 0; }

   /* encode targetElement */

   if (pvalue->m.targetElementPresent) {
      ll = xe_tag_len (pctxt, TM_CTXT|TM_PRIM|11,
         asn1E_Ns11_TargetElement (pctxt, pvalue->targetElement, ASN1IMPL));
      if (ll < 0) return LOG_RTERR (pctxt, ll);
      ll1 += ll;
   }
   /* encode end */

   if (pvalue->m.endPresent) {
      ll = xe_tag_len (pctxt, TM_CTXT|TM_PRIM|10,
         asn1E_Ns11_End (pctxt, pvalue->end, ASN1IMPL));
      if (ll < 0) return LOG_RTERR (pctxt, ll);
      ll1 += ll;
   }
   /* encode begin */

   if (pvalue->m.beginPresent) {
      ll = xe_tag_len (pctxt, TM_CTXT|TM_PRIM|9,
         asn1E_Ns11_Begin (pctxt, pvalue->begin, ASN1IMPL));
      if (ll < 0) return LOG_RTERR (pctxt, ll);
      ll1 += ll;
   }
   /* encode preset_sub_type */

   if (pvalue->m.preset_sub_typePresent) {
      ll = xe_tag_len (pctxt, TM_CTXT|TM_PRIM|8,
         asn1E_Ns10_Preset_sub_type (pctxt, (Ns10_Preset_sub_type)pvalue->preset_sub_type, ASN1IMPL));
      if (ll < 0) return LOG_RTERR (pctxt, ll);
      ll1 += ll;
   }
   /* encode preset_id */

   if (pvalue->m.preset_idPresent) {
      ll = xe_tag_len (pctxt, TM_CTXT|TM_PRIM|7,
         asn1E_Ns10_Preset_id (pctxt, (Ns10_Preset_id)pvalue->preset_id, ASN1IMPL));
      if (ll < 0) return LOG_RTERR (pctxt, ll);
      ll1 += ll;
   }
   /* encode preset_class */

   if (pvalue->m.preset_classPresent) {
      if(pvalue->preset_class < 0 || pvalue->preset_class > 6)
         return LOG_RTERR (pctxt, RTERR_INVENUM);

      ll = xe_tag_len (pctxt, TM_CTXT|TM_PRIM|6,
         asn1E_Ns10_Preset_class (pctxt, (Ns10_Preset_class*)&pvalue->preset_class, ASN1IMPL));
      if (ll < 0) return LOG_RTERR (pctxt, ll);
      ll1 += ll;
   }
   /* encode node_type */

   if (pvalue->m.node_typePresent) {
      if(pvalue->node_type < 0 || pvalue->node_type > 6)
         return LOG_RTERR (pctxt, RTERR_INVENUM);

      ll = xe_tag_len (pctxt, TM_CTXT|TM_PRIM|5,
         asn1E_Ns10_Node_type (pctxt, (Ns10_Node_type*)&pvalue->node_type, ASN1IMPL));
      if (ll < 0) return LOG_RTERR (pctxt, ll);
      ll1 += ll;
   }
   /* encode master_element */

   if (pvalue->m.master_elementPresent) {
      ll = xe_tag_len (pctxt, TM_CTXT|TM_PRIM|4,
         asn1E_Ns10_Master_element (pctxt, (Ns10_Master_element)pvalue->master_element, ASN1IMPL));
      if (ll < 0) return LOG_RTERR (pctxt, ll);
      ll1 += ll;
   }
   /* encode group_id */

   if (pvalue->m.group_idPresent) {
      ll = xe_tag_len (pctxt, TM_CTXT|TM_PRIM|3,
         asn1E_Ns10_Group_id (pctxt, (Ns10_Group_id)pvalue->group_id, ASN1IMPL));
      if (ll < 0) return LOG_RTERR (pctxt, ll);
      ll1 += ll;
   }
   /* encode sub_item */

   if (pvalue->m.sub_itemPresent) {
      ll = xe_tag_len (pctxt, TM_CTXT|TM_PRIM|2,
         xe_utf8str (pctxt, pvalue->sub_item, ASN1IMPL));
      if (ll < 0) return LOG_RTERR (pctxt, ll);
      ll1 += ll;
   }
   /* encode id */

   if (pvalue->m.idPresent) {
      ll = xe_tag_len (pctxt, TM_CTXT|TM_PRIM|1,
         xe_utf8str (pctxt, pvalue->id, ASN1IMPL));
      if (ll < 0) return LOG_RTERR (pctxt, ll);
      ll1 += ll;
   }
   /* encode command */

   ll = xe_tag_len (pctxt, TM_CTXT|TM_PRIM|0,
      xe_utf8str (pctxt, pvalue->command, ASN1IMPL));
   if (ll < 0) return LOG_RTERR (pctxt, ll);
   ll1 += ll;

   ll0 += ll1;

   if (tagging == ASN1EXPL)
      ll0 = xe_tag_len (pctxt, TM_UNIV|TM_CONS|16, ll0);

   return (ll0);
}

int XmlEnc_Command (OSCTXT* pctxt, Command* pvalue, 
   const OSUTF8CHAR* elemName, const OSUTF8CHAR* nsPrefix)
{
   int stat = 0;

   if (0 != elemName) {
      stat = rtXmlEncStartElement (pctxt, elemName, nsPrefix, FALSE);
      if (stat != 0) return LOG_RTERR (pctxt, stat);
   }

   /* add attributes */

   OSRTSAFEMEMCPY (pctxt, OSUTF8(" ns9:command=\""), 14);

   stat = rtXmlEncUTF8Str (pctxt, pvalue->command, 0, 0);
   if (stat != 0) return LOG_RTERR (pctxt, stat);

   OSRTSAFEPUTCHAR (pctxt, '\"');

   if (pvalue->m.idPresent) {
      OSRTSAFEMEMCPY (pctxt, OSUTF8(" ns9:id=\""), 9);

      stat = rtXmlEncUTF8Str (pctxt, pvalue->id, 0, 0);
      if (stat != 0) return LOG_RTERR (pctxt, stat);

      OSRTSAFEPUTCHAR (pctxt, '\"');
   }

   if (pvalue->m.sub_itemPresent) {
      OSRTSAFEMEMCPY (pctxt, OSUTF8(" ns9:sub-item=\""), 15);

      stat = rtXmlEncUTF8Str (pctxt, pvalue->sub_item, 0, 0);
      if (stat != 0) return LOG_RTERR (pctxt, stat);

      OSRTSAFEPUTCHAR (pctxt, '\"');
   }

   if (pvalue->m.group_idPresent) {
      OSRTSAFEMEMCPY (pctxt, OSUTF8(" ns10:group-id=\""), 16);

      stat = XmlEnc_Ns10_Group_id (pctxt, pvalue->group_id, 0, 0);
      if (stat != 0) return LOG_RTERR (pctxt, stat);

      OSRTSAFEPUTCHAR (pctxt, '"');
   }

   if (pvalue->m.master_elementPresent) {
      OSRTSAFEMEMCPY (pctxt, OSUTF8(" ns10:master-element=\""), 22);

      stat = XmlEnc_Ns10_Master_element (pctxt, pvalue->master_element, 0, 0);
      if (stat != 0) return LOG_RTERR (pctxt, stat);

      OSRTSAFEPUTCHAR (pctxt, '"');
   }

   if (pvalue->m.node_typePresent) {
      OSRTSAFEMEMCPY (pctxt, OSUTF8(" ns10:node-type=\""), 17);

      if(pvalue->node_type < 0 || pvalue->node_type > 6)
         return LOG_RTERR (pctxt, RTERR_INVENUM);

      stat = XmlEnc_Ns10_Node_type (pctxt, pvalue->node_type, 0, 0);
      if (stat != 0) return LOG_RTERR (pctxt, stat);

      OSRTSAFEPUTCHAR (pctxt, '"');
   }

   if (pvalue->m.preset_classPresent) {
      OSRTSAFEMEMCPY (pctxt, OSUTF8(" ns10:preset-class=\""), 20);

      if(pvalue->preset_class < 0 || pvalue->preset_class > 6)
         return LOG_RTERR (pctxt, RTERR_INVENUM);

      stat = XmlEnc_Ns10_Preset_class (pctxt, pvalue->preset_class, 0, 0);
      if (stat != 0) return LOG_RTERR (pctxt, stat);

      OSRTSAFEPUTCHAR (pctxt, '"');
   }

   if (pvalue->m.preset_idPresent) {
      OSRTSAFEMEMCPY (pctxt, OSUTF8(" ns10:preset-id=\""), 17);

      stat = XmlEnc_Ns10_Preset_id (pctxt, pvalue->preset_id, 0, 0);
      if (stat != 0) return LOG_RTERR (pctxt, stat);

      OSRTSAFEPUTCHAR (pctxt, '"');
   }

   if (pvalue->m.preset_sub_typePresent) {
      OSRTSAFEMEMCPY (pctxt, OSUTF8(" ns10:preset-sub-type=\""), 23);

      stat = XmlEnc_Ns10_Preset_sub_type (pctxt, pvalue->preset_sub_type
         , 0, 0);
      if (stat != 0) return LOG_RTERR (pctxt, stat);

      OSRTSAFEPUTCHAR (pctxt, '"');
   }

   if (pvalue->m.beginPresent) {
      OSRTSAFEMEMCPY (pctxt, OSUTF8(" ns11:begin=\""), 13);

      stat = XmlEnc_Ns11_Begin (pctxt, pvalue->begin, 0, 0);
      if (stat != 0) return LOG_RTERR (pctxt, stat);

      OSRTSAFEPUTCHAR (pctxt, '"');
   }

   if (pvalue->m.endPresent) {
      OSRTSAFEMEMCPY (pctxt, OSUTF8(" ns11:end=\""), 11);

      stat = XmlEnc_Ns11_End (pctxt, pvalue->end, 0, 0);
      if (stat != 0) return LOG_RTERR (pctxt, stat);

      OSRTSAFEPUTCHAR (pctxt, '"');
   }

   if (pvalue->m.targetElementPresent) {
      OSRTSAFEMEMCPY (pctxt, OSUTF8(" ns11:targetElement=\""), 21);

      stat = XmlEnc_Ns11_TargetElement (pctxt, pvalue->targetElement, 0, 0);
      if (stat != 0) return LOG_RTERR (pctxt, stat);

      OSRTSAFEPUTCHAR (pctxt, '"');
   }

   OSRTSAFEPUTCHAR (pctxt, '>');
   pctxt->flags &= ~OSTERMSTART;
   pctxt->state = OSXMLSTART;

   { const OSUTF8CHAR* savedPrefix = nsPrefix;
   nsPrefix = rtXmlNSGetPrefix (pctxt, OSUTF8(
      "urn:oasis:names:tc:opendocument:xmlns:animation:1.0"));

   /* encode param_list */

   { const OSUTF8CHAR* savedPrefix = nsPrefix;
   nsPrefix = rtXmlNSGetPrefix (pctxt, OSUTF8(
      "urn:oasis:names:tc:opendocument:xmlns:animation:1.0"));

   { OSRTDListNode* pnode = pvalue->param_list.head;
   while (0 != pnode) {
      stat = XmlEnc_Param (pctxt, ((Param*)pnode->data)
         , OSUTF8("param"), nsPrefix);
      if (stat != 0) return LOG_RTERR (pctxt, stat);
      pnode = pnode->next;
   }}
   nsPrefix = savedPrefix;
   }

   nsPrefix = savedPrefix;
   }

   stat = rtXmlEncEndElement (pctxt, elemName, nsPrefix);
   if (stat != 0) return LOG_RTERR (pctxt, stat);

   return (stat);
}

/**************************************************************/
/*                                                            */
/*  Iterate_element                                           */
/*                                                            */
/**************************************************************/

EXTERN int asn1E_Iterate_element (OSCTXT* pctxt,
   Iterate_element *pvalue, ASN1TagType tagging)
{
   int ll;
   int ll0 = 0;
   int ll1 = 0;

   ll0 = 0;
   switch (pvalue->t)
   {
      case 1:
         ll = xe_tag_len (pctxt, TM_CTXT|TM_CONS|0,
            asn1E_Animate (pctxt, pvalue->u.animate, ASN1IMPL));
         if (ll < 0) return LOG_RTERR (pctxt, ll);
         ll1 += ll;
         break;

      case 2:
         ll = xe_tag_len (pctxt, TM_CTXT|TM_CONS|1,
            asn1E_Set (pctxt, pvalue->u.set, ASN1IMPL));
         if (ll < 0) return LOG_RTERR (pctxt, ll);
         ll1 += ll;
         break;

      case 3:
         ll = xe_tag_len (pctxt, TM_CTXT|TM_CONS|2,
            asn1E_AnimateMotion (pctxt, pvalue->u.animateMotion, ASN1IMPL));
         if (ll < 0) return LOG_RTERR (pctxt, ll);
         ll1 += ll;
         break;

      case 4:
         ll = xe_tag_len (pctxt, TM_CTXT|TM_CONS|3,
            asn1E_AnimateColor (pctxt, pvalue->u.animateColor, ASN1IMPL));
         if (ll < 0) return LOG_RTERR (pctxt, ll);
         ll1 += ll;
         break;

      case 5:
         ll = xe_tag_len (pctxt, TM_CTXT|TM_CONS|4,
            asn1E_AnimateTransform (pctxt, pvalue->u.animateTransform, ASN1IMPL));
         if (ll < 0) return LOG_RTERR (pctxt, ll);
         ll1 += ll;
         break;

      case 6:
         ll = xe_tag_len (pctxt, TM_CTXT|TM_CONS|5,
            asn1E_TransitionFilter (pctxt, pvalue->u.transitionFilter, ASN1IMPL));
         if (ll < 0) return LOG_RTERR (pctxt, ll);
         ll1 += ll;
         break;

      case 7:
         ll = xe_tag_len (pctxt, TM_CTXT|TM_CONS|6,
            asn1E_Par (pctxt, (Par*)pvalue->u.par, ASN1IMPL));
         if (ll < 0) return LOG_RTERR (pctxt, ll);
         ll1 += ll;
         break;

      case 8:
         ll = xe_tag_len (pctxt, TM_CTXT|TM_CONS|7,
            asn1E_Seq (pctxt, pvalue->u.seq, ASN1IMPL));
         if (ll < 0) return LOG_RTERR (pctxt, ll);
         ll1 += ll;
         break;

      case 9:
         ll = xe_tag_len (pctxt, TM_CTXT|TM_CONS|8,
            asn1E_Iterate (pctxt, (Iterate*)pvalue->u.iterate, ASN1IMPL));
         if (ll < 0) return LOG_RTERR (pctxt, ll);
         ll1 += ll;
         break;

      case 10:
         ll = xe_tag_len (pctxt, TM_CTXT|TM_CONS|9,
            asn1E_Audio (pctxt, pvalue->u.audio, ASN1IMPL));
         if (ll < 0) return LOG_RTERR (pctxt, ll);
         ll1 += ll;
         break;

      case 11:
         ll = xe_tag_len (pctxt, TM_CTXT|TM_CONS|10,
            asn1E_Command (pctxt, pvalue->u.command, ASN1IMPL));
         if (ll < 0) return LOG_RTERR (pctxt, ll);
         ll1 += ll;
         break;

      default:
         return LOG_RTERR (pctxt, RTERR_INVOPT);
   }
   ll0 += ll1;

   return (ll0);
}

int XmlEnc_Iterate_element (OSCTXT* pctxt, Iterate_element* pvalue, 
   const OSUTF8CHAR* elemName, const OSUTF8CHAR* nsPrefix)
{
   int stat = 0;

   if (0 != elemName) {
      stat = rtXmlEncStartElement (pctxt, elemName, nsPrefix, TRUE);
      if (stat != 0) return LOG_RTERR (pctxt, stat);
   }

   { const OSUTF8CHAR* savedPrefix = nsPrefix;
   nsPrefix = rtXmlNSGetPrefix (pctxt, OSUTF8(
      "urn:oasis:names:tc:opendocument:xmlns:animation:1.0"));

   switch (pvalue->t)
   {
      case 1:
         /* encode animate */

         stat = XmlEnc_Animate (pctxt, pvalue->u.animate
            , OSUTF8("animate"), nsPrefix);
         if (stat != 0) return LOG_RTERR (pctxt, stat);

         break;

      case 2:
         /* encode set */

         stat = XmlEnc_Set (pctxt, pvalue->u.set, OSUTF8("set"), nsPrefix);
         if (stat != 0) return LOG_RTERR (pctxt, stat);

         break;

      case 3:
         /* encode animateMotion */

         stat = XmlEnc_AnimateMotion (pctxt, pvalue->u.animateMotion
            , OSUTF8("animateMotion"), nsPrefix);
         if (stat != 0) return LOG_RTERR (pctxt, stat);

         break;

      case 4:
         /* encode animateColor */

         stat = XmlEnc_AnimateColor (pctxt, pvalue->u.animateColor
            , OSUTF8("animateColor"), nsPrefix);
         if (stat != 0) return LOG_RTERR (pctxt, stat);

         break;

      case 5:
         /* encode animateTransform */

         stat = XmlEnc_AnimateTransform (pctxt, pvalue->u.animateTransform
            , OSUTF8("animateTransform"), nsPrefix);
         if (stat != 0) return LOG_RTERR (pctxt, stat);

         break;

      case 6:
         /* encode transitionFilter */

         stat = XmlEnc_TransitionFilter (pctxt, pvalue->u.transitionFilter
            , OSUTF8("transitionFilter"), nsPrefix);
         if (stat != 0) return LOG_RTERR (pctxt, stat);

         break;

      case 7:
         /* encode par */

         stat = XmlEnc_Par (pctxt, pvalue->u.par, OSUTF8("par"), nsPrefix);
         if (stat != 0) return LOG_RTERR (pctxt, stat);

         break;

      case 8:
         /* encode seq */

         stat = XmlEnc_Seq (pctxt, pvalue->u.seq, OSUTF8("seq"), nsPrefix);
         if (stat != 0) return LOG_RTERR (pctxt, stat);

         break;

      case 9:
         /* encode iterate */

         stat = XmlEnc_Iterate (pctxt, pvalue->u.iterate
            , OSUTF8("iterate"), nsPrefix);
         if (stat != 0) return LOG_RTERR (pctxt, stat);

         break;

      case 10:
         /* encode audio */

         stat = XmlEnc_Audio (pctxt, pvalue->u.audio
            , OSUTF8("audio"), nsPrefix);
         if (stat != 0) return LOG_RTERR (pctxt, stat);

         break;

      case 11:
         /* encode command */

         stat = XmlEnc_Command (pctxt, pvalue->u.command
            , OSUTF8("command"), nsPrefix);
         if (stat != 0) return LOG_RTERR (pctxt, stat);

         break;

      default: {
         char buf[40];
         os_snprintf (buf, 40, "%d", pvalue->t);
         return LOG_RTERRNEW1 (pctxt, RTERR_INVOPT, 
            rtxErrAddStrParm (pctxt, buf));
      }
   }
   nsPrefix = savedPrefix;
   }

   stat = rtXmlEncEndElement (pctxt, elemName, nsPrefix);
   if (stat != 0) return LOG_RTERR (pctxt, stat);

   return (stat);
}

/**************************************************************/
/*                                                            */
/*  Iterate                                                   */
/*                                                            */
/**************************************************************/

EXTERN int asn1E_Iterate (OSCTXT* pctxt,
   Iterate *pvalue, ASN1TagType tagging)
{
   int ll;
   int ll0 = 0;
   int ll1 = 0;
   OSRTDListNode* pnode2;
   int ll2 = 0;

   /* encode choice_list */

   pnode2 = pvalue->choice_list.tail;
   while (0 != pnode2) {
      ll = asn1E_Iterate_element (pctxt, ((Iterate_element*)pnode2->data), ASN1EXPL);
      if (ll < 0) return LOG_RTERR (pctxt, ll);
      ll2 += ll;

      pnode2 = pnode2->prev;
   }
   ll = xe_tag_len (pctxt, TM_CTXT|TM_CONS|23, ll2);
   if (ll < 0) return LOG_RTERR (pctxt, ll);
   else { ll1 += ll; ll2 = 0; }

   /* encode targetElement */

   if (pvalue->m.targetElementPresent) {
      ll = xe_tag_len (pctxt, TM_CTXT|TM_PRIM|22,
         asn1E_Ns11_TargetElement (pctxt, pvalue->targetElement, ASN1IMPL));
      if (ll < 0) return LOG_RTERR (pctxt, ll);
      ll1 += ll;
   }
   /* encode restartDefault */

   if (pvalue->m.restartDefaultPresent) {
      if(pvalue->restartDefault < 0 || pvalue->restartDefault > 3)
         return LOG_RTERR (pctxt, RTERR_INVENUM);

      ll = xe_tag_len (pctxt, TM_CTXT|TM_PRIM|21,
         asn1E_Ns11_RestartDefault (pctxt, &pvalue->restartDefault, ASN1IMPL));
      if (ll < 0) return LOG_RTERR (pctxt, ll);
      ll1 += ll;
   }
   /* encode restart */

   if (pvalue->m.restartPresent) {
      if(pvalue->restart < 0 || pvalue->restart > 3)
         return LOG_RTERR (pctxt, RTERR_INVENUM);

      ll = xe_tag_len (pctxt, TM_CTXT|TM_PRIM|20,
         asn1E_Ns11_Restart (pctxt, &pvalue->restart, ASN1IMPL));
      if (ll < 0) return LOG_RTERR (pctxt, ll);
      ll1 += ll;
   }
   /* encode repeatDur */

   if (pvalue->m.repeatDurPresent) {
      ll = xe_tag_len (pctxt, TM_CTXT|TM_PRIM|19,
         asn1E_Ns11_RepeatDur (pctxt, pvalue->repeatDur, ASN1IMPL));
      if (ll < 0) return LOG_RTERR (pctxt, ll);
      ll1 += ll;
   }
   /* encode repeatCount */

   if (pvalue->m.repeatCountPresent) {
      ll = xe_tag_len (pctxt, TM_CTXT|TM_PRIM|18,
         asn1E_Ns11_RepeatCount (pctxt, &pvalue->repeatCount, ASN1IMPL));
      if (ll < 0) return LOG_RTERR (pctxt, ll);
      ll1 += ll;
   }
   /* encode fillDefault */

   if (pvalue->m.fillDefaultPresent) {
      if(pvalue->fillDefault < 0 || pvalue->fillDefault > 5)
         return LOG_RTERR (pctxt, RTERR_INVENUM);

      ll = xe_tag_len (pctxt, TM_CTXT|TM_PRIM|17,
         asn1E_Ns11_FillDefault (pctxt, &pvalue->fillDefault, ASN1IMPL));
      if (ll < 0) return LOG_RTERR (pctxt, ll);
      ll1 += ll;
   }
   /* encode fill */

   if (pvalue->m.fillPresent) {
      if(pvalue->fill < 0 || pvalue->fill > 5)
         return LOG_RTERR (pctxt, RTERR_INVENUM);

      ll = xe_tag_len (pctxt, TM_CTXT|TM_PRIM|16,
         asn1E_Ns11_Fill (pctxt, &pvalue->fill, ASN1IMPL));
      if (ll < 0) return LOG_RTERR (pctxt, ll);
      ll1 += ll;
   }
   /* encode endsync */

   if (pvalue->m.endsyncPresent) {
      if(pvalue->endsync < 0 || pvalue->endsync > 3)
         return LOG_RTERR (pctxt, RTERR_INVENUM);

      ll = xe_tag_len (pctxt, TM_CTXT|TM_PRIM|15,
         asn1E_Ns11_Endsync (pctxt, &pvalue->endsync, ASN1IMPL));
      if (ll < 0) return LOG_RTERR (pctxt, ll);
      ll1 += ll;
   }
   /* encode end */

   if (pvalue->m.endPresent) {
      ll = xe_tag_len (pctxt, TM_CTXT|TM_PRIM|14,
         asn1E_Ns11_End (pctxt, pvalue->end, ASN1IMPL));
      if (ll < 0) return LOG_RTERR (pctxt, ll);
      ll1 += ll;
   }
   /* encode dur */

   if (pvalue->m.durPresent) {
      ll = xe_tag_len (pctxt, TM_CTXT|TM_PRIM|13,
         asn1E_Ns11_Dur (pctxt, pvalue->dur, ASN1IMPL));
      if (ll < 0) return LOG_RTERR (pctxt, ll);
      ll1 += ll;
   }
   /* encode decelerate */

   if (pvalue->m.deceleratePresent) {
      ll = xe_tag_len (pctxt, TM_CTXT|TM_PRIM|12,
         asn1E_Ns11_Decelerate (pctxt, &pvalue->decelerate, ASN1IMPL));
      if (ll < 0) return LOG_RTERR (pctxt, ll);
      ll1 += ll;
   }
   /* encode begin */

   if (pvalue->m.beginPresent) {
      ll = xe_tag_len (pctxt, TM_CTXT|TM_PRIM|11,
         asn1E_Ns11_Begin (pctxt, pvalue->begin, ASN1IMPL));
      if (ll < 0) return LOG_RTERR (pctxt, ll);
      ll1 += ll;
   }
   /* encode autoReverse */

   if (pvalue->m.autoReversePresent) {
      if(pvalue->autoReverse < 0 || pvalue->autoReverse > 1)
         return LOG_RTERR (pctxt, RTERR_INVENUM);

      ll = xe_tag_len (pctxt, TM_CTXT|TM_PRIM|10,
         asn1E_Ns11_AutoReverse (pctxt, &pvalue->autoReverse, ASN1IMPL));
      if (ll < 0) return LOG_RTERR (pctxt, ll);
      ll1 += ll;
   }
   /* encode accelerate */

   if (pvalue->m.acceleratePresent) {
      ll = xe_tag_len (pctxt, TM_CTXT|TM_PRIM|9,
         asn1E_Ns11_Accelerate (pctxt, &pvalue->accelerate, ASN1IMPL));
      if (ll < 0) return LOG_RTERR (pctxt, ll);
      ll1 += ll;
   }
   /* encode preset_sub_type */

   if (pvalue->m.preset_sub_typePresent) {
      ll = xe_tag_len (pctxt, TM_CTXT|TM_PRIM|8,
         asn1E_Ns10_Preset_sub_type (pctxt, (Ns10_Preset_sub_type)pvalue->preset_sub_type, ASN1IMPL));
      if (ll < 0) return LOG_RTERR (pctxt, ll);
      ll1 += ll;
   }
   /* encode preset_id */

   if (pvalue->m.preset_idPresent) {
      ll = xe_tag_len (pctxt, TM_CTXT|TM_PRIM|7,
         asn1E_Ns10_Preset_id (pctxt, (Ns10_Preset_id)pvalue->preset_id, ASN1IMPL));
      if (ll < 0) return LOG_RTERR (pctxt, ll);
      ll1 += ll;
   }
   /* encode preset_class */

   if (pvalue->m.preset_classPresent) {
      if(pvalue->preset_class < 0 || pvalue->preset_class > 6)
         return LOG_RTERR (pctxt, RTERR_INVENUM);

      ll = xe_tag_len (pctxt, TM_CTXT|TM_PRIM|6,
         asn1E_Ns10_Preset_class (pctxt, (Ns10_Preset_class*)&pvalue->preset_class, ASN1IMPL));
      if (ll < 0) return LOG_RTERR (pctxt, ll);
      ll1 += ll;
   }
   /* encode node_type */

   if (pvalue->m.node_typePresent) {
      if(pvalue->node_type < 0 || pvalue->node_type > 6)
         return LOG_RTERR (pctxt, RTERR_INVENUM);

      ll = xe_tag_len (pctxt, TM_CTXT|TM_PRIM|5,
         asn1E_Ns10_Node_type (pctxt, (Ns10_Node_type*)&pvalue->node_type, ASN1IMPL));
      if (ll < 0) return LOG_RTERR (pctxt, ll);
      ll1 += ll;
   }
   /* encode master_element */

   if (pvalue->m.master_elementPresent) {
      ll = xe_tag_len (pctxt, TM_CTXT|TM_PRIM|4,
         asn1E_Ns10_Master_element (pctxt, (Ns10_Master_element)pvalue->master_element, ASN1IMPL));
      if (ll < 0) return LOG_RTERR (pctxt, ll);
      ll1 += ll;
   }
   /* encode group_id */

   if (pvalue->m.group_idPresent) {
      ll = xe_tag_len (pctxt, TM_CTXT|TM_PRIM|3,
         asn1E_Ns10_Group_id (pctxt, (Ns10_Group_id)pvalue->group_id, ASN1IMPL));
      if (ll < 0) return LOG_RTERR (pctxt, ll);
      ll1 += ll;
   }
   /* encode iterate_type */

   if (pvalue->m.iterate_typePresent) {
      ll = xe_tag_len (pctxt, TM_CTXT|TM_PRIM|2,
         xe_utf8str (pctxt, pvalue->iterate_type, ASN1IMPL));
      if (ll < 0) return LOG_RTERR (pctxt, ll);
      ll1 += ll;
   }
   /* encode iterate_interval */

   if (pvalue->m.iterate_intervalPresent) {
      ll = xe_tag_len (pctxt, TM_CTXT|TM_PRIM|1,
         xe_utf8str (pctxt, pvalue->iterate_interval, ASN1IMPL));
      if (ll < 0) return LOG_RTERR (pctxt, ll);
      ll1 += ll;
   }
   /* encode id */

   if (pvalue->m.idPresent) {
      ll = xe_tag_len (pctxt, TM_CTXT|TM_PRIM|0,
         xe_utf8str (pctxt, pvalue->id, ASN1IMPL));
      if (ll < 0) return LOG_RTERR (pctxt, ll);
      ll1 += ll;
   }
   ll0 += ll1;

   if (tagging == ASN1EXPL)
      ll0 = xe_tag_len (pctxt, TM_UNIV|TM_CONS|16, ll0);

   return (ll0);
}

int XmlEnc_Iterate (OSCTXT* pctxt, Iterate* pvalue, 
   const OSUTF8CHAR* elemName, const OSUTF8CHAR* nsPrefix)
{
   int stat = 0;

   if (0 != elemName) {
      stat = rtXmlEncStartElement (pctxt, elemName, nsPrefix, FALSE);
      if (stat != 0) return LOG_RTERR (pctxt, stat);
   }

   /* add attributes */

   if (pvalue->m.idPresent) {
      OSRTSAFEMEMCPY (pctxt, OSUTF8(" ns9:id=\""), 9);

      stat = rtXmlEncUTF8Str (pctxt, pvalue->id, 0, 0);
      if (stat != 0) return LOG_RTERR (pctxt, stat);

      OSRTSAFEPUTCHAR (pctxt, '\"');
   }

   if (pvalue->m.iterate_intervalPresent) {
      OSRTSAFEMEMCPY (pctxt, OSUTF8(" ns9:iterate-interval=\""), 23);

      stat = rtXmlEncUTF8Str (pctxt, pvalue->iterate_interval, 0, 0);
      if (stat != 0) return LOG_RTERR (pctxt, stat);

      OSRTSAFEPUTCHAR (pctxt, '\"');
   }

   if (pvalue->m.iterate_typePresent) {
      OSRTSAFEMEMCPY (pctxt, OSUTF8(" ns9:iterate-type=\""), 19);

      stat = rtXmlEncUTF8Str (pctxt, pvalue->iterate_type, 0, 0);
      if (stat != 0) return LOG_RTERR (pctxt, stat);

      OSRTSAFEPUTCHAR (pctxt, '\"');
   }

   if (pvalue->m.group_idPresent) {
      OSRTSAFEMEMCPY (pctxt, OSUTF8(" ns10:group-id=\""), 16);

      stat = XmlEnc_Ns10_Group_id (pctxt, pvalue->group_id, 0, 0);
      if (stat != 0) return LOG_RTERR (pctxt, stat);

      OSRTSAFEPUTCHAR (pctxt, '"');
   }

   if (pvalue->m.master_elementPresent) {
      OSRTSAFEMEMCPY (pctxt, OSUTF8(" ns10:master-element=\""), 22);

      stat = XmlEnc_Ns10_Master_element (pctxt, pvalue->master_element, 0, 0);
      if (stat != 0) return LOG_RTERR (pctxt, stat);

      OSRTSAFEPUTCHAR (pctxt, '"');
   }

   if (pvalue->m.node_typePresent) {
      OSRTSAFEMEMCPY (pctxt, OSUTF8(" ns10:node-type=\""), 17);

      if(pvalue->node_type < 0 || pvalue->node_type > 6)
         return LOG_RTERR (pctxt, RTERR_INVENUM);

      stat = XmlEnc_Ns10_Node_type (pctxt, pvalue->node_type, 0, 0);
      if (stat != 0) return LOG_RTERR (pctxt, stat);

      OSRTSAFEPUTCHAR (pctxt, '"');
   }

   if (pvalue->m.preset_classPresent) {
      OSRTSAFEMEMCPY (pctxt, OSUTF8(" ns10:preset-class=\""), 20);

      if(pvalue->preset_class < 0 || pvalue->preset_class > 6)
         return LOG_RTERR (pctxt, RTERR_INVENUM);

      stat = XmlEnc_Ns10_Preset_class (pctxt, pvalue->preset_class, 0, 0);
      if (stat != 0) return LOG_RTERR (pctxt, stat);

      OSRTSAFEPUTCHAR (pctxt, '"');
   }

   if (pvalue->m.preset_idPresent) {
      OSRTSAFEMEMCPY (pctxt, OSUTF8(" ns10:preset-id=\""), 17);

      stat = XmlEnc_Ns10_Preset_id (pctxt, pvalue->preset_id, 0, 0);
      if (stat != 0) return LOG_RTERR (pctxt, stat);

      OSRTSAFEPUTCHAR (pctxt, '"');
   }

   if (pvalue->m.preset_sub_typePresent) {
      OSRTSAFEMEMCPY (pctxt, OSUTF8(" ns10:preset-sub-type=\""), 23);

      stat = XmlEnc_Ns10_Preset_sub_type (pctxt, pvalue->preset_sub_type
         , 0, 0);
      if (stat != 0) return LOG_RTERR (pctxt, stat);

      OSRTSAFEPUTCHAR (pctxt, '"');
   }

   if (pvalue->m.acceleratePresent) {
      OSRTSAFEMEMCPY (pctxt, OSUTF8(" ns11:accelerate=\""), 18);

      stat = XmlEnc_Ns11_Accelerate (pctxt, pvalue->accelerate, 0, 0);
      if (stat != 0) return LOG_RTERR (pctxt, stat);

      OSRTSAFEPUTCHAR (pctxt, '"');
   }

   if (pvalue->m.autoReversePresent) {
      OSRTSAFEMEMCPY (pctxt, OSUTF8(" ns11:autoReverse=\""), 19);

      if(pvalue->autoReverse < 0 || pvalue->autoReverse > 1)
         return LOG_RTERR (pctxt, RTERR_INVENUM);

      stat = XmlEnc_Ns11_AutoReverse (pctxt, pvalue->autoReverse, 0, 0);
      if (stat != 0) return LOG_RTERR (pctxt, stat);

      OSRTSAFEPUTCHAR (pctxt, '"');
   }

   if (pvalue->m.beginPresent) {
      OSRTSAFEMEMCPY (pctxt, OSUTF8(" ns11:begin=\""), 13);

      stat = XmlEnc_Ns11_Begin (pctxt, pvalue->begin, 0, 0);
      if (stat != 0) return LOG_RTERR (pctxt, stat);

      OSRTSAFEPUTCHAR (pctxt, '"');
   }

   if (pvalue->m.deceleratePresent) {
      OSRTSAFEMEMCPY (pctxt, OSUTF8(" ns11:decelerate=\""), 18);

      stat = XmlEnc_Ns11_Decelerate (pctxt, pvalue->decelerate, 0, 0);
      if (stat != 0) return LOG_RTERR (pctxt, stat);

      OSRTSAFEPUTCHAR (pctxt, '"');
   }

   if (pvalue->m.durPresent) {
      OSRTSAFEMEMCPY (pctxt, OSUTF8(" ns11:dur=\""), 11);

      stat = XmlEnc_Ns11_Dur (pctxt, pvalue->dur, 0, 0);
      if (stat != 0) return LOG_RTERR (pctxt, stat);

      OSRTSAFEPUTCHAR (pctxt, '"');
   }

   if (pvalue->m.endPresent) {
      OSRTSAFEMEMCPY (pctxt, OSUTF8(" ns11:end=\""), 11);

      stat = XmlEnc_Ns11_End (pctxt, pvalue->end, 0, 0);
      if (stat != 0) return LOG_RTERR (pctxt, stat);

      OSRTSAFEPUTCHAR (pctxt, '"');
   }

   if (pvalue->m.endsyncPresent) {
      OSRTSAFEMEMCPY (pctxt, OSUTF8(" ns11:endsync=\""), 15);

      if(pvalue->endsync < 0 || pvalue->endsync > 3)
         return LOG_RTERR (pctxt, RTERR_INVENUM);

      stat = XmlEnc_Ns11_Endsync (pctxt, pvalue->endsync, 0, 0);
      if (stat != 0) return LOG_RTERR (pctxt, stat);

      OSRTSAFEPUTCHAR (pctxt, '"');
   }

   if (pvalue->m.fillPresent) {
      OSRTSAFEMEMCPY (pctxt, OSUTF8(" ns11:fill=\""), 12);

      if(pvalue->fill < 0 || pvalue->fill > 5)
         return LOG_RTERR (pctxt, RTERR_INVENUM);

      stat = XmlEnc_Ns11_Fill (pctxt, pvalue->fill, 0, 0);
      if (stat != 0) return LOG_RTERR (pctxt, stat);

      OSRTSAFEPUTCHAR (pctxt, '"');
   }

   if (pvalue->m.fillDefaultPresent) {
      OSRTSAFEMEMCPY (pctxt, OSUTF8(" ns11:fillDefault=\""), 19);

      if(pvalue->fillDefault < 0 || pvalue->fillDefault > 5)
         return LOG_RTERR (pctxt, RTERR_INVENUM);

      stat = XmlEnc_Ns11_FillDefault (pctxt, pvalue->fillDefault, 0, 0);
      if (stat != 0) return LOG_RTERR (pctxt, stat);

      OSRTSAFEPUTCHAR (pctxt, '"');
   }

   if (pvalue->m.repeatCountPresent) {
      OSRTSAFEMEMCPY (pctxt, OSUTF8(" ns11:repeatCount=\""), 19);

      stat = XmlEnc_Ns11_RepeatCount (pctxt, pvalue->repeatCount, 0, 0);
      if (stat != 0) return LOG_RTERR (pctxt, stat);

      OSRTSAFEPUTCHAR (pctxt, '"');
   }

   if (pvalue->m.repeatDurPresent) {
      OSRTSAFEMEMCPY (pctxt, OSUTF8(" ns11:repeatDur=\""), 17);

      stat = XmlEnc_Ns11_RepeatDur (pctxt, pvalue->repeatDur, 0, 0);
      if (stat != 0) return LOG_RTERR (pctxt, stat);

      OSRTSAFEPUTCHAR (pctxt, '"');
   }

   if (pvalue->m.restartPresent) {
      OSRTSAFEMEMCPY (pctxt, OSUTF8(" ns11:restart=\""), 15);

      if(pvalue->restart < 0 || pvalue->restart > 3)
         return LOG_RTERR (pctxt, RTERR_INVENUM);

      stat = XmlEnc_Ns11_Restart (pctxt, pvalue->restart, 0, 0);
      if (stat != 0) return LOG_RTERR (pctxt, stat);

      OSRTSAFEPUTCHAR (pctxt, '"');
   }

   if (pvalue->m.restartDefaultPresent) {
      OSRTSAFEMEMCPY (pctxt, OSUTF8(" ns11:restartDefault=\""), 22);

      if(pvalue->restartDefault < 0 || pvalue->restartDefault > 3)
         return LOG_RTERR (pctxt, RTERR_INVENUM);

      stat = XmlEnc_Ns11_RestartDefault (pctxt, pvalue->restartDefault, 0, 0);
      if (stat != 0) return LOG_RTERR (pctxt, stat);

      OSRTSAFEPUTCHAR (pctxt, '"');
   }

   if (pvalue->m.targetElementPresent) {
      OSRTSAFEMEMCPY (pctxt, OSUTF8(" ns11:targetElement=\""), 21);

      stat = XmlEnc_Ns11_TargetElement (pctxt, pvalue->targetElement, 0, 0);
      if (stat != 0) return LOG_RTERR (pctxt, stat);

      OSRTSAFEPUTCHAR (pctxt, '"');
   }

   OSRTSAFEPUTCHAR (pctxt, '>');
   pctxt->flags &= ~OSTERMSTART;
   pctxt->state = OSXMLSTART;

   { const OSUTF8CHAR* savedPrefix = nsPrefix;
   nsPrefix = rtXmlNSGetPrefix (pctxt, OSUTF8(
      "urn:oasis:names:tc:opendocument:xmlns:animation:1.0"));

   /* encode choice_list */

   { const OSUTF8CHAR* savedPrefix = nsPrefix;
   nsPrefix = rtXmlNSGetPrefix (pctxt, OSUTF8(
      "urn:oasis:names:tc:opendocument:xmlns:animation:1.0"));

   { OSRTDListNode* pnode = pvalue->choice_list.head;
   while (0 != pnode) {
      stat = XmlEnc_Iterate_element (pctxt, ((Iterate_element*)pnode->data)
         , 0, nsPrefix);
      if (stat != 0) return LOG_RTERR (pctxt, stat);
      pnode = pnode->next;
   }}
   nsPrefix = savedPrefix;
   }

   nsPrefix = savedPrefix;
   }

   stat = rtXmlEncEndElement (pctxt, elemName, nsPrefix);
   if (stat != 0) return LOG_RTERR (pctxt, stat);

   return (stat);
}

/**************************************************************/
/*                                                            */
/*  Par_element                                               */
/*                                                            */
/**************************************************************/

EXTERN int asn1E_Par_element (OSCTXT* pctxt,
   Par_element *pvalue, ASN1TagType tagging)
{
   int ll;
   int ll0 = 0;
   int ll1 = 0;

   ll0 = 0;
   switch (pvalue->t)
   {
      case 1:
         ll = xe_tag_len (pctxt, TM_CTXT|TM_CONS|0,
            asn1E_Animate (pctxt, pvalue->u.animate, ASN1IMPL));
         if (ll < 0) return LOG_RTERR (pctxt, ll);
         ll1 += ll;
         break;

      case 2:
         ll = xe_tag_len (pctxt, TM_CTXT|TM_CONS|1,
            asn1E_Set (pctxt, pvalue->u.set, ASN1IMPL));
         if (ll < 0) return LOG_RTERR (pctxt, ll);
         ll1 += ll;
         break;

      case 3:
         ll = xe_tag_len (pctxt, TM_CTXT|TM_CONS|2,
            asn1E_AnimateMotion (pctxt, pvalue->u.animateMotion, ASN1IMPL));
         if (ll < 0) return LOG_RTERR (pctxt, ll);
         ll1 += ll;
         break;

      case 4:
         ll = xe_tag_len (pctxt, TM_CTXT|TM_CONS|3,
            asn1E_AnimateColor (pctxt, pvalue->u.animateColor, ASN1IMPL));
         if (ll < 0) return LOG_RTERR (pctxt, ll);
         ll1 += ll;
         break;

      case 5:
         ll = xe_tag_len (pctxt, TM_CTXT|TM_CONS|4,
            asn1E_AnimateTransform (pctxt, pvalue->u.animateTransform, ASN1IMPL));
         if (ll < 0) return LOG_RTERR (pctxt, ll);
         ll1 += ll;
         break;

      case 6:
         ll = xe_tag_len (pctxt, TM_CTXT|TM_CONS|5,
            asn1E_TransitionFilter (pctxt, pvalue->u.transitionFilter, ASN1IMPL));
         if (ll < 0) return LOG_RTERR (pctxt, ll);
         ll1 += ll;
         break;

      case 7:
         ll = xe_tag_len (pctxt, TM_CTXT|TM_CONS|6,
            asn1E_Par (pctxt, (Par*)pvalue->u.par, ASN1IMPL));
         if (ll < 0) return LOG_RTERR (pctxt, ll);
         ll1 += ll;
         break;

      case 8:
         ll = xe_tag_len (pctxt, TM_CTXT|TM_CONS|7,
            asn1E_Seq (pctxt, pvalue->u.seq, ASN1IMPL));
         if (ll < 0) return LOG_RTERR (pctxt, ll);
         ll1 += ll;
         break;

      case 9:
         ll = xe_tag_len (pctxt, TM_CTXT|TM_CONS|8,
            asn1E_Iterate (pctxt, pvalue->u.iterate, ASN1IMPL));
         if (ll < 0) return LOG_RTERR (pctxt, ll);
         ll1 += ll;
         break;

      case 10:
         ll = xe_tag_len (pctxt, TM_CTXT|TM_CONS|9,
            asn1E_Audio (pctxt, pvalue->u.audio, ASN1IMPL));
         if (ll < 0) return LOG_RTERR (pctxt, ll);
         ll1 += ll;
         break;

      case 11:
         ll = xe_tag_len (pctxt, TM_CTXT|TM_CONS|10,
            asn1E_Command (pctxt, pvalue->u.command, ASN1IMPL));
         if (ll < 0) return LOG_RTERR (pctxt, ll);
         ll1 += ll;
         break;

      default:
         return LOG_RTERR (pctxt, RTERR_INVOPT);
   }
   ll0 += ll1;

   return (ll0);
}

int XmlEnc_Par_element (OSCTXT* pctxt, Par_element* pvalue, 
   const OSUTF8CHAR* elemName, const OSUTF8CHAR* nsPrefix)
{
   int stat = 0;

   if (0 != elemName) {
      stat = rtXmlEncStartElement (pctxt, elemName, nsPrefix, TRUE);
      if (stat != 0) return LOG_RTERR (pctxt, stat);
   }

   { const OSUTF8CHAR* savedPrefix = nsPrefix;
   nsPrefix = rtXmlNSGetPrefix (pctxt, OSUTF8(
      "urn:oasis:names:tc:opendocument:xmlns:animation:1.0"));

   switch (pvalue->t)
   {
      case 1:
         /* encode animate */

         stat = XmlEnc_Animate (pctxt, pvalue->u.animate
            , OSUTF8("animate"), nsPrefix);
         if (stat != 0) return LOG_RTERR (pctxt, stat);

         break;

      case 2:
         /* encode set */

         stat = XmlEnc_Set (pctxt, pvalue->u.set, OSUTF8("set"), nsPrefix);
         if (stat != 0) return LOG_RTERR (pctxt, stat);

         break;

      case 3:
         /* encode animateMotion */

         stat = XmlEnc_AnimateMotion (pctxt, pvalue->u.animateMotion
            , OSUTF8("animateMotion"), nsPrefix);
         if (stat != 0) return LOG_RTERR (pctxt, stat);

         break;

      case 4:
         /* encode animateColor */

         stat = XmlEnc_AnimateColor (pctxt, pvalue->u.animateColor
            , OSUTF8("animateColor"), nsPrefix);
         if (stat != 0) return LOG_RTERR (pctxt, stat);

         break;

      case 5:
         /* encode animateTransform */

         stat = XmlEnc_AnimateTransform (pctxt, pvalue->u.animateTransform
            , OSUTF8("animateTransform"), nsPrefix);
         if (stat != 0) return LOG_RTERR (pctxt, stat);

         break;

      case 6:
         /* encode transitionFilter */

         stat = XmlEnc_TransitionFilter (pctxt, pvalue->u.transitionFilter
            , OSUTF8("transitionFilter"), nsPrefix);
         if (stat != 0) return LOG_RTERR (pctxt, stat);

         break;

      case 7:
         /* encode par */

         stat = XmlEnc_Par (pctxt, pvalue->u.par, OSUTF8("par"), nsPrefix);
         if (stat != 0) return LOG_RTERR (pctxt, stat);

         break;

      case 8:
         /* encode seq */

         stat = XmlEnc_Seq (pctxt, pvalue->u.seq, OSUTF8("seq"), nsPrefix);
         if (stat != 0) return LOG_RTERR (pctxt, stat);

         break;

      case 9:
         /* encode iterate */

         stat = XmlEnc_Iterate (pctxt, pvalue->u.iterate
            , OSUTF8("iterate"), nsPrefix);
         if (stat != 0) return LOG_RTERR (pctxt, stat);

         break;

      case 10:
         /* encode audio */

         stat = XmlEnc_Audio (pctxt, pvalue->u.audio
            , OSUTF8("audio"), nsPrefix);
         if (stat != 0) return LOG_RTERR (pctxt, stat);

         break;

      case 11:
         /* encode command */

         stat = XmlEnc_Command (pctxt, pvalue->u.command
            , OSUTF8("command"), nsPrefix);
         if (stat != 0) return LOG_RTERR (pctxt, stat);

         break;

      default: {
         char buf[40];
         os_snprintf (buf, 40, "%d", pvalue->t);
         return LOG_RTERRNEW1 (pctxt, RTERR_INVOPT, 
            rtxErrAddStrParm (pctxt, buf));
      }
   }
   nsPrefix = savedPrefix;
   }

   stat = rtXmlEncEndElement (pctxt, elemName, nsPrefix);
   if (stat != 0) return LOG_RTERR (pctxt, stat);

   return (stat);
}

/**************************************************************/
/*                                                            */
/*  Par                                                       */
/*                                                            */
/**************************************************************/

EXTERN int asn1E_Par (OSCTXT* pctxt,
   Par *pvalue, ASN1TagType tagging)
{
   int ll;
   int ll0 = 0;
   int ll1 = 0;
   OSRTDListNode* pnode2;
   int ll2 = 0;

   /* encode choice_list */

   pnode2 = pvalue->choice_list.tail;
   while (0 != pnode2) {
      ll = asn1E_Par_element (pctxt, ((Par_element*)pnode2->data), ASN1EXPL);
      if (ll < 0) return LOG_RTERR (pctxt, ll);
      ll2 += ll;

      pnode2 = pnode2->prev;
   }
   ll = xe_tag_len (pctxt, TM_CTXT|TM_CONS|20, ll2);
   if (ll < 0) return LOG_RTERR (pctxt, ll);
   else { ll1 += ll; ll2 = 0; }

   /* encode restartDefault */

   if (pvalue->m.restartDefaultPresent) {
      if(pvalue->restartDefault < 0 || pvalue->restartDefault > 3)
         return LOG_RTERR (pctxt, RTERR_INVENUM);

      ll = xe_tag_len (pctxt, TM_CTXT|TM_PRIM|19,
         asn1E_Ns11_RestartDefault (pctxt, &pvalue->restartDefault, ASN1IMPL));
      if (ll < 0) return LOG_RTERR (pctxt, ll);
      ll1 += ll;
   }
   /* encode restart */

   if (pvalue->m.restartPresent) {
      if(pvalue->restart < 0 || pvalue->restart > 3)
         return LOG_RTERR (pctxt, RTERR_INVENUM);

      ll = xe_tag_len (pctxt, TM_CTXT|TM_PRIM|18,
         asn1E_Ns11_Restart (pctxt, &pvalue->restart, ASN1IMPL));
      if (ll < 0) return LOG_RTERR (pctxt, ll);
      ll1 += ll;
   }
   /* encode repeatDur */

   if (pvalue->m.repeatDurPresent) {
      ll = xe_tag_len (pctxt, TM_CTXT|TM_PRIM|17,
         asn1E_Ns11_RepeatDur (pctxt, pvalue->repeatDur, ASN1IMPL));
      if (ll < 0) return LOG_RTERR (pctxt, ll);
      ll1 += ll;
   }
   /* encode repeatCount */

   if (pvalue->m.repeatCountPresent) {
      ll = xe_tag_len (pctxt, TM_CTXT|TM_PRIM|16,
         asn1E_Ns11_RepeatCount (pctxt, &pvalue->repeatCount, ASN1IMPL));
      if (ll < 0) return LOG_RTERR (pctxt, ll);
      ll1 += ll;
   }
   /* encode fillDefault */

   if (pvalue->m.fillDefaultPresent) {
      if(pvalue->fillDefault < 0 || pvalue->fillDefault > 5)
         return LOG_RTERR (pctxt, RTERR_INVENUM);

      ll = xe_tag_len (pctxt, TM_CTXT|TM_PRIM|15,
         asn1E_Ns11_FillDefault (pctxt, &pvalue->fillDefault, ASN1IMPL));
      if (ll < 0) return LOG_RTERR (pctxt, ll);
      ll1 += ll;
   }
   /* encode fill */

   if (pvalue->m.fillPresent) {
      if(pvalue->fill < 0 || pvalue->fill > 5)
         return LOG_RTERR (pctxt, RTERR_INVENUM);

      ll = xe_tag_len (pctxt, TM_CTXT|TM_PRIM|14,
         asn1E_Ns11_Fill (pctxt, &pvalue->fill, ASN1IMPL));
      if (ll < 0) return LOG_RTERR (pctxt, ll);
      ll1 += ll;
   }
   /* encode endsync */

   if (pvalue->m.endsyncPresent) {
      if(pvalue->endsync < 0 || pvalue->endsync > 3)
         return LOG_RTERR (pctxt, RTERR_INVENUM);

      ll = xe_tag_len (pctxt, TM_CTXT|TM_PRIM|13,
         asn1E_Ns11_Endsync (pctxt, &pvalue->endsync, ASN1IMPL));
      if (ll < 0) return LOG_RTERR (pctxt, ll);
      ll1 += ll;
   }
   /* encode end */

   if (pvalue->m.endPresent) {
      ll = xe_tag_len (pctxt, TM_CTXT|TM_PRIM|12,
         asn1E_Ns11_End (pctxt, pvalue->end, ASN1IMPL));
      if (ll < 0) return LOG_RTERR (pctxt, ll);
      ll1 += ll;
   }
   /* encode dur */

   if (pvalue->m.durPresent) {
      ll = xe_tag_len (pctxt, TM_CTXT|TM_PRIM|11,
         asn1E_Ns11_Dur (pctxt, pvalue->dur, ASN1IMPL));
      if (ll < 0) return LOG_RTERR (pctxt, ll);
      ll1 += ll;
   }
   /* encode decelerate */

   if (pvalue->m.deceleratePresent) {
      ll = xe_tag_len (pctxt, TM_CTXT|TM_PRIM|10,
         asn1E_Ns11_Decelerate (pctxt, &pvalue->decelerate, ASN1IMPL));
      if (ll < 0) return LOG_RTERR (pctxt, ll);
      ll1 += ll;
   }
   /* encode begin */

   if (pvalue->m.beginPresent) {
      ll = xe_tag_len (pctxt, TM_CTXT|TM_PRIM|9,
         asn1E_Ns11_Begin (pctxt, pvalue->begin, ASN1IMPL));
      if (ll < 0) return LOG_RTERR (pctxt, ll);
      ll1 += ll;
   }
   /* encode autoReverse */

   if (pvalue->m.autoReversePresent) {
      if(pvalue->autoReverse < 0 || pvalue->autoReverse > 1)
         return LOG_RTERR (pctxt, RTERR_INVENUM);

      ll = xe_tag_len (pctxt, TM_CTXT|TM_PRIM|8,
         asn1E_Ns11_AutoReverse (pctxt, &pvalue->autoReverse, ASN1IMPL));
      if (ll < 0) return LOG_RTERR (pctxt, ll);
      ll1 += ll;
   }
   /* encode accelerate */

   if (pvalue->m.acceleratePresent) {
      ll = xe_tag_len (pctxt, TM_CTXT|TM_PRIM|7,
         asn1E_Ns11_Accelerate (pctxt, &pvalue->accelerate, ASN1IMPL));
      if (ll < 0) return LOG_RTERR (pctxt, ll);
      ll1 += ll;
   }
   /* encode preset_sub_type */

   if (pvalue->m.preset_sub_typePresent) {
      ll = xe_tag_len (pctxt, TM_CTXT|TM_PRIM|6,
         asn1E_Ns10_Preset_sub_type (pctxt, (Ns10_Preset_sub_type)pvalue->preset_sub_type, ASN1IMPL));
      if (ll < 0) return LOG_RTERR (pctxt, ll);
      ll1 += ll;
   }
   /* encode preset_id */

   if (pvalue->m.preset_idPresent) {
      ll = xe_tag_len (pctxt, TM_CTXT|TM_PRIM|5,
         asn1E_Ns10_Preset_id (pctxt, (Ns10_Preset_id)pvalue->preset_id, ASN1IMPL));
      if (ll < 0) return LOG_RTERR (pctxt, ll);
      ll1 += ll;
   }
   /* encode preset_class */

   if (pvalue->m.preset_classPresent) {
      if(pvalue->preset_class < 0 || pvalue->preset_class > 6)
         return LOG_RTERR (pctxt, RTERR_INVENUM);

      ll = xe_tag_len (pctxt, TM_CTXT|TM_PRIM|4,
         asn1E_Ns10_Preset_class (pctxt, (Ns10_Preset_class*)&pvalue->preset_class, ASN1IMPL));
      if (ll < 0) return LOG_RTERR (pctxt, ll);
      ll1 += ll;
   }
   /* encode node_type */

   if (pvalue->m.node_typePresent) {
      if(pvalue->node_type < 0 || pvalue->node_type > 6)
         return LOG_RTERR (pctxt, RTERR_INVENUM);

      ll = xe_tag_len (pctxt, TM_CTXT|TM_PRIM|3,
         asn1E_Ns10_Node_type (pctxt, (Ns10_Node_type*)&pvalue->node_type, ASN1IMPL));
      if (ll < 0) return LOG_RTERR (pctxt, ll);
      ll1 += ll;
   }
   /* encode master_element */

   if (pvalue->m.master_elementPresent) {
      ll = xe_tag_len (pctxt, TM_CTXT|TM_PRIM|2,
         asn1E_Ns10_Master_element (pctxt, (Ns10_Master_element)pvalue->master_element, ASN1IMPL));
      if (ll < 0) return LOG_RTERR (pctxt, ll);
      ll1 += ll;
   }
   /* encode group_id */

   if (pvalue->m.group_idPresent) {
      ll = xe_tag_len (pctxt, TM_CTXT|TM_PRIM|1,
         asn1E_Ns10_Group_id (pctxt, (Ns10_Group_id)pvalue->group_id, ASN1IMPL));
      if (ll < 0) return LOG_RTERR (pctxt, ll);
      ll1 += ll;
   }
   /* encode id */

   if (pvalue->m.idPresent) {
      ll = xe_tag_len (pctxt, TM_CTXT|TM_PRIM|0,
         xe_utf8str (pctxt, pvalue->id, ASN1IMPL));
      if (ll < 0) return LOG_RTERR (pctxt, ll);
      ll1 += ll;
   }
   ll0 += ll1;

   if (tagging == ASN1EXPL)
      ll0 = xe_tag_len (pctxt, TM_UNIV|TM_CONS|16, ll0);

   return (ll0);
}

int XmlEnc_Par (OSCTXT* pctxt, Par* pvalue, const OSUTF8CHAR* elemName, 
   const OSUTF8CHAR* nsPrefix)
{
   int stat = 0;

   if (0 != elemName) {
      stat = rtXmlEncStartElement (pctxt, elemName, nsPrefix, FALSE);
      if (stat != 0) return LOG_RTERR (pctxt, stat);
   }

   /* add attributes */

   if (pvalue->m.idPresent) {
      OSRTSAFEMEMCPY (pctxt, OSUTF8(" ns9:id=\""), 9);

      stat = rtXmlEncUTF8Str (pctxt, pvalue->id, 0, 0);
      if (stat != 0) return LOG_RTERR (pctxt, stat);

      OSRTSAFEPUTCHAR (pctxt, '\"');
   }

   if (pvalue->m.group_idPresent) {
      OSRTSAFEMEMCPY (pctxt, OSUTF8(" ns10:group-id=\""), 16);

      stat = XmlEnc_Ns10_Group_id (pctxt, pvalue->group_id, 0, 0);
      if (stat != 0) return LOG_RTERR (pctxt, stat);

      OSRTSAFEPUTCHAR (pctxt, '"');
   }

   if (pvalue->m.master_elementPresent) {
      OSRTSAFEMEMCPY (pctxt, OSUTF8(" ns10:master-element=\""), 22);

      stat = XmlEnc_Ns10_Master_element (pctxt, pvalue->master_element, 0, 0);
      if (stat != 0) return LOG_RTERR (pctxt, stat);

      OSRTSAFEPUTCHAR (pctxt, '"');
   }

   if (pvalue->m.node_typePresent) {
      OSRTSAFEMEMCPY (pctxt, OSUTF8(" ns10:node-type=\""), 17);

      if(pvalue->node_type < 0 || pvalue->node_type > 6)
         return LOG_RTERR (pctxt, RTERR_INVENUM);

      stat = XmlEnc_Ns10_Node_type (pctxt, pvalue->node_type, 0, 0);
      if (stat != 0) return LOG_RTERR (pctxt, stat);

      OSRTSAFEPUTCHAR (pctxt, '"');
   }

   if (pvalue->m.preset_classPresent) {
      OSRTSAFEMEMCPY (pctxt, OSUTF8(" ns10:preset-class=\""), 20);

      if(pvalue->preset_class < 0 || pvalue->preset_class > 6)
         return LOG_RTERR (pctxt, RTERR_INVENUM);

      stat = XmlEnc_Ns10_Preset_class (pctxt, pvalue->preset_class, 0, 0);
      if (stat != 0) return LOG_RTERR (pctxt, stat);

      OSRTSAFEPUTCHAR (pctxt, '"');
   }

   if (pvalue->m.preset_idPresent) {
      OSRTSAFEMEMCPY (pctxt, OSUTF8(" ns10:preset-id=\""), 17);

      stat = XmlEnc_Ns10_Preset_id (pctxt, pvalue->preset_id, 0, 0);
      if (stat != 0) return LOG_RTERR (pctxt, stat);

      OSRTSAFEPUTCHAR (pctxt, '"');
   }

   if (pvalue->m.preset_sub_typePresent) {
      OSRTSAFEMEMCPY (pctxt, OSUTF8(" ns10:preset-sub-type=\""), 23);

      stat = XmlEnc_Ns10_Preset_sub_type (pctxt, pvalue->preset_sub_type
         , 0, 0);
      if (stat != 0) return LOG_RTERR (pctxt, stat);

      OSRTSAFEPUTCHAR (pctxt, '"');
   }

   if (pvalue->m.acceleratePresent) {
      OSRTSAFEMEMCPY (pctxt, OSUTF8(" ns11:accelerate=\""), 18);

      stat = XmlEnc_Ns11_Accelerate (pctxt, pvalue->accelerate, 0, 0);
      if (stat != 0) return LOG_RTERR (pctxt, stat);

      OSRTSAFEPUTCHAR (pctxt, '"');
   }

   if (pvalue->m.autoReversePresent) {
      OSRTSAFEMEMCPY (pctxt, OSUTF8(" ns11:autoReverse=\""), 19);

      if(pvalue->autoReverse < 0 || pvalue->autoReverse > 1)
         return LOG_RTERR (pctxt, RTERR_INVENUM);

      stat = XmlEnc_Ns11_AutoReverse (pctxt, pvalue->autoReverse, 0, 0);
      if (stat != 0) return LOG_RTERR (pctxt, stat);

      OSRTSAFEPUTCHAR (pctxt, '"');
   }

   if (pvalue->m.beginPresent) {
      OSRTSAFEMEMCPY (pctxt, OSUTF8(" ns11:begin=\""), 13);

      stat = XmlEnc_Ns11_Begin (pctxt, pvalue->begin, 0, 0);
      if (stat != 0) return LOG_RTERR (pctxt, stat);

      OSRTSAFEPUTCHAR (pctxt, '"');
   }

   if (pvalue->m.deceleratePresent) {
      OSRTSAFEMEMCPY (pctxt, OSUTF8(" ns11:decelerate=\""), 18);

      stat = XmlEnc_Ns11_Decelerate (pctxt, pvalue->decelerate, 0, 0);
      if (stat != 0) return LOG_RTERR (pctxt, stat);

      OSRTSAFEPUTCHAR (pctxt, '"');
   }

   if (pvalue->m.durPresent) {
      OSRTSAFEMEMCPY (pctxt, OSUTF8(" ns11:dur=\""), 11);

      stat = XmlEnc_Ns11_Dur (pctxt, pvalue->dur, 0, 0);
      if (stat != 0) return LOG_RTERR (pctxt, stat);

      OSRTSAFEPUTCHAR (pctxt, '"');
   }

   if (pvalue->m.endPresent) {
      OSRTSAFEMEMCPY (pctxt, OSUTF8(" ns11:end=\""), 11);

      stat = XmlEnc_Ns11_End (pctxt, pvalue->end, 0, 0);
      if (stat != 0) return LOG_RTERR (pctxt, stat);

      OSRTSAFEPUTCHAR (pctxt, '"');
   }

   if (pvalue->m.endsyncPresent) {
      OSRTSAFEMEMCPY (pctxt, OSUTF8(" ns11:endsync=\""), 15);

      if(pvalue->endsync < 0 || pvalue->endsync > 3)
         return LOG_RTERR (pctxt, RTERR_INVENUM);

      stat = XmlEnc_Ns11_Endsync (pctxt, pvalue->endsync, 0, 0);
      if (stat != 0) return LOG_RTERR (pctxt, stat);

      OSRTSAFEPUTCHAR (pctxt, '"');
   }

   if (pvalue->m.fillPresent) {
      OSRTSAFEMEMCPY (pctxt, OSUTF8(" ns11:fill=\""), 12);

      if(pvalue->fill < 0 || pvalue->fill > 5)
         return LOG_RTERR (pctxt, RTERR_INVENUM);

      stat = XmlEnc_Ns11_Fill (pctxt, pvalue->fill, 0, 0);
      if (stat != 0) return LOG_RTERR (pctxt, stat);

      OSRTSAFEPUTCHAR (pctxt, '"');
   }

   if (pvalue->m.fillDefaultPresent) {
      OSRTSAFEMEMCPY (pctxt, OSUTF8(" ns11:fillDefault=\""), 19);

      if(pvalue->fillDefault < 0 || pvalue->fillDefault > 5)
         return LOG_RTERR (pctxt, RTERR_INVENUM);

      stat = XmlEnc_Ns11_FillDefault (pctxt, pvalue->fillDefault, 0, 0);
      if (stat != 0) return LOG_RTERR (pctxt, stat);

      OSRTSAFEPUTCHAR (pctxt, '"');
   }

   if (pvalue->m.repeatCountPresent) {
      OSRTSAFEMEMCPY (pctxt, OSUTF8(" ns11:repeatCount=\""), 19);

      stat = XmlEnc_Ns11_RepeatCount (pctxt, pvalue->repeatCount, 0, 0);
      if (stat != 0) return LOG_RTERR (pctxt, stat);

      OSRTSAFEPUTCHAR (pctxt, '"');
   }

   if (pvalue->m.repeatDurPresent) {
      OSRTSAFEMEMCPY (pctxt, OSUTF8(" ns11:repeatDur=\""), 17);

      stat = XmlEnc_Ns11_RepeatDur (pctxt, pvalue->repeatDur, 0, 0);
      if (stat != 0) return LOG_RTERR (pctxt, stat);

      OSRTSAFEPUTCHAR (pctxt, '"');
   }

   if (pvalue->m.restartPresent) {
      OSRTSAFEMEMCPY (pctxt, OSUTF8(" ns11:restart=\""), 15);

      if(pvalue->restart < 0 || pvalue->restart > 3)
         return LOG_RTERR (pctxt, RTERR_INVENUM);

      stat = XmlEnc_Ns11_Restart (pctxt, pvalue->restart, 0, 0);
      if (stat != 0) return LOG_RTERR (pctxt, stat);

      OSRTSAFEPUTCHAR (pctxt, '"');
   }

   if (pvalue->m.restartDefaultPresent) {
      OSRTSAFEMEMCPY (pctxt, OSUTF8(" ns11:restartDefault=\""), 22);

      if(pvalue->restartDefault < 0 || pvalue->restartDefault > 3)
         return LOG_RTERR (pctxt, RTERR_INVENUM);

      stat = XmlEnc_Ns11_RestartDefault (pctxt, pvalue->restartDefault, 0, 0);
      if (stat != 0) return LOG_RTERR (pctxt, stat);

      OSRTSAFEPUTCHAR (pctxt, '"');
   }

   OSRTSAFEPUTCHAR (pctxt, '>');
   pctxt->flags &= ~OSTERMSTART;
   pctxt->state = OSXMLSTART;

   { const OSUTF8CHAR* savedPrefix = nsPrefix;
   nsPrefix = rtXmlNSGetPrefix (pctxt, OSUTF8(
      "urn:oasis:names:tc:opendocument:xmlns:animation:1.0"));

   /* encode choice_list */

   { const OSUTF8CHAR* savedPrefix = nsPrefix;
   nsPrefix = rtXmlNSGetPrefix (pctxt, OSUTF8(
      "urn:oasis:names:tc:opendocument:xmlns:animation:1.0"));

   { OSRTDListNode* pnode = pvalue->choice_list.head;
   while (0 != pnode) {
      stat = XmlEnc_Par_element (pctxt, ((Par_element*)pnode->data)
         , 0, nsPrefix);
      if (stat != 0) return LOG_RTERR (pctxt, stat);
      pnode = pnode->next;
   }}
   nsPrefix = savedPrefix;
   }

   nsPrefix = savedPrefix;
   }

   stat = rtXmlEncEndElement (pctxt, elemName, nsPrefix);
   if (stat != 0) return LOG_RTERR (pctxt, stat);

   return (stat);
}

