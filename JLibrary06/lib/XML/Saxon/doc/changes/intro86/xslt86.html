<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
      <!--
		
		Generated at 2007-02-12T11:38:49.726Z-->
      <title>Saxonica: XSLT and XQuery Processing: XSLT changes</title>
      <meta name="coverage" content="Worldwide">
      <meta name="copyright" content="Copyright Saxonica Ltd">
      <meta name="title" content="Saxonica: XSLT and XQuery Processing: XSLT changes">
      <meta name="robots" content="noindex,nofollow">
      <link rel="stylesheet" href="../../saxondocs.css" type="text/css">
   </head>
   <body class="main">
      <div id="rhDkBlueArea" style="position:absolute; width:123px; height:1578px; z-index:2; right: 0px; top: 0px; border: 1px none #000000; background-color: #C1CEDE; layer-background-color: #C1CEDE; visibility: visible;"></div>
      <div id="rhMdBlueArea" style="position:absolute; width:217px; height:1578px; z-index:2; right: 340px; top: 0px; border: 1px none #000000; background-color: #E4EEF0; layer-background-color: #E4EEF0; visibility: visible;"></div>
      <div id="lhLightArea" style="position:absolute; width:34px; height:1578px; z-index:2; left: 66px; top: 0px; border: 1px none #000000; background-color: #f6fffb; layer-background-color: #E4EEF0; visibility: visible;"></div>
      <div id="lhDkBlueArea" style="position:absolute; width:66px; height:1578px; z-index:2; left: 0px; top: 0px; border: 1px none #000000; background-color: #C1CEDE; layer-background-color: #C1CEDE; visibility: visible;"></div>
      <div id="LogoArea" style="position:absolute; width:340px; height:72px; z-index:3; right: 0px; top: 0px; border: 1px none #000000; visibility: visible;"><a href="../../index/intro.html"><img src="../../img/saxonica_logo.gif" width="340" height="72" border="0" alt="Saxonica.com"></a></div>
      <div id="MenuArea" style="position:absolute; width:157px; z-index:4; right: 33px; top: 114px; visibility: visible; background-color: #f6fffb; layer-background-color: #f6fffb; border: 1px solid #3D5B96; padding-top:9px; padding-left:15px;padding-right:11px; padding-bottom:9px;">
         <table width="164" border="0" bgcolor="#3D5B96" cellspacing="1" cellpadding="1">
            <tr bgcolor="#f6fffb">
               <td style="padding-left:5px"><a href="http://www.saxonica.com/">SAXONICA</a></td>
            </tr>
         </table><br><table border="0" cellspacing="0" cellpadding="1">
            <tr>
               <td class="title" colspan="2">Saxon Documentation</td>
            </tr>
            <tr>
               <td colspan="2"><img src="../../img/spacer.gif" width="120" height="10" border="0" alt=""></td>
            </tr>
            <tr>
               <td colspan="2"><a href="../../contents.html">Full Contents</a></td>
            </tr>
            <tr>
               <td colspan="2"><img src="../../img/text_blue_dot.gif" width="164" height="1" border="0" alt=""></td>
            </tr>
            <tr>
               <td colspan="2"><a href="../../index/intro.html">About Saxon</a></td>
            </tr>
            <tr>
               <td colspan="2"><img src="../../img/text_blue_dot.gif" width="164" height="1" border="0" alt=""></td>
            </tr>
            <tr>
               <td colspan="2"><a href="../../changes/intro.html">Changes in this Release</a></td>
            </tr>
            <tr>
               <td><img src="../../img/spacer.gif" width="10" height="5" border="0" alt="blank space"></td>
               <td><a href="../intro.html">Version 8.9 (2007-02-12)</a></td>
            </tr>
            <tr>
               <td><img src="../../img/spacer.gif" width="10" height="5" border="0" alt="blank space"></td>
               <td><a href="../intro88.html">Version 8.8 (2006-09-05)</a></td>
            </tr>
            <tr>
               <td><img src="../../img/spacer.gif" width="10" height="5" border="0" alt="blank space"></td>
               <td><a href="../intro873.html">Version 8.7.3 (2006-06-13)</a></td>
            </tr>
            <tr>
               <td><img src="../../img/spacer.gif" width="10" height="5" border="0" alt="blank space"></td>
               <td><a href="../v872.html">Version 8.7.2 (2006-04-19)</a></td>
            </tr>
            <tr>
               <td><img src="../../img/spacer.gif" width="10" height="5" border="0" alt="blank space"></td>
               <td><a href="../v871.html">Version 8.7.1 (2006-04-13)</a></td>
            </tr>
            <tr>
               <td><img src="../../img/spacer.gif" width="10" height="5" border="0" alt="blank space"></td>
               <td><a href="../intro87.html">Version 8.7 (2006-02-24)</a></td>
            </tr>
            <tr>
               <td><img src="../../img/spacer.gif" width="10" height="5" border="0" alt="blank space"></td>
               <td><a href="../intro861.html">Version 8.6.1 (24 November 2005)</a></td>
            </tr>
            <tr>
               <td>»&nbsp;</td>
               <td><a href="../intro86.html">Version 8.6 (3 November 2005)</a></td>
            </tr>
            <tr>
               <td><img src="../../img/spacer.gif" width="10" height="5" border="0" alt="blank space"></td>
               <td><a href="../intro851.html">Version 8.5.1 (26 August 2005)</a></td>
            </tr>
            <tr>
               <td><img src="../../img/spacer.gif" width="10" height="5" border="0" alt="blank space"></td>
               <td><a href="../intro85.html">Version 8.5 (2 August 2005)</a></td>
            </tr>
            <tr>
               <td><img src="../../img/spacer.gif" width="10" height="5" border="0" alt="blank space"></td>
               <td><a href="../v84.html">Version 8.4 (4 April 2005)</a></td>
            </tr>
            <tr>
               <td><img src="../../img/spacer.gif" width="10" height="5" border="0" alt="blank space"></td>
               <td><a href="../v83.html">Version 8.3 (11 February 2005)</a></td>
            </tr>
            <tr>
               <td><img src="../../img/spacer.gif" width="10" height="5" border="0" alt="blank space"></td>
               <td><a href="../v8.2.html">Version 8.2 (21 December 2004)</a></td>
            </tr>
            <tr>
               <td><img src="../../img/spacer.gif" width="10" height="5" border="0" alt="blank space"></td>
               <td><a href="../v811.html">Version 8.1.1 (8 October 2004)</a></td>
            </tr>
            <tr>
               <td><img src="../../img/spacer.gif" width="10" height="5" border="0" alt="blank space"></td>
               <td><a href="../intro81.html">Version 8.1 (24 September 2004)</a></td>
            </tr>
            <tr>
               <td><img src="../../img/spacer.gif" width="10" height="5" border="0" alt="blank space"></td>
               <td><a href="../v8.0.html">Version 8.0 (1 June 2004)</a></td>
            </tr>
            <tr>
               <td colspan="2"><img src="../../img/text_blue_dot.gif" width="164" height="1" border="0" alt=""></td>
            </tr>
            <tr>
               <td colspan="2"><a href="../../conditions/intro.html">Conditions of Use</a></td>
            </tr>
            <tr>
               <td colspan="2"><img src="../../img/text_blue_dot.gif" width="164" height="1" border="0" alt=""></td>
            </tr>
            <tr>
               <td colspan="2"><a href="../../using-xsl/intro.html">Using XSLT 2.0</a></td>
            </tr>
            <tr>
               <td colspan="2"><img src="../../img/text_blue_dot.gif" width="164" height="1" border="0" alt=""></td>
            </tr>
            <tr>
               <td colspan="2"><a href="../../using-xquery/intro.html">Using XQuery</a></td>
            </tr>
            <tr>
               <td colspan="2"><img src="../../img/text_blue_dot.gif" width="164" height="1" border="0" alt=""></td>
            </tr>
            <tr>
               <td colspan="2"><a href="../../sourcedocs/intro.html">Handling Source Documents</a></td>
            </tr>
            <tr>
               <td colspan="2"><img src="../../img/text_blue_dot.gif" width="164" height="1" border="0" alt=""></td>
            </tr>
            <tr>
               <td colspan="2"><a href="../../schema-processing/intro.html">XML Schema Processing</a></td>
            </tr>
            <tr>
               <td colspan="2"><img src="../../img/text_blue_dot.gif" width="164" height="1" border="0" alt=""></td>
            </tr>
            <tr>
               <td colspan="2"><a href="../../xpath-api/intro.html">XPath API for Java</a></td>
            </tr>
            <tr>
               <td colspan="2"><img src="../../img/text_blue_dot.gif" width="164" height="1" border="0" alt=""></td>
            </tr>
            <tr>
               <td colspan="2"><a href="../../dotnet/intro.html">Saxon on .NET</a></td>
            </tr>
            <tr>
               <td colspan="2"><img src="../../img/text_blue_dot.gif" width="164" height="1" border="0" alt=""></td>
            </tr>
            <tr>
               <td colspan="2"><a href="../../extensibility/intro.html">Extensibility</a></td>
            </tr>
            <tr>
               <td colspan="2"><img src="../../img/text_blue_dot.gif" width="164" height="1" border="0" alt=""></td>
            </tr>
            <tr>
               <td colspan="2"><a href="../../extensions/intro.html">Saxon Extensions</a></td>
            </tr>
            <tr>
               <td colspan="2"><img src="../../img/text_blue_dot.gif" width="164" height="1" border="0" alt=""></td>
            </tr>
            <tr>
               <td colspan="2"><a href="../../samples/intro.html">Sample Saxon Applications</a></td>
            </tr>
            <tr>
               <td colspan="2"><img src="../../img/text_blue_dot.gif" width="164" height="1" border="0" alt=""></td>
            </tr>
            <tr>
               <td colspan="2"><a href="../../sql-extension/intro.html">The Saxon SQL Extension</a></td>
            </tr>
            <tr>
               <td colspan="2"><img src="../../img/text_blue_dot.gif" width="164" height="1" border="0" alt=""></td>
            </tr>
            <tr>
               <td colspan="2"><a href="../../xsl-elements/intro.html">XSLT Elements</a></td>
            </tr>
            <tr>
               <td colspan="2"><img src="../../img/text_blue_dot.gif" width="164" height="1" border="0" alt=""></td>
            </tr>
            <tr>
               <td colspan="2"><a href="../../expressions/intro.html">XPath 2.0 Expression Syntax</a></td>
            </tr>
            <tr>
               <td colspan="2"><img src="../../img/text_blue_dot.gif" width="164" height="1" border="0" alt=""></td>
            </tr>
            <tr>
               <td colspan="2"><a href="../../functions/intro.html">Function Library</a></td>
            </tr>
            <tr>
               <td colspan="2"><img src="../../img/text_blue_dot.gif" width="164" height="1" border="0" alt=""></td>
            </tr>
            <tr>
               <td colspan="2"><a href="../../conformance/intro.html">Standards Conformance</a></td>
            </tr>
            <tr>
               <td colspan="2"><img src="../../img/text_blue_dot.gif" width="164" height="1" border="0" alt=""></td>
            </tr>
         </table>
      </div>
      <div id="MainTextArea" style="position:absolute; height:100%; z-index:5; left: 130px; right: 260px; top: 110px; border: 1px none #000000; visibility: visible;">
         <h1>XSLT changes</h1>
         <p>Some changes have been made to the <code>format-date()</code> family of functions:
         </p>
         <ul>
            <li>
               <p>Whitespace characters are now removed from a variable marker specified in the picture.</p>
            </li>
            <li>
               <p>When displaying fractional seconds, up to six digits of precision may be displayed. The width modifiers
                  for the "f" component are now recognized: for example "f,2-2" displays exactly two decimal places; "f,1-6" displays
                  at least one decimal place and at most six, "f,*-6" displays as many places as are present in the value;
                  "f,3-*" displays at least three, and as many as are necessary.
               </p>
            </li>
            <li>
               <p>Syntax errors in the picture (for example, references to undefined components) are now
                  non-recoverable errors.
               </p>
            </li>
            <li>
               <p>BC dates and the AD/BC suffix (component [E]) are now displayed correctly. (I've had to take a position here
                  on whether to use "BC" or "BCE" ["Before the Common Era"]. I've chosen the former, mainly because I believe it is more
                  widely used, but also as a matter of personal preference.
               </p>
            </li>
            <li>
               <p>The XSLT 2.0 specification does not say what it means by "week number within a month" (component [w]). I have
                  adopted the definition that week 1 in a month is the week containing the first Thursday of the month, and that the days
                  before the start of week 1 are in week zero.
               </p>
            </li>
            <li>
               <p>If a date/time has no timezone, the XSLT format-date/time() functions now display nothing when the timezone
                  is requested. Previously they displayed the implicit timezone.
               </p>
            </li>
            <li>
               <p>If a calendar other than AD or ISO is requested, the result is prefixed with <code>[Calendar: AD]</code>
                  as required by the spec. Similarly, the result is prefixed with <code>[Language: en]</code> if an unsupported
                  language is requested and English is used as the fallback.
               </p>
            </li>
            <li>
               <p>Timezones are now formatted correctly when the [Z] and [z] components are used in the picture. With [ZN],
                  a timezone name is used; where several names are in use for the timezone, the country argument (the 5th argument)
                  to format-date/time() is taken into account (for example, timezone GMT+1 is displayed as "BST" where the country is "gb",
                  or as "MEZ" where the country is "de"). However, the list of known timezone names is fairly small. The timezone
                  name is always chosen on the assumption that daylight saving is not in effect. Timezone names can be customized
                  in the same way as other localizations are performed, using a subclass of Numberer.
               </p>
            </li>
         </ul>
         <p>The rules for processing in forwards-compatible mode have been aligned with the changes that first appeared
            in the XSLT 2.0 draft
            of 15 September 2005. The main effect of these changes is to remove the rule that static errors (for example in
            XPath expressions) are not reported if the instruction is not executed. This means that if you want to mark sections
            of the stylesheet for use under a future version of XSLT, you should use the new compile-time <code>[xsl]:use-when</code>
            construct, rather than relying on forwards compatible processing mode.
         </p>
         <p>In the format-number() function, Saxon now rounds numbers up or down to eliminate spurious
            non-zero digits, provided that the
            resulting number is still equal to the original when converted back to a double.
            For example, this means that a number such as 1E22 is output as
            100,000,000,000,000,000,000,000 rather than 99,999,999,999,999,991,611,392.
            Both these numbers produce 1E22 when converted back to a to double, and the latter number is the one produced
            by double-to-decimal conversion, because it is the one closest to the true value of the double.
         </p>
         <p>In <code>xsl:decimal-format</code>, Saxon now checks that the character specified as the <code>zero-digit</code> is indeed
            classified in Unicode as a digit with numeric value zero. Previously it took this on trust.
            Note that this means that certain
            sensible values which were previously allowed are no longer allowed, for example x2080, SUBSCRIPT ZERO.
         </p>
         <p>Using the built-in types that are not allowed by a Basic XSLT Processor
            (such as <code>xs:int</code>, <code>xs:token</code>) in Saxon-B
            now results in a hard error rather than a warning as previously.
         </p>
         <p>In the past, calls on <code>xsl:result-document</code> were disallowed whenever calls on extension functions were
            disabled: the assumption being that the stylesheet is untrusted and therefore should not be allowed to write to
            file locations using a relative URI. This restriction now applies only for an <code>xsl:result-document</code>
            instruction with an explicit <code>href</code> attribute.
         </p>
         <p>The <code>format</code> attribute of <code>xsl:result-document</code> is now an attribute value template.
         </p>
         <p>Attributes that contain a collation name (specifically the <code>collation</code> attribute of <code>xsl:sort</code>,
            <code>xsl:key</code>, and <code>xsl:for-each-group</code>; the <code>[xsl:]default-collation</code> attribute
            wherever it appears; and the <code>name</code> attribute of <code>saxon:collation</code>) now require the collation
            name to be a valid URI. If it is a relative URI then it is resolved against the base URI of the element where it
            appears.
         </p>
         <p>The restriction that stylesheets cannot be compiled if they contain calls on saxon:evaluate() has been removed.</p>
         <p>Conformance documentation has been added: see <a class="bodylink" href="../../conformance/xslt20.html">Conformance</a>.
         </p>
         <table width="100%">
            <tr>
               <td>
                  <p align="right"><a class="nav" href="functions86.html">Next</a></p>
               </td>
            </tr>
         </table>
      </div>
   </body>
</html>